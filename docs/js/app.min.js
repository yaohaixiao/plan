!function s(r,l,o){function c(t,e){if(!l[t]){if(!r[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}var i=l[t]={exports:{}};r[t][0].call(i.exports,function(e){return c(r[t][1][e]||e)},i,i.exports,s,r,l,o)}return l[t].exports}for(var u="function"==typeof require&&require,e=0;e<o.length;e++)c(o[e]);return c}({1:[function(e,t,n){t.exports=function(e,t){return Array.prototype.slice.call(e,t)}},{}],2:[function(e,t,n){"use strict";var a=e("ticky");t.exports=function(e,t,n){e&&a(function(){e.apply(n||null,t||[])})}},{ticky:12}],3:[function(e,t,n){"use strict";var l=e("atoa"),o=e("./debounce");t.exports=function(i,e){var s=e||{},r={};return void 0===i&&(i={}),i.on=function(e,t){return r[e]?r[e].push(t):r[e]=[t],i},i.once=function(e,t){return t._once=!0,i.on(e,t),i},i.off=function(e,t){var n=arguments.length;if(1===n)delete r[e];else if(0===n)r={};else{var a=r[e];if(!a)return i;a.splice(a.indexOf(t),1)}return i},i.emit=function(){var e=l(arguments);return i.emitterSnapshot(e.shift()).apply(this,e)},i.emitterSnapshot=function(a){var e=(r[a]||[]).slice(0);return function(){var t=l(arguments),n=this||i;if("error"===a&&!1!==s.throws&&!e.length)throw 1===t.length?t[0]:t;return e.forEach(function(e){s.async?o(e,t,n):e.apply(n,t),e._once&&i.off(a,e)}),i}},i}},{"./debounce":2,atoa:1}],4:[function(n,a,e){(function(i){"use strict";var s=n("custom-event"),r=n("./eventmap"),l=i.document,e=function(e,t,n,a){return e.addEventListener(t,n,a)},t=function(e,t,n,a){return e.removeEventListener(t,n,a)},o=[];function c(e,t,n){var a=function(e,t,n){var a,i;for(a=0;a<o.length;a++)if((i=o[a]).element===e&&i.type===t&&i.fn===n)return a}(e,t,n);if(a){var i=o[a].wrapper;return o.splice(a,1),i}}i.addEventListener||(e=function(e,t,n){return e.attachEvent("on"+t,function(e,t,n){var a=c(e,t,n)||function(n,e,a){return function(e){var t=e||i.event;t.target=t.target||t.srcElement,t.preventDefault=t.preventDefault||function(){t.returnValue=!1},t.stopPropagation=t.stopPropagation||function(){t.cancelBubble=!0},t.which=t.which||t.keyCode,a.call(n,t)}}(e,0,n);return o.push({wrapper:a,element:e,type:t,fn:n}),a}(e,t,n))},t=function(e,t,n){var a=c(e,t,n);if(a)return e.detachEvent("on"+t,a)}),a.exports={add:e,remove:t,fabricate:function(e,t,n){var a=-1===r.indexOf(t)?new s(t,{detail:n}):function(){var e;l.createEvent?(e=l.createEvent("Event")).initEvent(t,!0,!0):l.createEventObject&&(e=l.createEventObject());return e}();e.dispatchEvent?e.dispatchEvent(a):e.fireEvent("on"+t,a)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./eventmap":5,"custom-event":6}],5:[function(e,i,t){(function(e){"use strict";var t=[],n="",a=/^on/;for(n in e)a.test(n)&&t.push(n.slice(2));i.exports=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,n,t){(function(e){var t=e.CustomEvent;n.exports=function(){try{var e=new t("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}()?t:"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(e,t,n){"use strict";var a={},i="(?:^|\\s)",s="(?:\\s|$)";function r(e){var t=a[e];return t?t.lastIndex=0:a[e]=t=new RegExp(i+e+s,"g"),t}t.exports={add:function(e,t){var n=e.className;n.length?r(t).test(n)||(e.className+=" "+t):e.className=t},rm:function(e,t){e.className=e.className.replace(r(t)," ").trim()}}},{}],8:[function(e,t,n){(function(i){"use strict";var Y=e("contra/emitter"),F=e("crossvent"),$=e("./classes"),H=document,z=H.documentElement;function j(e,t,n,a){i.navigator.pointerEnabled?F[t](e,{mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"}[n],a):i.navigator.msPointerEnabled?F[t](e,{mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"}[n],a):(F[t](e,{mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"}[n],a),F[t](e,n,a))}function B(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var t=e.button;return void 0!==t?1&t?1:2&t?3:4&t?2:0:void 0}function X(e,t){return void 0!==i[t]?i[t]:z.clientHeight?z[e]:H.body[e]}function W(e,t,n){var a,i=e||{},s=i.className;return i.className+=" gu-hide",a=H.elementFromPoint(t,n),i.className=s,a}function V(){return!1}function K(){return!0}function Z(e){return e.width||e.right-e.left}function U(e){return e.height||e.bottom-e.top}function G(e){return e.parentNode===H?null:e.parentNode}function J(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||function e(t){if(!t)return!1;if("false"===t.contentEditable)return!1;if("true"===t.contentEditable)return!0;return e(G(t))}(e)}function Q(t){return t.nextElementSibling||function(){var e=t;for(;e=e.nextSibling,e&&1!==e.nodeType;);return e}()}function ee(e,t){var n=function(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}(t),a={pageX:"clientX",pageY:"clientY"};return e in a&&!(e in n)&&a[e]in n&&(e=a[e]),n[e]}t.exports=function(e,t){var p,f,m,g,v,s,r,k,y,E,n;1===arguments.length&&!1===Array.isArray(e)&&(t=e,e=[]);var l,T=null,C=t||{};void 0===C.moves&&(C.moves=K),void 0===C.accepts&&(C.accepts=K),void 0===C.invalid&&(C.invalid=function(){return!1}),void 0===C.containers&&(C.containers=e||[]),void 0===C.isContainer&&(C.isContainer=V),void 0===C.copy&&(C.copy=!1),void 0===C.copySortSource&&(C.copySortSource=!1),void 0===C.revertOnSpill&&(C.revertOnSpill=!1),void 0===C.removeOnSpill&&(C.removeOnSpill=!1),void 0===C.direction&&(C.direction="vertical"),void 0===C.ignoreInputTextSelection&&(C.ignoreInputTextSelection=!0),void 0===C.mirrorContainer&&(C.mirrorContainer=H.body);var b=Y({containers:C.containers,start:function(e){var t=_(e);t&&S(t)},end:x,cancel:M,remove:D,destroy:function(){a(!0),N({})},canMove:function(e){return!!_(e)},dragging:!1});return!0===C.removeOnSpill&&b.on("over",function(e){$.rm(e,"gu-hide")}).on("out",function(e){b.dragging&&$.add(e,"gu-hide")}),a(),b;function o(e){return-1!==b.containers.indexOf(e)||C.isContainer(e)}function a(e){var t=e?"remove":"add";j(z,t,"mousedown",d),j(z,t,"mouseup",N)}function c(e){j(z,e?"remove":"add","mousemove",h)}function u(e){var t=e?"remove":"add";F[t](z,"selectstart",i),F[t](z,"click",i)}function i(e){l&&e.preventDefault()}function d(e){if(s=e.clientX,r=e.clientY,!(1!==B(e)||e.metaKey||e.ctrlKey)){var t=e.target,n=_(t);n&&(l=n,c(),"mousedown"===e.type&&(J(t)?t.focus():e.preventDefault()))}}function h(e){if(l)if(0!==B(e)){if(void 0===e.clientX||e.clientX!==s||void 0===e.clientY||e.clientY!==r){if(C.ignoreInputTextSelection){var t=ee("clientX",e),n=ee("clientY",e);if(J(H.elementFromPoint(t,n)))return}var a=l;c(!0),u(),x(),S(a);var i=function(e){var t=e.getBoundingClientRect();return{left:t.left+X("scrollLeft","pageXOffset"),top:t.top+X("scrollTop","pageYOffset")}}(m);g=ee("pageX",e)-i.left,v=ee("pageY",e)-i.top,$.add(E||m,"gu-transit"),function(){if(p)return;var e=m.getBoundingClientRect();(p=m.cloneNode(!0)).style.width=Z(e)+"px",p.style.height=U(e)+"px",$.rm(p,"gu-transit"),$.add(p,"gu-mirror"),C.mirrorContainer.appendChild(p),j(z,"add","mousemove",I),$.add(C.mirrorContainer,"gu-unselectable"),b.emit("cloned",p,m,"mirror")}(),I(e)}}else N({})}function _(e){if(!(b.dragging&&p||o(e))){for(var t=e;G(e)&&!1===o(G(e));){if(C.invalid(e,t))return;if(!(e=G(e)))return}var n=G(e);if(n)if(!C.invalid(e,t))if(C.moves(e,n,t,Q(e)))return{item:e,source:n}}}function S(e){!function(e,t){return"boolean"==typeof C.copy?C.copy:C.copy(e,t)}(e.item,e.source)||(E=e.item.cloneNode(!0),b.emit("cloned",E,e.item,"copy")),f=e.source,m=e.item,k=y=Q(e.item),b.dragging=!0,b.emit("drag",m,f)}function x(){if(b.dragging){var e=E||m;P(e,G(e))}}function w(){c(!(l=!1)),u(!0)}function N(e){if(w(),b.dragging){var t=E||m,n=ee("clientX",e),a=ee("clientY",e),i=O(W(p,n,a),n,a);i&&(E&&C.copySortSource||!E||i!==f)?P(t,i):C.removeOnSpill?D():M()}}function P(e,t){var n=G(e);E&&C.copySortSource&&t===f&&n.removeChild(m),L(t)?b.emit("cancel",e,f,f):b.emit("drop",e,t,f,y),A()}function D(){if(b.dragging){var e=E||m,t=G(e);t&&t.removeChild(e),b.emit(E?"cancel":"remove",e,t,f),A()}}function M(e){if(b.dragging){var t=0<arguments.length?e:C.revertOnSpill,n=E||m,a=G(n),i=L(a);!1===i&&t&&(E?a&&a.removeChild(E):f.insertBefore(n,k)),i||t?b.emit("cancel",n,f,f):b.emit("drop",n,a,f,y),A()}}function A(){var e=E||m;w(),p&&($.rm(C.mirrorContainer,"gu-unselectable"),j(z,"remove","mousemove",I),G(p).removeChild(p),p=null),e&&$.rm(e,"gu-transit"),n&&clearTimeout(n),b.dragging=!1,T&&b.emit("out",e,T,f),b.emit("dragend",e),f=m=E=k=y=n=T=null}function L(e,t){var n;return n=void 0!==t?t:p?y:Q(E||m),e===f&&n===k}function O(n,a,i){for(var s=n;s&&!e();)s=G(s);return s;function e(){if(!1===o(s))return!1;var e=R(s,n),t=q(s,e,a,i);return!!L(s,t)||C.accepts(m,s,f,t)}}function I(e){if(p){e.preventDefault();var t=ee("clientX",e),n=ee("clientY",e),a=t-g,i=n-v;p.style.left=a+"px",p.style.top=i+"px";var s=E||m,r=W(p,t,n),l=O(r,t,n),o=null!==l&&l!==T;!o&&null!==l||(T&&h("out"),T=l,o&&h("over"));var c=G(s);if(l!==f||!E||C.copySortSource){var u,d=R(l,r);if(null!==d)u=q(l,d,t,n);else{if(!0!==C.revertOnSpill||E)return void(E&&c&&c.removeChild(s));u=k,l=f}(null===u&&o||u!==s&&u!==Q(s))&&(y=u,l.insertBefore(s,u),b.emit("shadow",s,l,f))}else c&&c.removeChild(s)}function h(e){b.emit(e,s,T,f)}}function R(e,t){for(var n=t;n!==e&&G(n)!==e;)n=G(n);return n===z?null:n}function q(i,t,s,r){var l="horizontal"===C.direction;return t!==i?function(){var e=t.getBoundingClientRect();if(l)return n(s>e.left+Z(e)/2);return n(r>e.top+U(e)/2)}():function(){var e,t,n,a=i.children.length;for(e=0;e<a;e++){if(t=i.children[e],n=t.getBoundingClientRect(),l&&n.left+n.width/2>s)return t;if(!l&&n.top+n.height/2>r)return t}return null}();function n(e){return e?Q(t):t}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./classes":7,"contra/emitter":3,crossvent:4}],9:[function(e,k,b){(function(e){!function(e){"use strict";var y={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}|~{3,})([^`~\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:p,table:p,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/};function o(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||v.defaults,this.rules=y.normal,this.options.pedantic?this.rules=y.pedantic:this.options.gfm&&(this.rules=y.gfm)}y._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,y._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,y.def=s(y.def).replace("label",y._label).replace("title",y._title).getRegex(),y.bullet=/(?:[*+-]|\d{1,9}\.)/,y.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,y.item=s(y.item,"gm").replace(/bull/g,y.bullet).getRegex(),y.list=s(y.list).replace(/bull/g,y.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+y.def.source+")").getRegex(),y._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",y._comment=/<!--(?!-?>)[\s\S]*?-->/,y.html=s(y.html,"i").replace("comment",y._comment).replace("tag",y._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),y.paragraph=s(y._paragraph).replace("hr",y.hr).replace("heading"," {0,3}#{1,6} +").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}|~{3,})[^`\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",y._tag).getRegex(),y.blockquote=s(y.blockquote).replace("paragraph",y.paragraph).getRegex(),y.normal=f({},y),y.gfm=f({},y.normal,{nptable:/^ *([^|\n ].*\|.*)\n *([-:]+ *\|[-| :]*)(?:\n((?:.*[^>\n ].*(?:\n|$))*)\n*|$)/,table:/^ *\|(.+)\n *\|?( *[-:]+[-| :]*)(?:\n((?: *[^>\n ].*(?:\n|$))*)\n*|$)/}),y.pedantic=f({},y.normal,{html:s("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",y._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:p,paragraph:s(y.normal._paragraph).replace("hr",y.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",y.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()}),o.rules=y,o.lex=function(e,t){return new o(t).lex(e)},o.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},o.prototype.token=function(e,t){var n,a,i,s,r,l,o,c,u,d,h,p,f,m,g,v;for(e=e.replace(/^ +$/gm,"");e;)if((i=this.rules.newline.exec(e))&&(e=e.substring(i[0].length),1<i[0].length&&this.tokens.push({type:"space"})),i=this.rules.code.exec(e)){var k=this.tokens[this.tokens.length-1];e=e.substring(i[0].length),k&&"paragraph"===k.type?k.text+="\n"+i[0].trimRight():(i=i[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",codeBlockStyle:"indented",text:this.options.pedantic?i:C(i,"\n")}))}else if(i=this.rules.fences.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"code",lang:i[2]?i[2].trim():i[2],text:i[3]||""});else if(i=this.rules.heading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:i[1].length,text:i[2]});else if((i=this.rules.nptable.exec(e))&&(l={type:"table",header:T(i[1].replace(/^ *| *\| *$/g,"")),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3]?i[3].replace(/\n$/,"").split("\n"):[]}).header.length===l.align.length){for(e=e.substring(i[0].length),h=0;h<l.align.length;h++)/^ *-+: *$/.test(l.align[h])?l.align[h]="right":/^ *:-+: *$/.test(l.align[h])?l.align[h]="center":/^ *:-+ *$/.test(l.align[h])?l.align[h]="left":l.align[h]=null;for(h=0;h<l.cells.length;h++)l.cells[h]=T(l.cells[h],l.header.length);this.tokens.push(l)}else if(i=this.rules.hr.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"hr"});else if(i=this.rules.blockquote.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"blockquote_start"}),i=i[0].replace(/^ *> ?/gm,""),this.token(i,t),this.tokens.push({type:"blockquote_end"});else if(i=this.rules.list.exec(e)){for(e=e.substring(i[0].length),o={type:"list_start",ordered:m=1<(s=i[2]).length,start:m?+s:"",loose:!1},this.tokens.push(o),n=!(c=[]),f=(i=i[0].match(this.rules.item)).length,h=0;h<f;h++)d=(l=i[h]).length,~(l=l.replace(/^ *([*+-]|\d+\.) */,"")).indexOf("\n ")&&(d-=l.length,l=this.options.pedantic?l.replace(/^ {1,4}/gm,""):l.replace(new RegExp("^ {1,"+d+"}","gm"),"")),h!==f-1&&(r=y.bullet.exec(i[h+1])[0],(1<s.length?1===r.length:1<r.length||this.options.smartLists&&r!==s)&&(e=i.slice(h+1).join("\n")+e,h=f-1)),a=n||/\n\n(?!\s*$)/.test(l),h!==f-1&&(n="\n"===l.charAt(l.length-1),a=a||n),a&&(o.loose=!0),v=void 0,(g=/^\[[ xX]\] /.test(l))&&(v=" "!==l[1],l=l.replace(/^\[[ xX]\] +/,"")),u={type:"list_item_start",task:g,checked:v,loose:a},c.push(u),this.tokens.push(u),this.token(l,!1),this.tokens.push({type:"list_item_end"});if(o.loose)for(f=c.length,h=0;h<f;h++)c[h].loose=!0;this.tokens.push({type:"list_end"})}else if(i=this.rules.html.exec(e))e=e.substring(i[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===i[1]||"script"===i[1]||"style"===i[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):E(i[0]):i[0]});else if(t&&(i=this.rules.def.exec(e)))e=e.substring(i[0].length),i[3]&&(i[3]=i[3].substring(1,i[3].length-1)),p=i[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[p]||(this.tokens.links[p]={href:i[2],title:i[3]});else if((i=this.rules.table.exec(e))&&(l={type:"table",header:T(i[1].replace(/^ *| *\| *$/g,"")),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3]?i[3].replace(/\n$/,"").split("\n"):[]}).header.length===l.align.length){for(e=e.substring(i[0].length),h=0;h<l.align.length;h++)/^ *-+: *$/.test(l.align[h])?l.align[h]="right":/^ *:-+: *$/.test(l.align[h])?l.align[h]="center":/^ *:-+ *$/.test(l.align[h])?l.align[h]="left":l.align[h]=null;for(h=0;h<l.cells.length;h++)l.cells[h]=T(l.cells[h].replace(/^ *\| *| *\| *$/g,""),l.header.length);this.tokens.push(l)}else if(i=this.rules.lheading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:"="===i[2].charAt(0)?1:2,text:i[1]});else if(t&&(i=this.rules.paragraph.exec(e)))e=e.substring(i[0].length),this.tokens.push({type:"paragraph",text:"\n"===i[1].charAt(i[1].length-1)?i[1].slice(0,-1):i[1]});else if(i=this.rules.text.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"text",text:i[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var n={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:p,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*<\[])\*(?!\*)|^_([^\s<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s<"][\s\S]*?[^\s\*])\*(?!\*|[^\spunctuation])|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:p,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/};function u(e,t){if(this.options=t||v.defaults,this.links=e,this.rules=n.normal,this.renderer=this.options.renderer||new a,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=n.pedantic:this.options.gfm&&(this.options.breaks?this.rules=n.breaks:this.rules=n.gfm)}function a(e){this.options=e||v.defaults}function i(){}function c(e){this.tokens=[],this.token=null,this.options=e||v.defaults,this.options.renderer=this.options.renderer||new a,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new t}function t(){this.seen={}}function E(e,t){if(t){if(E.escapeTest.test(e))return e.replace(E.escapeReplace,function(e){return E.replacements[e]})}else if(E.escapeTestNoEncode.test(e))return e.replace(E.escapeReplaceNoEncode,function(e){return E.replacements[e]});return e}function h(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}function s(n,e){return n=n.source||n,e=e||"",{replace:function(e,t){return t=(t=t.source||t).replace(/(^|[^\[])\^/g,"$1"),n=n.replace(e,t),this},getRegex:function(){return new RegExp(n,e)}}}function r(e,t,n){if(e){try{var a=decodeURIComponent(h(n)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return null}if(0===a.indexOf("javascript:")||0===a.indexOf("vbscript:")||0===a.indexOf("data:"))return null}t&&!d.test(n)&&(n=function(e,t){l[" "+e]||(/^[^:]+:\/*[^/]*$/.test(e)?l[" "+e]=e+"/":l[" "+e]=C(e,"/",!0));return e=l[" "+e],"//"===t.slice(0,2)?e.replace(/:[\s\S]*/,":")+t:"/"===t.charAt(0)?e.replace(/(:\/*[^/]*)[\s\S]*/,"$1")+t:e+t}(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(e){return null}return n}n._punctuation="!\"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~",n.em=s(n.em).replace(/punctuation/g,n._punctuation).getRegex(),n._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,n._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,n._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,n.autolink=s(n.autolink).replace("scheme",n._scheme).replace("email",n._email).getRegex(),n._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,n.tag=s(n.tag).replace("comment",y._comment).replace("attribute",n._attribute).getRegex(),n._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,n._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,n._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,n.link=s(n.link).replace("label",n._label).replace("href",n._href).replace("title",n._title).getRegex(),n.reflink=s(n.reflink).replace("label",n._label).getRegex(),n.normal=f({},n),n.pedantic=f({},n.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:s(/^!?\[(label)\]\((.*?)\)/).replace("label",n._label).getRegex(),reflink:s(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",n._label).getRegex()}),n.gfm=f({},n.normal,{escape:s(n.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),n.gfm.url=s(n.gfm.url,"i").replace("email",n.gfm._extended_email).getRegex(),n.breaks=f({},n.gfm,{br:s(n.br).replace("{2,}","*").getRegex(),text:s(n.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),u.rules=n,u.output=function(e,t,n){return new u(t,n).output(e)},u.prototype.output=function(e){for(var t,n,a,i,s,r,l="";e;)if(s=this.rules.escape.exec(e))e=e.substring(s[0].length),l+=E(s[1]);else if(s=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(s[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(s[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(s[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(s[0])&&(this.inRawBlock=!1),e=e.substring(s[0].length),l+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):E(s[0]):s[0];else if(s=this.rules.link.exec(e)){var o=m(s[2],"()");if(-1<o){var c=4+s[1].length+o;s[2]=s[2].substring(0,o),s[0]=s[0].substring(0,c).trim(),s[3]=""}e=e.substring(s[0].length),this.inLink=!0,a=s[2],i=this.options.pedantic?(t=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(a))?(a=t[1],t[3]):"":s[3]?s[3].slice(1,-1):"",a=a.trim().replace(/^<([\s\S]*)>$/,"$1"),l+=this.outputLink(s,{href:u.escapes(a),title:u.escapes(i)}),this.inLink=!1}else if((s=this.rules.reflink.exec(e))||(s=this.rules.nolink.exec(e))){if(e=e.substring(s[0].length),t=(s[2]||s[1]).replace(/\s+/g," "),!(t=this.links[t.toLowerCase()])||!t.href){l+=s[0].charAt(0),e=s[0].substring(1)+e;continue}this.inLink=!0,l+=this.outputLink(s,t),this.inLink=!1}else if(s=this.rules.strong.exec(e))e=e.substring(s[0].length),l+=this.renderer.strong(this.output(s[4]||s[3]||s[2]||s[1]));else if(s=this.rules.em.exec(e))e=e.substring(s[0].length),l+=this.renderer.em(this.output(s[6]||s[5]||s[4]||s[3]||s[2]||s[1]));else if(s=this.rules.code.exec(e))e=e.substring(s[0].length),l+=this.renderer.codespan(E(s[2].trim(),!0));else if(s=this.rules.br.exec(e))e=e.substring(s[0].length),l+=this.renderer.br();else if(s=this.rules.del.exec(e))e=e.substring(s[0].length),l+=this.renderer.del(this.output(s[1]));else if(s=this.rules.autolink.exec(e))e=e.substring(s[0].length),a="@"===s[2]?"mailto:"+(n=E(this.mangle(s[1]))):n=E(s[1]),l+=this.renderer.link(a,null,n);else if(this.inLink||!(s=this.rules.url.exec(e))){if(s=this.rules.text.exec(e))e=e.substring(s[0].length),this.inRawBlock?l+=this.renderer.text(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):E(s[0]):s[0]):l+=this.renderer.text(E(this.smartypants(s[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else{if("@"===s[2])a="mailto:"+(n=E(s[0]));else{for(;r=s[0],s[0]=this.rules._backpedal.exec(s[0])[0],r!==s[0];);n=E(s[0]),a="www."===s[1]?"http://"+n:n}e=e.substring(s[0].length),l+=this.renderer.link(a,null,n)}return l},u.escapes=function(e){return e?e.replace(u.rules._escapes,"$1"):e},u.prototype.outputLink=function(e,t){var n=t.href,a=t.title?E(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,a,this.output(e[1])):this.renderer.image(n,a,E(e[1]))},u.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},u.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,n="",a=e.length,i=0;i<a;i++)t=e.charCodeAt(i),.5<Math.random()&&(t="x"+t.toString(16)),n+="&#"+t+";";return n},a.prototype.code=function(e,t,n){var a=(t||"").match(/\S*/)[0];if(this.options.highlight){var i=this.options.highlight(e,a);null!=i&&i!==e&&(n=!0,e=i)}return a?'<pre><code class="'+this.options.langPrefix+E(a,!0)+'">'+(n?e:E(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:E(e,!0))+"</code></pre>"},a.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},a.prototype.html=function(e){return e},a.prototype.heading=function(e,t,n,a){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+a.slug(n)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},a.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},a.prototype.list=function(e,t,n){var a=t?"ol":"ul";return"<"+a+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+a+">\n"},a.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},a.prototype.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},a.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},a.prototype.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n"+(t=t&&"<tbody>"+t+"</tbody>")+"</table>\n"},a.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},a.prototype.tablecell=function(e,t){var n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"},a.prototype.strong=function(e){return"<strong>"+e+"</strong>"},a.prototype.em=function(e){return"<em>"+e+"</em>"},a.prototype.codespan=function(e){return"<code>"+e+"</code>"},a.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},a.prototype.del=function(e){return"<del>"+e+"</del>"},a.prototype.link=function(e,t,n){if(null===(e=r(this.options.sanitize,this.options.baseUrl,e)))return n;var a='<a href="'+E(e)+'"';return t&&(a+=' title="'+t+'"'),a+=">"+n+"</a>"},a.prototype.image=function(e,t,n){if(null===(e=r(this.options.sanitize,this.options.baseUrl,e)))return n;var a='<img src="'+e+'" alt="'+n+'"';return t&&(a+=' title="'+t+'"'),a+=this.options.xhtml?"/>":">"},a.prototype.text=function(e){return e},i.prototype.strong=i.prototype.em=i.prototype.codespan=i.prototype.del=i.prototype.text=function(e){return e},i.prototype.link=i.prototype.image=function(e,t,n){return""+n},i.prototype.br=function(){return""},c.parse=function(e,t){return new c(t).parse(e)},c.prototype.parse=function(e){this.inline=new u(e.links,this.options),this.inlineText=new u(e.links,f({},this.options,{renderer:new i})),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},c.prototype.next=function(){return this.token=this.tokens.pop(),this.token},c.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},c.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},c.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,h(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,n,a,i="",s="";for(n="",e=0;e<this.token.header.length;e++)n+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(i+=this.renderer.tablerow(n),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],n="",a=0;a<t.length;a++)n+=this.renderer.tablecell(this.inline.output(t[a]),{header:!1,align:this.token.align[a]});s+=this.renderer.tablerow(n)}return this.renderer.table(i,s);case"blockquote_start":for(s="";"blockquote_end"!==this.next().type;)s+=this.tok();return this.renderer.blockquote(s);case"list_start":s="";for(var r=this.token.ordered,l=this.token.start;"list_end"!==this.next().type;)s+=this.tok();return this.renderer.list(s,r,l);case"list_item_start":s="";var o=this.token.loose,c=this.token.checked,u=this.token.task;for(this.token.task&&(s+=this.renderer.checkbox(c));"list_item_end"!==this.next().type;)s+=o||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(s,u,c);case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:var d='Token with "'+this.token.type+'" type was not found.';if(!this.options.silent)throw new Error(d);console.log(d)}},t.prototype.slug=function(e){var t=e.toLowerCase().trim().replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(t))for(var n=t;this.seen[n]++,t=n+"-"+this.seen[n],this.seen.hasOwnProperty(t););return this.seen[t]=0,t},E.escapeTest=/[&<>"']/,E.escapeReplace=/[&<>"']/g,E.replacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},E.escapeTestNoEncode=/[<>"']|&(?!#?\w+;)/,E.escapeReplaceNoEncode=/[<>"']|&(?!#?\w+;)/g;var l={},d=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function p(){}function f(e){for(var t,n,a=1;a<arguments.length;a++)for(n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function T(e,t){var n=e.replace(/\|/g,function(e,t,n){for(var a=!1,i=t;0<=--i&&"\\"===n[i];)a=!a;return a?"|":" |"}).split(/ \|/),a=0;if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;a<n.length;a++)n[a]=n[a].trim().replace(/\\\|/g,"|");return n}function C(e,t,n){if(0===e.length)return"";for(var a=0;a<e.length;){var i=e.charAt(e.length-a-1);if(i!==t||n){if(i===t||!n)break;a++}else a++}return e.substr(0,e.length-a)}function m(e,t){if(-1===e.indexOf(t[1]))return-1;for(var n=0,a=0;a<e.length;a++)if("\\"===e[a])a++;else if(e[a]===t[0])n++;else if(e[a]===t[1]&&--n<0)return a;return-1}function g(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function v(e,n,a){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(a||"function"==typeof n){a||(a=n,n=null),g(n=f({},v.defaults,n||{}));var i,s,r=n.highlight,t=0;try{i=o.lex(e,n)}catch(e){return a(e)}s=i.length;var l=function(t){if(t)return n.highlight=r,a(t);var e;try{e=c.parse(i,n)}catch(e){t=e}return n.highlight=r,t?a(t):a(null,e)};if(!r||r.length<3)return l();if(delete n.highlight,!s)return l();for(;t<i.length;t++)!function(n){"code"!==n.type?--s||l():r(n.text,n.lang,function(e,t){return e?l(e):null==t||t===n.text?--s||l():(n.text=t,n.escaped=!0,void(--s||l()))})}(i[t])}else try{return g(n=n&&f({},v.defaults,n)),c.parse(o.lex(e,n),n)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",(n||v.defaults).silent)return"<p>An error occurred:</p><pre>"+E(e.message+"",!0)+"</pre>";throw e}}p.exec=p,v.options=v.setOptions=function(e){return f(v.defaults,e),v},v.getDefaults=function(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:new a,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1}},v.defaults=v.getDefaults(),v.Parser=c,v.parser=c.parse,v.Renderer=a,v.TextRenderer=i,v.Lexer=o,v.lexer=o.lex,v.InlineLexer=u,v.inlineLexer=u.output,v.Slugger=t,v.parse=v,void 0!==k&&"object"==typeof b?k.exports=v:"function"==typeof define&&define.amd?define(function(){return v}):e.marked=v}(this||("undefined"!=typeof window?window:e))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],10:[function(e,t,n){t.exports=function(a){return a=a||Object.create(null),{on:function(e,t){(a[e]||(a[e]=[])).push(t)},off:function(e,t){a[e]&&a[e].splice(a[e].indexOf(t)>>>0,1)},emit:function(t,n){(a[t]||[]).slice().map(function(e){e(n)}),(a["*"]||[]).slice().map(function(e){e(t,n)})}}}},{}],11:[function(e,t,n){var a,i,s=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}function o(t){if(a===setTimeout)return setTimeout(t,0);if((a===r||!a)&&setTimeout)return a=setTimeout,setTimeout(t,0);try{return a(t,0)}catch(e){try{return a.call(null,t,0)}catch(e){return a.call(this,t,0)}}}!function(){try{a="function"==typeof setTimeout?setTimeout:r}catch(e){a=r}try{i="function"==typeof clearTimeout?clearTimeout:l}catch(e){i=l}}();var c,u=[],d=!1,h=-1;function p(){d&&c&&(d=!1,c.length?u=c.concat(u):h=-1,u.length&&f())}function f(){if(!d){var e=o(p);d=!0;for(var t=u.length;t;){for(c=u,u=[];++h<t;)c&&c[h].run();h=-1,t=u.length}c=null,d=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===l||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function g(){}s.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new m(e,t)),1!==u.length||d||o(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=g,s.addListener=g,s.once=g,s.off=g,s.removeListener=g,s.removeAllListeners=g,s.emit=g,s.prependListener=g,s.prependOnceListener=g,s.listeners=function(e){return[]},s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],12:[function(e,n,t){(function(t){var e;e="function"==typeof t?function(e){t(e)}:function(e){setTimeout(e,0)},n.exports=e}).call(this,e("timers").setImmediate)},{timers:13}],13:[function(o,e,c){(function(e,t){var a=o("process/browser.js").nextTick,n=Function.prototype.apply,i=Array.prototype.slice,s={},r=0;function l(e,t){this._id=e,this._clearFn=t}c.setTimeout=function(){return new l(n.call(setTimeout,window,arguments),clearTimeout)},c.setInterval=function(){return new l(n.call(setInterval,window,arguments),clearInterval)},c.clearTimeout=c.clearInterval=function(e){e.close()},l.prototype.unref=l.prototype.ref=function(){},l.prototype.close=function(){this._clearFn.call(window,this._id)},c.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},c.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},c._unrefActive=c.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},c.setImmediate="function"==typeof e?e:function(e){var t=r++,n=!(arguments.length<2)&&i.call(arguments,1);return s[t]=!0,a(function(){s[t]&&(n?e.apply(null,n):e.call(null),c.clearImmediate(t))}),t},c.clearImmediate="function"==typeof t?t:function(e){delete s[e]}}).call(this,o("timers").setImmediate,o("timers").clearImmediate)},{"process/browser.js":11,timers:13}],14:[function(e,t,n){"use strict";var a,i=e("./plan.config"),s=(a=e("./plan"))&&a.__esModule?a:{default:a};var r=localStorage.getItem("plan.template"),l=localStorage.getItem("plan.theme"),o=localStorage.getItem("plan.cache"),c=localStorage.getItem("plan.plans"),u=r?parseInt(r,10):0,d=l?parseInt(l,10):0,h=o?parseInt(o,10):0,p=c?JSON.parse(c):i.TEMPLATES[u].plans;new s.default({template:u,theme:d,cache:h,plans:p})},{"./plan":22,"./plan.config":20}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var D=e("./utils"),w=e("./time"),M=e("./dom"),u=e("./delegate");function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var i=function(){function c(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),this.attributes={parent:"",time:"",viewMode:0,pickMode:"single",hasSwitcher:!0,hasFooter:!0,hasClock:!0,onDatePick:null,onMonthPick:null,onYearPick:null,onTodayPick:null,MONTHS:[],DAYS:[],DATES:[],STYLES:{}},this.elements={parent:null,wrap:null,header:null,title:null,switcher:null,prev:null,next:null,body:null,week:null,dates:null,months:null,years:null,footer:null,today:null,time:null},this.data={minYear:0,maxYear:0,year:0,month:0,date:{year:0,month:0,date:0,day:0,text:"",fullText:""},picked:[]},this.initialize(e).render().addEventListeners(),this}return function(e,t,n){t&&a(e.prototype,t),n&&a(e,n)}(c,[{key:"initialize",value:function(e){var t,n,a,i,s,r,l,o=(0,w.getYear)().value;switch(this.set(c.defaults).set(e),n=this.get("time"),t=this.get("pickMode"),i=(a=(0,w.getMonth)(n)).text,this.setYear(n).setMonth(n).setDate(n)._setYears(n),t){case"multiple":this.data.picked.push(this.getDate().text);break;case"range":r=i+"-1",l=i+"-"+this.get("DATES")[a.value-1],this.data.picked=[r,l];break;case"week":r=(s=(0,w.getWeekRanges)(n))[0],l=s[s.length-1],this.data.picked=[r,l]}return this.data.minYear=o-100,this.data.maxYear=o+100,this._createElements(),this}},{key:"render",value:function(){var e=this.getEls(),t=e.wrap,n=e.header,a=e.switcher,i=e.body,s=e.footer,r=document.createDocumentFragment();return this._renderTitle(),n.appendChild(e.title),this.get("hasSwitcher")&&(a.appendChild(e.prev),a.appendChild(e.next),n.appendChild(a)),this._renderDays(),i.appendChild(e.week),this._renderDates(),i.appendChild(e.dates),this._renderMonths(),i.appendChild(e.months),this._renderYears(),i.appendChild(e.years),this.get("hasFooter")&&(this._renderFooter(),s.appendChild(e.today),this.get("hasClock")&&s.appendChild(e.time)),t.appendChild(n),t.appendChild(i),this.get("hasFooter")&&t.appendChild(s),r.appendChild(t),e.parent.appendChild(r),this}},{key:"addEventListeners",value:function(){var e=this.get("STYLES"),t="click",n="."+e.TITLE,a="."+e.PREV,i="."+e.NEXT,s="."+e.DATE,r="."+e.MONTH,l="."+e.YEAR,o="."+e.TODAY,c=this.getEls().wrap;return(0,u.on)(c,n,t,this._titleClick,this),this.get("hasSwitcher")&&((0,u.on)(c,a,t,this._prevClick,this),(0,u.on)(c,i,t,this._nextClick,this)),(0,u.on)(c,s,t,this._dateClick,this),(0,u.on)(c,r,t,this._monthClick,this),(0,u.on)(c,l,t,this._yearClick,this),this.get("hasClock")&&(0,u.on)(c,o,t,this._todayClick,this),this}},{key:"reload",value:function(e){return this.destroy().initialize(e).render().addEventListeners(),this}},{key:"destroy",value:function(){return this.removeEventListeners().hide().remove().reset(),this}},{key:"removeEventListeners",value:function(){var e="click",t=this.getEls().wrap;return(0,u.off)(t,e,this._titleClick),this.get("hasSwitcher")&&((0,u.off)(t,e,this._prevClick),(0,u.off)(t,e,this._nextClick)),(0,u.off)(t,e,this._dateClick),(0,u.off)(t,e,this._monthClick),(0,u.off)(t,e,this._yearClick),this.get("hasClock")&&(0,u.off)(t,e,this._todayClick),this}},{key:"remove",value:function(){var e=this.getEls();return e.parent.removeChild(e.wrap),this}},{key:"reset",value:function(){return this.attributes={parent:"",time:"",viewMode:0,pickMode:"single",hasSwitcher:!0,hasFooter:!0,hasClock:!0,MONTHS:[],DAYS:[],DATES:[],STYLES:{}},this.elements={parent:null,wrap:null,header:null,title:null,switcher:null,prev:null,next:null,body:null,week:null,dates:null,months:null,years:null,footer:null,today:null,time:null,year:null,month:null,date:null},this.data={minYear:0,maxYear:0,years:{start:0,end:0},year:0,month:0,date:{year:0,month:0,date:0,day:0,text:"",fullText:""},picked:[]},this}},{key:"get",value:function(e){return this.attributes[e]}},{key:"set",value:function(e){var t=0<arguments.length&&void 0!==e?e:{};return(0,D.assign)(this.attributes,t),this}},{key:"getEls",value:function(){return this.elements}},{key:"getYear",value:function(){return this.data.year}},{key:"setYear",value:function(e){return this.data.year=(0,w.getYear)(e).value,this}},{key:"getMonth",value:function(){return this.data.month}},{key:"setMonth",value:function(e){return this.data.month=(0,w.getMonth)(e).value,this}},{key:"getDate",value:function(){return this.data.date}},{key:"setDate",value:function(e){return this.data.date=(0,w.getDate)(e),this}},{key:"getYears",value:function(){return this.data.years}},{key:"getPicked",value:function(){return this.data.picked}},{key:"update",value:function(e){var t=0<arguments.length&&void 0!==e?e:0;return this.updateViewMode(t).updateView(),this}},{key:"updateViewMode",value:function(e){var t=0<arguments.length&&void 0!==e?e:0;return 2<t?t=2:t<0&&(t=0),this.set({viewMode:t}),this}},{key:"updateView",value:function(){var e=this.get("STYLES").HIDDEN,t=this.getEls(),n=t.week,a=t.dates,i=t.months,s=t.years;switch(this._renderTitle(),this.get("viewMode")){case 0:(0,M.addClass)(i,e),(0,M.addClass)(s,e),(0,M.removeClass)(n,e),(0,M.removeClass)(a,e),this._repaintDates();break;case 1:(0,M.addClass)(n,e),(0,M.addClass)(a,e),(0,M.addClass)(s,e),(0,M.removeClass)(i,e),this._repaintMonths();break;case 2:(0,M.addClass)(n,e),(0,M.addClass)(a,e),(0,M.addClass)(i,e),(0,M.removeClass)(s,e),this._repaintYears()}return this}},{key:"prev",value:function(){var e,t=this.getYears().start,n=this.getYear(),a=this.getMonth(),i=this.data.minYear;switch(this.get("viewMode")){case 0:(a-=1)<1&&(a=12,(n-=1)<i&&(n=i)),e=n+"-"+a+"-1",this.setYear(e).setMonth(e);break;case 1:(n-=1)<i&&(n=i),e=n+"-1-1",this.setYear(e);break;case 2:(t-=10)<i&&(t=i+9),this._setYears(t.toString())}return this.updateView(),this}},{key:"next",value:function(){var e,t=this.getYears().start,n=this.getYear(),a=this.getMonth(),i=this.data.maxYear;switch(this.get("viewMode")){case 0:12<(a+=1)&&i<(n+=a=1)&&(n=i),e=n+"-"+a+"-1",this.setYear(e).setMonth(e);break;case 1:i<(n+=1)&&(n=i),e=n+"-1-1",this.setYear(e);break;case 2:i<(t+=10)&&(t=i-9),this._setYears(t.toString())}return this.updateView(),this}},{key:"pickDate",value:function(e){var t,n=this.get("STYLES").PICKED,a=this.get("pickMode"),i=this.getEls(),s=e.getAttribute("data-date"),r=this.get("onDatePick");if((0,M.hasClass)(e,n))switch(a){case"single":this._pickSingle(e);break;case"week":this._pickWeek(e);break;case"multiple":(0,M.removeClass)(e,n),this._removePicked(s),t=this.getPicked(),this.setDate(t[t.length-1]),(0,D.isFunction)(r)&&r(t,e,this);break;case"range":this.data.picked=[],this.data.picked.push(s),this.setDate(s),i.date=e,this._updateDateRanges(),(0,D.isFunction)(r)&&r(this.getPicked(),e,this)}else switch(this.setYear(s).setMonth(s),a){case"single":this._pickSingle(e);break;case"multiple":this.data.picked.push(s),this.data.picked.sort(),t=this.getPicked(),this.setDate(t[t.length-1]),(0,M.addClass)(e,n),(0,D.isFunction)(r)&&r(this.getPicked(),e,this);break;case"range":switch(this.data.picked.length){case 0:case 1:this.data.picked.push(s),2===this.data.picked.length&&this.data.picked.sort(),t=this.getPicked(),this.setDate(t[t.length-1]),i.date=e,this._updateDateRanges(),(0,D.isFunction)(r)&&r(t,e,this);break;case 2:this.data.picked=[],this.data.picked.push(s),i.date=e,this._updateDateRanges()}break;case"week":this._pickWeek(e)}return this}},{key:"pickMonth",value:function(e){var t=this.get("STYLES").PICKED,n=this.getEls(),a=n.month,i=e.getAttribute("data-month"),s=this.get("onMonthPick");return(0,M.hasClass)(e,t)?this.update():(a&&(0,M.removeClass)(a,t),(0,M.addClass)(e,t),n.month=e,this.setYear(i).setMonth(i)._setYears(i).update()),(0,D.isFunction)(s)&&s(i,e,this),this}},{key:"pickYear",value:function(e){var t=this.get("STYLES").PICKED,n=this.getEls(),a=n.year,i=e.getAttribute("data-year"),s=this.get("onYearPick");return(0,M.hasClass)(e,t)?this.setYear(i).update(1):(a&&(0,M.removeClass)(a,t),(0,M.addClass)(e,t),n.year=e,this.setYear(i)._setYears(i).update(1)),(0,D.isFunction)(s)&&s(i,e,this),this}},{key:"pickToday",value:function(){var e=(0,w.getToday)().value,t=this.get("onTodayPick");return this.setYear(e).setMonth(e).setDate(e)._setYears(e).update(),(0,D.isFunction)(t)&&t(e,this.getEls().dates.querySelector("[data-date="+e+"]"),this),this}},{key:"hide",value:function(){var e=this.get("STYLES").HIDDEN,t=this.getEls().wrap;return(0,M.addClass)(t,e),this}},{key:"show",value:function(){var e=this.get("STYLES").HIDDEN,t=this.getEls().wrap;return(0,M.removeClass)(t,e),this}},{key:"toggle",value:function(){var e=this.get("STYLES").HIDDEN,t=this.getEls().wrap;return(0,M.hasClass)(t,e)?this.show():this.hide(),this}},{key:"_setYears",value:function(e){return this.data.years=(0,w.getYears)(e),this}},{key:"_pickSingle",value:function(e){var t=this.get("STYLES").PICKED,n=this.getEls(),a=e.getAttribute("data-date"),i=this.get("onDatePick"),s=n.date;return s&&(0,M.removeClass)(s,t),(0,M.addClass)(e,t),n.date=e,this.setDate(a),(0,D.isFunction)(i)&&i(a,e,this),this}},{key:"_pickWeek",value:function(e){var t=this.getEls(),n=e.getAttribute("data-date"),a=this.get("onDatePick"),i=(0,w.getWeekRanges)(n);return this.data.picked=[i[0],i[i.length-1]],this.setDate(i[i.length-1]),t.date=e,this._updateWeekRanges(),(0,D.isFunction)(a)&&a(this.getPicked(),e,this),this}},{key:"_removePicked",value:function(e){var t=this.getPicked(),n=t.indexOf(e);return-1<n&&t.splice(n,1),this}},{key:"_createElements",value:function(){var e=this.get("STYLES"),t=e.WRAP,n=e.WRAP_WITHOUT_FOOTER,a=e.HEADER,i=e.TITLE,s=e.SWITCHER,r=e.PREV,l=e.ICON_PREV,o=e.NEXT,c=e.ICON_NEXT,u=e.BODY,d=e.WEEK,h=e.DATES,p=e.MONTHS,f=e.YEARS,m=e.FOOTER,g=e.FOOTER_DATE,v=e.TODAY,k=e.FOOTER_TIME,y=e.TIME,E=e.TEXT,T=e.HIDDEN,C=" ",b=this.get("hasFooter"),_=this.getEls(),S=t,x=d,w=h,N=p,P=f;switch(this.get("viewMode")){case 0:N+=C+T,P+=C+T;break;case 1:x+=C+T,w+=C+T,P+=C+T;break;case 2:x+=C+T,w+=C+T,N+=C+T}return b||(S+=C+n),_.parent=document.getElementById(this.get("parent")),_.wrap=(0,M.createElement)("div",{id:(0,D.guid)(4,10),className:S}),_.header=(0,M.createElement)("div",{className:a}),_.title=(0,M.createElement)("h4",{className:i},[(0,M.createElement)("span",{className:E})]),this.get("hasSwitcher")&&(_.switcher=(0,M.createElement)("div",{className:s}),_.prev=(0,M.createElement)("div",{className:r},[(0,M.createElement)("span",{className:E},[(0,M.createElement)("i",{className:l})])]),_.next=(0,M.createElement)("div",{className:o},[(0,M.createElement)("span",{className:E},[(0,M.createElement)("i",{className:c})])])),_.body=(0,M.createElement)("div",{className:u}),_.week=(0,M.createElement)("div",{className:x}),_.dates=(0,M.createElement)("div",{className:w}),_.months=(0,M.createElement)("div",{className:N}),_.years=(0,M.createElement)("div",{className:P}),b&&(_.footer=(0,M.createElement)("div",{className:m}),_.today=(0,M.createElement)("div",{className:g},[(0,M.createElement)("p",{className:v},[(0,M.createElement)("span",{className:E})])]),this.get("hasClock")&&(_.time=(0,M.createElement)("div",{className:k},[(0,M.createElement)("p",{className:y},[(0,M.createElement)("span",{className:E})])]))),this}},{key:"_renderTitle",value:function(){var e=this.getEls().title.querySelector("."+this.get("STYLES").TEXT),t=this.getYears(),n=this.getYear(),a="";switch(this.get("viewMode")){case 0:a=n+"年"+this.getMonth()+"月";break;case 1:a=(0,w.getYear)(n.toString()).text;break;case 2:a=t.start+" - "+t.end}return e.innerHTML=a,this}},{key:"_renderDays",value:function(){var e=this.get("STYLES"),a=e.DAY,i=e.WEEKEND,s=e.TEXT,r=this.get("DAYS"),l=document.createDocumentFragment();return r.forEach(function(e,t){var n=0===t||t===r.length-1?a+" "+i:a;l.appendChild((0,M.createElement)("div",{className:n},[(0,M.createElement)("span",{className:s},[e])]))}),this.getEls().week.appendChild(l),this}},{key:"_renderDates",value:function(){var e,t=this.get("DATES"),n=document.createDocumentFragment(),a=this.getYear(),i=this.getMonth(),s=t[i-1],r=(0,w.getDay)(a+"-"+i+"-1").value,l=i-2<0?a-1:a,o=i-2<0?12:i-1,c=t[o-1],u=12===i?a+1:a,d=12===i?1:i+1;return(0,w.isLeapYear)(a)&&2==o?c+=1:(0,w.isLeapYear)(a)&&2===i&&(s+=1),e=42-(r+s),0!==r&&n.appendChild(this._getDatesFragment({year:l,month:o,start:c-(r-1),end:c,isPrev:!0,isNext:!1})),n.appendChild(this._getDatesFragment({year:a,month:i,start:1,end:s,isPrev:!1,isNext:!1})),0<e&&n.appendChild(this._getDatesFragment({year:u,month:d,start:1,end:e,isPrev:!1,isNext:!0})),this.getEls().dates.appendChild(n),this}},{key:"_repaintDates",value:function(){var e=this.get("STYLES").HIDDEN,t=this.getEls().dates;return(0,M.addClass)(t,e),t.innerHTML="",(0,M.removeClass)(t,e),this._renderDates(),this}},{key:"_getDatesFragment",value:function(e){for(var o=this,c=e.year,u=e.month,t=e.start,n=e.end,d=e.isPrev,h=e.isNext,p=" ",a=this.get("STYLES"),f=a.DATE,m=a.DATE_PREV,g=a.DATE_NEXT,v=a.CURRENT,k=a.PICKED,y=a.PICKED_RANGE,E=a.WEEKEND,T=a.TEXT,C=document.createDocumentFragment(),b=this.getEls(),_=t,S=this.get("pickMode"),x=this.getPicked(),i=function(){var n=c+"-"+u+"-"+_,e=(0,w.isToday)(n),t=(0,w.getDay)(n),a=[(0,M.createElement)("span",{className:T},[_])],i="",s=void 0;switch(s=(0,M.createElement)("div",{"data-date":n},a),i+=f,d?i+=p+m:h&&(i+=p+g),e&&(i+=p+v),0!==t.value&&6!==t.value||(i+=p+E),S){case"single":var r=o.getDate().text;(0,w.isDatesEqual)(n,r)&&(i+=p+k,b.date=s);break;case"multiple":x.forEach(function(e){(0,w.isDatesEqual)(n,e)&&(i+=p+k)});break;case"range":case"week":var l=[];2===x.length?(l=(0,w.getRanges)(x[0],x[1])).forEach(function(e,t){if(!(0,w.isDatesEqual)(n,e))return!1;0!==t&&t!==l.length-1?(i+=p+k,i+=p+y):0!==t&&t!==l.length-1||(i+=p+k)}):1===x.length&&(i+=p+k)}s.className=i,C.appendChild(s)};_<=n;_+=1)i();return C}},{key:"_updateDateRanges",value:function(){var e=this.get("STYLES"),a=e.PICKED,i=e.PICKED_RANGE,t=this.getEls(),n=this.elements.date,s=t.dates,r=s.querySelectorAll("."+a);switch(this.data.picked.length){case 1:r.forEach(function(e){(0,M.removeClass)(e,a),(0,M.hasClass)(e,i)&&(0,M.removeClass)(e,i)}),(0,M.addClass)(n,a);break;case 2:var l=(0,w.getRanges)(this.data.picked[0],this.data.picked[1]);l.forEach(function(e,t){var n=s.querySelector('[data-date="'+e+'"]');0<t&&t<l.length-1&&((0,M.addClass)(n,a),(0,M.addClass)(n,i))}),(0,M.addClass)(n,a)}return this}},{key:"_updateWeekRanges",value:function(){var e=this.get("STYLES"),a=e.PICKED,i=e.PICKED_RANGE,s=this.getEls().dates,t=s.querySelectorAll("."+a),n=this.getPicked(),r=(0,w.getWeekRanges)(n[0]);return t.forEach(function(e){(0,M.removeClass)(e,i),(0,M.removeClass)(e,a)}),r.forEach(function(e,t){var n=s.querySelector('[data-date="'+e+'"]');0<t&&t<r.length-1?((0,M.addClass)(n,a),(0,M.addClass)(n,i)):0!==t&&t!==r.length-1||(0,M.addClass)(n,a)}),this}},{key:"_renderMonths",value:function(){var s=this,e=this.get("STYLES"),r=e.CURRENT,l=e.PICKED,o=e.MONTH,c=e.MONTH_PREV,u=e.MONTH_NEXT,d=e.TEXT,t=this.get("MONTHS"),h=document.createDocumentFragment(),n=this.getEls(),p=this.getYear(),f=(0,w.getToday)();return t.forEach(function(e,t){var n,a=s.getDate(),i=o;t<2?(i+=" "+c,p-1===a.year&&e===a.month&&(i+=" "+l),n=(0,M.createElement)("div",{className:i,"data-month":p-1+"-"+e+"-1"},[(0,M.createElement)("span",{className:d},[e])])):2<=t&&t<=13?(p===f.year&&e===f.month&&(i+=" "+r),p===a.year&&e===a.month&&(i+=" "+l),n=(0,M.createElement)("div",{className:i,"data-month":p+"-"+e+"-1"},[(0,M.createElement)("span",{className:d},[e])])):13<t&&t<=15&&(i+=" "+u,p+1===a.year&&e===a.month&&(i+=" "+l),n=(0,M.createElement)("div",{className:i,"data-month":p+1+"-"+e+"-1"},[(0,M.createElement)("span",{className:d},[e])])),h.appendChild(n)}),n.months.appendChild(h),this}},{key:"_repaintMonths",value:function(){var e=this.get("STYLES").HIDDEN,t=this.getEls().months;return(0,M.addClass)(t,e),t.innerHTML="",(0,M.removeClass)(t,e),this._renderMonths(),this}},{key:"_renderYears",value:function(){var e=this.getYears(),t=e.start,n=e.end,a=t-3,i=t-1,s=n+1,r=n+3,l=document.createDocumentFragment();return l.appendChild(this._getYearsFragment({start:a,end:i,isPrev:!0,isNext:!1})),l.appendChild(this._getYearsFragment({start:t,end:n,isPrev:!1,isNext:!1})),l.appendChild(this._getYearsFragment({start:s,end:r,isPrev:!1,isNext:!0})),this.getEls().years.appendChild(l),this}},{key:"_repaintYears",value:function(){var e=this.get("STYLES").HIDDEN,t=this.getEls().years;return(0,M.addClass)(t,e),t.innerHTML="",(0,M.removeClass)(t,e),this._renderYears(),this}},{key:"_getYearsFragment",value:function(e){for(var t=e.start,n=e.end,a=e.isPrev,i=e.isNext,s=this.get("STYLES"),r=s.YEAR,l=s.YEAR_PREV,o=s.YEAR_NEXT,c=s.CURRENT,u=s.PICKED,d=s.DISABLED,h=s.TEXT,p=document.createDocumentFragment(),f=this.getEls(),m=this.data.minYear,g=this.data.maxYear,v=t;v<=n;v+=1){var k=this.getDate(),y=v===(0,w.getToday)().year,E=v===k.year,T=r,C=(0,M.createElement)("div",{"data-year":v+"-1-1"},[(0,M.createElement)("span",{className:h},[v])]);a?T+=" "+l:i&&(T+=" "+o),y&&(T+=" "+c),E&&(T+=" "+u,f.year=C),(v<m||g<v)&&(T+=" "+d),C.className=T,p.appendChild(C)}return p}},{key:"_renderFooter",value:function(){var r=this.get("STYLES").TEXT,l=this.getEls(),e=l.today.querySelector("."+r),t=(0,w.getToday)(),o=null;return e.innerHTML="今天："+t.text,e.setAttribute("data-date",t.value),this.get("hasClock")&&function e(){var t=l.time.querySelector("."+r),n=new Date,a=n.getHours(),i=n.getMinutes(),s=n.getSeconds();o&&clearTimeout(o),a<10&&(a="0"+a),i<10&&(i="0"+i),s<10&&(s="0"+s),t.innerHTML=a+":"+i+":"+s,o=setTimeout(e,1e3)}(),this}},{key:"_titleClick",value:function(){var e=this.get("viewMode");return 2<(e+=1)&&(e=2),this.update(e),this}},{key:"_prevClick",value:function(){return this.prev(),this}},{key:"_nextClick",value:function(){return this.next(),this}},{key:"_dateClick",value:function(e){return this.pickDate(e.delegateTarget),this}},{key:"_monthClick",value:function(e){return this.pickMonth(e.delegateTarget),this}},{key:"_yearClick",value:function(e){return this.pickYear(e.delegateTarget),this}},{key:"_todayClick",value:function(){var e=this.getEls(),t=(0,w.getToday)().text;return this.pickToday(),this.pickDate(e.dates.querySelector('[data-date="'+t+'"]')),this}}]),c}();i.defaults={parent:"calendar",time:(0,w.getDate)().text,viewMode:0,pickMode:"single",hasSwitcher:!0,hasFooter:!0,hasClock:!0,onDatePick:null,onMonthPick:null,onYearPick:null,onTodayPick:null,MONTHS:[11,12,1,2,3,4,5,6,7,8,9,10,11,12,1,2],DAYS:["日","一","二","三","四","五","六"],DATES:[31,28,31,30,31,30,31,31,30,31,30,31],STYLES:{WRAP:"cal-md",WRAP_WITHOUT_FOOTER:"cal-md-without-footer",HEADER:"cal-hd",TITLE:"cal-title",SWITCHER:"cal-switcher",PREV:"cal-prev",ICON_PREV:"icon-cheveron-up",NEXT:"cal-next",ICON_NEXT:"icon-cheveron-down",BODY:"cal-bd",WEEK:"cal-week",WEEKEND:"cal-weekend",DAY:"cal-day",DATES:"cal-dates",DATE:"cal-date",DATE_PREV:"cal-date-prev",DATE_NEXT:"cal-date-next",MONTHS:"cal-months",MONTH:"cal-month",MONTH_PREV:"cal-month-prev",MONTH_NEXT:"cal-month-next",YEARS:"cal-years",YEAR:"cal-year",YEAR_PREV:"cal-year-prev",YEAR_NEXT:"cal-year-next",FOOTER:"cal-ft",FOOTER_DATE:"cal-ft-date",TODAY:"cal-today",FOOTER_TIME:"cal-ft-time",TIME:"cal-time",TEXT:"cal-text",CURRENT:"cal-current",PICKED:"cal-picked",PICKED_RANGE:"cal-picked-range",PICKED_POINT:"cal-picked-point",DISABLED:"cal-disabled",HIDDEN:"cal-hidden"}};var s=i;n.default=s},{"./delegate":17,"./dom":18,"./time":31,"./utils":32}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("./utils"),l=e("./dom"),a=e("./delegate");function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var s=function(){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.attributes={title:"",message:"",cancelText:"",enterText:"",afterClose:null,afterCancel:null,afterEnter:null},this.elements={wrap:null,modal:null,header:null,body:null,title:null,message:null,footer:null,cancel:null,enter:null,overlay:null},this.data={title:"",message:""},this.initialize(e).render().addEventListeners(),this}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(t,[{key:"initialize",value:function(e){return this.set(e).setTitle(this.get("title")).setMessage(this.get("message"))._createElements(),this}},{key:"render",value:function(){var e=this.getEls().wrap;return document.body.appendChild(e),this}},{key:"addEventListeners",value:function(){var e=this.getEls().wrap;return(0,a.on)(e,".confirm-overlay","click",this._onOverlayClick,this),(0,a.on)(e,".confirm-cancel","click",this._onCancelClick,this),(0,a.on)(e,".confirm-enter","click",this._onEnterClick,this),this}},{key:"removeEventListeners",value:function(){var e=this.getEls().wrap;return(0,a.off)(e,"click",this._onOverlayClick),(0,a.off)(e,"click",this._onCancelClick),(0,a.off)(e,"click",this._onEnterClick),this}},{key:"reload",value:function(e){return this.destroy().initialize(e).render().addEventListeners(),this}},{key:"destroy",value:function(){return this.removeEventListeners().remove().reset(),this}},{key:"remove",value:function(){var e=this.getEls().wrap;return document.body.removeChild(e),this}},{key:"reset",value:function(){return this.attributes={title:"",message:"",cancelText:"取消",enterText:"确认",afterClose:null,afterCancel:null,afterEnter:null},this.elements={wrap:null,modal:null,header:null,body:null,title:null,message:null,footer:null,cancel:null,enter:null,overlay:null},this.data={title:"",message:""},this}},{key:"get",value:function(e){return this.attributes[e]}},{key:"set",value:function(e){return(0,r.assign)(this.attributes,e),this}},{key:"getEls",value:function(){return this.elements}},{key:"getTitle",value:function(){return this.data.title}},{key:"setTitle",value:function(e){return this.data.title=(0,r.toSafeText)(e),this}},{key:"getMessage",value:function(){return this.data.message}},{key:"setMessage",value:function(e){return this.data.message=(0,r.toSafeText)(e),this}},{key:"open",value:function(){var e=this.getEls().wrap;return(0,l.removeClass)(e,"hidden"),this}},{key:"close",value:function(){var e=this.getEls().wrap,t=this.get("afterClose");return(0,l.addClass)(e,"hidden"),(0,r.isFunction)(t)&&t(),this}},{key:"_createElements",value:function(){var e=r.toSafeText,t=this.getEls(),n=this.getTitle(),a=this.getMessage(),i=e(this.get("cancelText")),s=e(this.get("enterText"));return t.header=(0,l.createElement)("div",{className:"confirm-hd"}),t.title=(0,l.createElement)("h2",{className:"confirm-title"},[(0,r.toSafeText)(n)]),t.message=(0,l.createElement)("p",{className:"confirm-message"},[(0,r.toSafeText)(a)]),t.body=(0,l.createElement)("div",{className:"confirm-bd"},[t.title,t.message]),t.cancel=(0,l.createElement)("div",{className:"confirm-button confirm-cancel"},[i]),t.enter=(0,l.createElement)("div",{className:"confirm-button confirm-enter"},[s]),t.footer=(0,l.createElement)("div",{className:"confirm-ft"},[t.cancel,t.enter]),t.modal=(0,l.createElement)("div",{className:"confirm-modal"},[t.header,t.body,t.footer]),t.overlay=(0,l.createElement)("div",{className:"confirm-overlay"}),t.wrap=(0,l.createElement)("div",{className:"confirm hidden"},[t.modal,t.overlay]),this}},{key:"_onOverlayClick",value:function(){return this.close(),this}},{key:"_onCancelClick",value:function(){var e=this.get("afterCancel");return this.close(),(0,r.isFunction)(e)&&e(),this}},{key:"_onEnterClick",value:function(){var e=this.get("afterEnter");return this.close(),(0,r.isFunction)(e)&&e(),this}}]),t}();n.default=s},{"./delegate":17,"./dom":18,"./utils":32}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.getDelegateTarget=n.preventDefault=n.stopPropagation=n.stop=n.off=n.once=n.on=void 0;function r(a,i,s,r,l,e,o){return"mouseenter"!==s&&"mouseleave"!==s||(e=!0),r._delegateWrapper=r,a.addEventListener(s,function e(t){var n=u(a,t.target,i);(t.delegateTarget=n)&&(!0===o&&c(a,s,e),r.call(l||a,t))},e||!1),r}var a=e("./dom");n.on=r;function i(e,t,n,a,i,s){return r(e,t,n,a,i,s,!0)}n.once=i;var c=function(e,t,n,a){n._delegateWrapper&&delete(n=n._delegateWrapper)._delegateWrapper,"mouseenter"!==t&&"mouseleave"!==t||(a=!0),e.removeEventListener(t,n,a||!1)};n.off=c;function s(e){l(e),o(e)}n.stop=s;var l=function(e){var t=window.event;e.stopPropagation?e.stopPropagation():t.cancelBubble=!0};n.stopPropagation=l;var o=function(e){var t=window.event;e.preventDefault?e.preventDefault():t.returnValue=!1};n.preventDefault=o;var u=function(e,t,n){for(;t&&t!==e;){if((0,a.hasClass)(t,n.replace(".","")))return t;t=t.parentElement}return null};n.getDelegateTarget=u;var d={on:r,once:i,off:c,stop:s,stopPropagation:l,preventDefault:o};n.default=d},{"./dom":18}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.replaceClass=n.removeClass=n.addClass=n.hasClass=n.setAttribute=n.createElement=void 0;function a(e,t,n){var a=document.createElement(e);for(var i in t)t.hasOwnProperty(i)&&r(a,i,t[i]);return(0,s.isArray)(n)&&n.forEach(function(e){var t;if((0,s.isElement)(e))t=e;else if((0,s.isString)(e)||(0,s.isNumber)(e)){var n=(0,s.isString)(e)?(0,s.trim)((0,s.stripTags)(e)):e.toString();t=document.createTextNode(n)}a.appendChild(t)}),a}var s=e("./utils");n.createElement=a;var r=function(e,t,n){var a=e.tagName.toLowerCase();switch(t){case"style":e.style.cssText=n;break;case"value":"input"===a||"textarea"===a?e.value=n:e.setAttribute(t,n);break;case"className":e.className=n;break;default:e.setAttribute(t,n)}};n.setAttribute=r;function i(e,t){var n=e.className;return!!n&&n.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}n.hasClass=i;function l(e,t){var n=e.className;if(i(e,t))return!1;n+=0<n.length?" "+t:t,e.className=n}n.addClass=l;function o(e,t){var n=e.className;if(!n||!i(e,t))return!1;n=(0,s.trim)(n.replace(t,"")),e.className=n}n.removeClass=o;function c(e,t,n){var a=e.className;if(!a||!i(e,n))return!1;a=(0,s.trim)(a.replace(n,t)),e.className=a}n.replaceClass=c;var u={createElement:a,setAttribute:r,hasClass:i,addClass:l,removeClass:o,replaceClass:c};n.default=u},{"./utils":32}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e("./delegate"),l=e("./dom"),o=e("./utils"),c=e("./time"),i=s(e("./confirm")),u=e("./plan.config"),d=s(e("./plan.emitter")),h=e("./plan.task"),p=e("./plan.static");function s(e){return e&&e.__esModule?e:{default:e}}var r,f=document.querySelector("#columns"),m={initialize:function(e){var t=e.filter,n=e.plans;return this.setFilter(t).setPlans(n).addEventListeners(),this},_elements:{wrap:f,todoCount:f.querySelector("#todo-count"),tasksTodo:f.querySelector("#tasks-todo"),doingCount:f.querySelector("#doing-count"),tasksDoing:f.querySelector("#tasks-doing"),checkingCount:f.querySelector("#checking-count"),tasksChecking:f.querySelector("#tasks-checking"),doneCount:f.querySelector("#done-count"),tasksDone:f.querySelector("#tasks-done")},_plans:[],_filter:"inbox",render:function(){return this.updateColumns(),this},getFilter:function(){return this._filter},setFilter:function(e){return this._filter=e,this},getPlan:function(t){return this.getPlans().filter(function(e){return e.id===t})[0]},setPlan:function(n){var e=(0,o.clone)(this.getPlans()),a=-1;return e.forEach(function(e,t){e.id===n.id&&(a=t)}),-1<a&&(e[a]=n,this.setPlans(e)),this},getPlans:function(){return this._plans},setPlans:function(e){return this._plans=e,this},getEls:function(){return this._elements},addEventListeners:function(){return(0,a.on)(f,".column-up","click",this._onCollapseClick,this),(0,a.on)(f,".column-down","click",this._onExpandClick,this),(0,a.on)(f,".columns-overlay","click",this._onOverlayClick,this),(0,a.on)(f,".task-title","click",this._onTitleClick,this),(0,a.on)(f,".task-prev","click",this._onPrevButtonClick,this),(0,a.on)(f,".task-edit","click",this._onEditButtonClick,this),(0,a.on)(f,".task-bookmark","click",this._onMarkedButtonClick,this),(0,a.on)(f,".task-delete","click",this._onDeleteButtonClick,this),(0,a.on)(f,".task-next","click",this._onNextButtonClick,this),d.default.on("columns.open",this.open.bind(this)),d.default.on("columns.close",this.close.bind(this)),d.default.on("columns.filter",this.filter.bind(this)),d.default.on("columns.add",this.add.bind(this)),d.default.on("columns.edit",this.edit.bind(this)),this},removeEventListeners:function(){return(0,a.off)(f,"click",this._onCollapseClick),(0,a.off)(f,"click",this._onExpandClick),(0,a.off)(f,"click",this._onOverlayClick),(0,a.off)(f,"click",this._onTitleClick),(0,a.off)(f,"click",this._onPrevButtonClick),(0,a.off)(f,"click",this._onEditButtonClick),(0,a.off)(f,"click",this._onMarkedButtonClick),(0,a.off)(f,"click",this._onDeleteButtonClick),(0,a.off)(f,"click",this._onNextButtonClick),d.default.off("columns.open",this.open.bind(this)),d.default.off("columns.close",this.close.bind(this)),d.default.on("columns.filter",this.filter.bind(this)),d.default.on("columns.add",this.add.bind(this)),d.default.on("columns.edit",this.edit.bind(this)),this},getStatusCountEl:function(e){var t,n=this.getEls();switch(e){case"0":case 0:t=n.todoCount;break;case"1":case 1:t=n.doingCount;break;case"2":case 2:t=n.checkingCount;break;case"3":case 3:t=n.doneCount}return t},getStatusTasksEl:function(e){var t,n=this.getEls();switch(e){case"0":case 0:t=n.tasksTodo;break;case"1":case 1:t=n.tasksDoing;break;case"2":case 2:t=n.tasksChecking;break;case"3":case 3:t=n.tasksDone}return t},filterPlans:function(e,t){var n=this.getPlans(),a=[];switch(e){case"spades":a=n.filter(function(e){return e.status===t&&0===e.level&&!e.deleted});break;case"heart":a=n.filter(function(e){return e.status===t&&1===e.level&&!e.deleted});break;case"clubs":a=n.filter(function(e){return e.status===t&&2===e.level&&!e.deleted});break;case"diamonds":a=n.filter(function(e){return e.status===t&&3===e.level&&!e.deleted});break;case"marked":a=n.filter(function(e){return e.status===t&&e.marked&&!e.deleted});break;default:a=n.filter(function(e){return e.status===t&&!e.deleted})}return a},getTodoPlans:function(){return this.filterPlans(this.getFilter(),0)},getDoingPlans:function(){return this.filterPlans(this.getFilter(),1)},getCheckingPlans:function(){return this.filterPlans(this.getFilter(),2)},getDonePlans:function(){return this.filterPlans(this.getFilter(),3)},getMarkedPlans:function(){return this.filterPlans("marked")},filter:function(e){return this.setFilter(e).updateColumns(),this},add:function(e){var t=e.status,n=this.getStatusTasksEl(t),a=this.getStatusCountEl(t),i=(0,h.createTaskElement)(e),s=parseInt(a.innerHTML,10),r=(0,o.clone)(this.getPlans());return r.push(e),this.setPlans(r),s+=1,a.innerHTML=s.toString(),n.appendChild(i),this},edit:function(e){var t=(0,h.createTaskElement)(e),n=f.querySelector('.task[data-id="'.concat(e.id,'"]')),a=this.getStatusTasksEl(e.status);return this.setPlan(e),a.replaceChild(t,n),this},remove:function(n){var e,t=this.getStatusTasksEl(n.status),a=this.getStatusCountEl(n.status),i=t.querySelector('.task[data-id="'.concat(n.id,'"]')),s=(0,o.clone)(this.getPlans()),r=-1;return s.forEach(function(e,t){e.id===n.id&&(r=t)}),-1===r||(s.splice(r,1),this.setPlans(s),e=parseInt(a.innerHTML,10),e-=1,a.innerHTML=e.toString(),t.removeChild(i),n.deleted=!0,n.delayed=(0,p.isDelayed)(n),n.update.unshift({time:(0,c.getMoments)(),code:u.OPERATIONS.remove.code,operate:u.OPERATIONS.remove.text}),d.default.emit("plan.remove",(0,o.clone)(n))),this},mark:function(e){var t,n="task-marked",a=this.getFilter(),i=e.status,s='.task[data-id="'.concat(e.id,'"]'),r=this.getEls();switch(e.marked=!e.marked,e.update.unshift({time:(0,c.getMoments)(),code:e.marked?u.OPERATIONS.mark.code:u.OPERATIONS.unmark.code,operate:e.marked?u.OPERATIONS.mark.text:u.OPERATIONS.unmark.text}),this.setPlan(e),d.default.emit("plan.update",(0,o.clone)(e)),i){case 0:t=r.tasksTodo.querySelector(s);break;case 1:t=r.tasksDoing.querySelector(s);break;case 2:t=r.tasksChecking.querySelector(s);break;case 3:t=r.tasksDone.querySelector(s)}return"marked"===a?this.updateColumn(i):e.marked?((0,l.addClass)(t,n),t.setAttribute("data-marked","1")):((0,l.removeClass)(t,n),t.setAttribute("data-marked","0")),this},confirm:function(e){var t=this;return(r=new i.default({title:"确定删除任务吗？",message:"任务将被放入回收站，稍后可以恢复",cancelText:"取消",enterText:"删除",afterEnter:function(){t.remove(e),r.destroy()}})).open(),this},changeStatus:function(e,t){var n,a,i=e.status,s=this.getStatusCountEl(i),r=this.getStatusTasksEl(i),l=r.querySelector('div.task[data-id="'.concat(e.id,'"]'));return"prev"===t?(e.status-=1,e.status<0&&(e.status=0)):"next"===t&&(e.status+=1,3<e.status&&(e.status=3)),e.delayed=(0,p.isDelayed)(e),e.update.unshift({time:(0,c.getMoments)(),code:u.OPERATIONS.status.code,operate:u.OPERATIONS.status.text}),this.setPlan(e),d.default.emit("plan.update",(0,o.clone)(e)),n=this.getStatusCountEl(e.status),a=this.getStatusTasksEl(e.status),(0,p.updateStatusChangedCount)(s,n),r.removeChild(l),a.appendChild((0,h.createTaskElement)(e)),this},updateTodoColumn:function(){var e=this.getTodoPlans(),t=this.getEls(),n=t.tasksTodo,a=t.todoCount,i=(0,h.getTasksFragment)(e);return a.innerHTML="".concat(e.length),n.innerHTML="",n.appendChild(i),this},updateDoingColumn:function(){var e=this.getDoingPlans(),t=this.getEls(),n=t.tasksDoing,a=t.doingCount,i=(0,h.getTasksFragment)(e);return a.innerHTML="".concat(e.length),n.innerHTML="",n.appendChild(i),this},updateCheckingColumn:function(){var e=this.getCheckingPlans(),t=this.getEls(),n=t.tasksChecking,a=t.checkingCount,i=(0,h.getTasksFragment)(e);return a.innerHTML="".concat(e.length),n.innerHTML="",n.appendChild(i),this},updateDoneColumn:function(){var e=this.getDonePlans(),t=this.getEls(),n=t.tasksDone,a=t.doneCount,i=(0,h.getTasksFragment)(e);return a.innerHTML="".concat(e.length),n.innerHTML="",n.appendChild(i),this},updateColumn:function(e){switch(e){case 0:this.updateTodoColumn();break;case 1:this.updateDoingColumn();break;case 2:this.updateCheckingColumn();break;case 3:this.updateDoneColumn()}return this},updateColumns:function(){return this.updateTodoColumn().updateDoingColumn().updateCheckingColumn().updateDoneColumn(),this},emptyTodoColumn:function(){var e=this.getEls();return e.todoCount=0,e.tasksTodo.innerHTML="",this},emptyDoingColumn:function(){var e=this.getEls();return e.doingCount=0,e.tasksDoing.innerHTML="",this},emptyCheckingColumn:function(){var e=this.getEls();return e.checkCount=0,e.tasksChecking.innerHTML="",this},emptyDoneColumn:function(){var e=this.getEls();return e.doneCount=0,e.tasksDone.innerHTML="",this},emptyColumns:function(){return this.emptyTodoColumn().emptyDoingColumn().emptyCheckingColumn().emptyDoneColumn(),this},collapse:function(e){var t=parseInt(e.getAttribute("data-status"),10),n=e.parentNode.querySelector(".column-down"),a=this.getStatusTasksEl(t);return(0,l.addClass)(e,"hidden"),(0,l.removeClass)(n,"hidden"),(0,l.addClass)(a,"tasks-min"),this},expand:function(e){var t=parseInt(e.getAttribute("data-status"),10),n=e.parentNode.querySelector(".column-up"),a=this.getStatusTasksEl(t);return(0,l.addClass)(e,"hidden"),(0,l.removeClass)(n,"hidden"),(0,l.removeClass)(a,"tasks-min"),this},open:function(){return(0,l.removeClass)(f,"panel-opened"),this},close:function(){return(0,l.addClass)(f,"panel-opened"),this},_onTitleClick:function(e){var t=e.delegateTarget.getAttribute("data-id"),n=this.getPlan(parseInt(t,10));return d.default.emit("panel.view.update",n),this},_onPrevButtonClick:function(e){var t=e.delegateTarget.getAttribute("data-id"),n=this.getPlan(parseInt(t,10));return this.changeStatus(n,"prev"),this},_onNextButtonClick:function(e){var t=e.delegateTarget.getAttribute("data-id"),n=this.getPlan(parseInt(t,10));return this.changeStatus(n,"next"),this},_onEditButtonClick:function(e){var t=e.delegateTarget.getAttribute("data-id"),n=this.getPlan(parseInt(t,10));return d.default.emit("panel.edit.update",n),this},_onMarkedButtonClick:function(e){var t=e.delegateTarget.getAttribute("data-id"),n=this.getPlan(parseInt(t,10));return this.mark(n),this},_onDeleteButtonClick:function(e){var t=e.delegateTarget.getAttribute("data-id"),n=this.getPlan(parseInt(t,10));return this.confirm(n),this},_onCollapseClick:function(e){return this.collapse(e.delegateTarget),this},_onExpandClick:function(e){return this.expand(e.delegateTarget),this},_onOverlayClick:function(){return d.default.emit("plan.close.panels"),this.open(),this}};n.default=m},{"./confirm":16,"./delegate":17,"./dom":18,"./plan.config":20,"./plan.emitter":21,"./plan.static":28,"./plan.task":29,"./time":31,"./utils":32}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.OPERATIONS=n.STORAGE=n.THEMES=n.TEMPLATES=void 0;n.TEMPLATES=[{name:"空模板",image:"images/t-empty.png",value:0,plans:[]},{name:"演示模板",image:"images/t-plan.png",value:1,plans:[{id:1,title:"分析 Plan 项目的用户需求",deadline:"2019-07-14",estimate:"3d",level:0,desc:"- 于客户进行多轮沟通，收集尽可能多用户需求 \n- 并分析整理出项目计划",create:"2019-07-05",update:[],status:3,marked:!0,delayed:!1,deleted:!1},{id:2,title:"根据分析出的项目计划，整理产品设计方案",deadline:"2019-07-16",estimate:"1d",level:1,desc:"根据项目计划，分析整理出的完整产品功能需求，出产品设计方案（功能需求，用户故事）",create:"2019-07-05",update:[],status:2,marked:!1,delayed:!1,deleted:!1},{id:3,title:"出 Plan 的 UI 设计稿",deadline:"2019-07-18",estimate:"3d",level:1,desc:"根据功能需求和用户故事，设计出一套完整的系统 UI 界面",create:"2019-07-05",update:[],status:1,marked:!1,delayed:!1,deleted:!1},{id:4,title:"设计用户体验细节",deadline:"2019-07-18",estimate:"3d",level:1,desc:"根据功能需求和用户故事以及 UI 设计图，设计出完整的用户体验细节",create:"2019-07-05",update:[],status:0,marked:!0,delayed:!1,deleted:!1},{id:5,title:"前端开发开发 HTML 交互原型",deadline:"2019-07-24",estimate:"3d",level:1,desc:"前端工程师根据功能需求和用户故事，结合 UI 设计图和交互设计，开发出产品的交互原型",create:"2019-07-05",update:[],status:0,marked:!0,delayed:!1,deleted:!0},{id:6,title:"进行交互评审",deadline:"2019-07-28",estimate:"3d",level:2,desc:"联系客户，对交互原型进行评审，根据反馈结果进行用户体验优化",create:"2019-07-15",update:[],status:0,marked:!1,delayed:!1,deleted:!1},{id:7,title:"前端开发最终的产品",deadline:"2019-08-01",estimate:"3d",level:3,desc:"前端工程师开发出最终的 PlanV2 产品",create:"2019-07-15",update:[],status:0,marked:!0,delayed:!1,deleted:!1},{id:8,title:"交付客户，进行项目收尾",deadline:"2019-08-08",estimate:"3d",level:3,desc:"将最终的产品交付给客户，项目结束",create:"2019-07-15",update:[],status:0,marked:!0,delayed:!1,deleted:!1}]}];n.THEMES=[{name:"蓝色",theme:"theme-blue",color:"blue",value:0},{name:"绿色",theme:"theme-green",color:"green",value:1},{name:"紫色",theme:"theme-purple",color:"purple",value:2},{name:"红色",theme:"theme-red",color:"red",value:3},{name:"靛蓝色",theme:"theme-indigo",color:"indigo",value:4},{name:"墨绿色",theme:"theme-teal",color:"teal",value:5},{name:"暗紫色",theme:"theme-dark-purple",color:"dark-purple",value:6},{name:"粉色",theme:"theme-pink",color:"pink",value:7}];n.STORAGE=[{name:"关闭",value:0},{name:"启用",value:1}];n.OPERATIONS={add:{code:0,text:"创建任务"},edit:{code:1,text:"编辑任务"},mark:{code:2,text:"标记任务"},unmark:{code:3,text:"取消标记"},status:{code:4,text:"更新状态"},remove:{code:5,text:"移除任务"},replace:{code:6,text:"还原任务"}}},{}],21:[function(e,t,n){"use strict";var a;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=(0,((a=e("mitt"))&&a.__esModule?a:{default:a}).default)();n.default=i},{mitt:10}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=e("./utils"),p=e("./time"),f=e("./dom"),m=e("./plan.static"),g=e("./plan.config"),a=h(e("./plan.toolbar")),s=h(e("./plan.panel.view")),r=h(e("./plan.panel.add")),l=h(e("./plan.panel.edit")),o=h(e("./plan.panel.trash")),c=h(e("./plan.panel.setting")),u=h(e("./plan.columns")),v=h(e("./plan.emitter")),d=h(e("dragula"));h(e("marked"));function h(e){return e&&e.__esModule?e:{default:e}}function k(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var y=function(){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.attributes={template:0,theme:0,cache:0,plans:[]},this.$toolbar=null,this.$panelView=null,this.$panelAdd=null,this.$panelEdit=null,this.$panelTrash=null,this.$panelSetting=null,this.$columns=null,this.$dragula=null,this.data={plans:[],filter:"inbox"},this.initialize(e).render().addEventListeners(),this}return function(e,t,n){t&&k(e.prototype,t),n&&k(e,n)}(t,[{key:"initialize",value:function(e){var t;return this.$toolbar=a.default,this.$panelView=s.default,this.$panelAdd=r.default,this.$panelEdit=l.default,this.$panelTrash=o.default,this.$panelSetting=c.default,this.$columns=u.default,this.set(e).setPlans((0,i.clone)(this.get("plans"))),this.$toolbar.initialize(this.getFilter()),this.$panelView.initialize(),this.$panelAdd.initialize(),this.$panelEdit.initialize(),this.$panelTrash.initialize(this.getPlans().filter(function(e){return e.deleted})),this.$panelSetting.initialize({template:this.get("template"),theme:this.get("theme"),cache:this.get("cache")}),this.$columns.initialize({filter:this.getFilter(),plans:this.getPlans().filter(function(e){return!e.deleted})}),t=this.$columns.getEls(),this.$dragula=(0,d.default)([t.tasksTodo,t.tasksDoing,t.tasksChecking,t.tasksDone]),this}},{key:"render",value:function(){return document.body.className=g.THEMES[this.get("theme")].theme,this.$panelTrash.render(),this.$panelSetting.render(),this.$columns.render(),this}},{key:"addEventListeners",value:function(){var a=this;return v.default.on("plan.update.template",this.setTemplate.bind(this)),v.default.on("plan.update.theme",this.setTheme.bind(this)),v.default.on("plan.update.cache",this.setCache.bind(this)),v.default.on("plan.filter",this.filter.bind(this)),v.default.on("plan.add",this.add.bind(this)),v.default.on("plan.edit",this.edit.bind(this)),v.default.on("plan.update",this.update.bind(this)),v.default.on("plan.remove",this.remove.bind(this)),v.default.on("plan.replace",this.replace.bind(this)),v.default.on("plan.delete",this.delete.bind(this)),v.default.on("plan.close.panels",this.closePanels.bind(this)),this.$dragula.on("drop",function(e,t,n){a.drop(e,t,n)}),this}},{key:"removeEventListeners",value:function(){return this.$toolbar.removeEventListeners(),this.$panelView.removeEventListeners(),this.$panelAdd.removeEventListeners(),this.$panelEdit.removeEventListeners(),this.$panelTrash.removeEventListeners(),this.$panelSetting.removeEventListeners(),this.$columns.removeEventListeners(),v.default.off("plan.update.template",this.setTemplate.bind(this)),v.default.off("plan.update.theme",this.setTheme.bind(this)),v.default.off("plan.update.cache",this.setCache.bind(this)),v.default.off("plan.filter",this.filter.bind(this)),v.default.off("plan.add",this.add.bind(this)),v.default.off("plan.edit",this.edit.bind(this)),v.default.off("plan.update",this.update.bind(this)),v.default.off("plan.remove",this.remove.bind(this)),v.default.off("plan.replace",this.replace.bind(this)),v.default.off("plan.delete",this.delete.bind(this)),v.default.off("plan.close.panels",this.closePanels.bind(this)),this.$dragula.destroy(),this}},{key:"reload",value:function(e){this.destroy().initialize(e).render().addEventListeners()}},{key:"destroy",value:function(){return this.removeEventListeners().reset().empty(),this}},{key:"reset",value:function(){return this.attributes={template:0,theme:0,cache:0,plans:[]},this.$toolbar=null,this.$panelView=null,this.$panelAdd=null,this.$panelEdit=null,this.$panelTrash=null,this.$panelSetting=null,this.$columns=null,this.$dragula=null,this.data={plans:[],filter:"inbox"},this}},{key:"empty",value:function(){return v.default.emit("panel.view.empty"),v.default.emit("panel.add.empty"),v.default.emit("panel.edit.empty"),v.default.emit("panel.trash.empty"),v.default.emit("panel.setting.empty"),v.default.emit("panel.columns.empty"),this}},{key:"get",value:function(e){return this.attributes[e]}},{key:"set",value:function(e){return(0,i.assign)(this.attributes,e),this}},{key:"getPlan",value:function(t){return this.getPlans().filter(function(e){return e.id===t})[0]}},{key:"setPlan",value:function(n){var e=(0,i.clone)(this.getPlans()),a=-1;return e.forEach(function(e,t){e.id===n.id&&(a=t)}),-1<a&&(e[a]=n,this.setPlans(e)),this}},{key:"getPlans",value:function(){return this.data.plans}},{key:"setPlans",value:function(e){return this.data.plans=e,1===this.get("cache")?localStorage.setItem("plan.plans",JSON.stringify(this.data.plans)):localStorage.removeItem("plan.plans"),this}},{key:"getFilter",value:function(){return this.data.filter}},{key:"setFilter",value:function(e){return this.data.filter=e,this}},{key:"setTemplate",value:function(e){return this.set({template:e}),localStorage.setItem("plan.template",e),this}},{key:"setTheme",value:function(e){return this.set({theme:e}),(0,f.addClass)(document.body,g.THEMES[this.get("theme")].theme),localStorage.setItem("plan.theme",e),this}},{key:"setCache",value:function(e){return this.set({cache:e}),localStorage.setItem("plan.cache",e),0===e&&localStorage.removeItem("plan.plans"),this}},{key:"filter",value:function(e){return this.setFilter(e),v.default.emit("columns.filter",e),this}},{key:"add",value:function(e){var t=(0,i.clone)(this.getPlans());return t.push(e),this.setPlans(t),v.default.emit("columns.add",e),this}},{key:"edit",value:function(e){return this.setPlan(e),v.default.emit("columns.edit",e),this}},{key:"update",value:function(e){return this.setPlan(e),this}},{key:"remove",value:function(e){return this.setPlan(e),v.default.emit("panel.trash.add",e),this}},{key:"replace",value:function(e){return this.setPlan(e),v.default.emit("columns.add",e),this}},{key:"delete",value:function(n){var e=(0,i.clone)(this.getPlans()),a=-1;return e.forEach(function(e,t){e.id===n.id&&(a=t)}),-1===a||(e.splice(a,1),this.setPlans(e)),this}},{key:"closePanels",value:function(){return v.default.emit("panel.view.close"),v.default.emit("panel.add.close"),v.default.emit("panel.edit.close"),v.default.emit("panel.trash.close"),v.default.emit("panel.setting.close"),this}},{key:"drop",value:function(e,t,n){var a,i,s=this.getFilter(),r=e.getAttribute("data-id"),l=this.getPlan(parseInt(r,10)),o=this.$columns,c=n.getAttribute("data-status"),u=t.getAttribute("data-status"),d=o.getStatusCountEl(c),h=o.getStatusCountEl(u);if(u===c)return this;if("deleted"===u)l.deleted=!0,a=g.OPERATIONS.remove.code,i=g.OPERATIONS.remove.text;else if("deleted"===c){switch(a=g.OPERATIONS.replace.text,i=g.OPERATIONS.replace.text,s){case"marked":l.marked=!0;break;case"spades":l.level=0;break;case"heart":l.level=1;break;case"clubs":l.level=2;break;case"diamonds":l.level=3}l.deleted=!1,l.status=parseInt(u,10)}else a=g.OPERATIONS.status.text,i=g.OPERATIONS.status.text,l.status=parseInt(u,10);return l.update.unshift({time:(0,p.getMoments)(),code:a,operate:i}),l.delayed=(0,m.isDelayed)(l),this.setPlan(l),(0,m.updateStatusChangedCount)(d,h),l.deleted?((0,f.addClass)(e,"task-deleted"),e.setAttribute("data-deleted","1")):(v.default.emit("columns.edit",l),(0,f.removeClass)(e,"task-deleted"),e.setAttribute("data-deleted","0"),(0,f.replaceClass)(e,"task-status-"+l.status,"task-status-"+c),e.setAttribute("data-status",l.status)),l.marked?((0,f.addClass)(e,"task-marked"),e.setAttribute("data-marked","1")):((0,f.removeClass)(e,"task-marked"),e.setAttribute("data-marked","0")),l.delayed?((0,f.addClass)(e,"task-delayed"),e.setAttribute("data-delay","1")):((0,f.removeClass)(e,"task-delayed"),e.setAttribute("data-delay","0")),this}}]),t}();n.default=y},{"./dom":18,"./plan.columns":19,"./plan.config":20,"./plan.emitter":21,"./plan.panel.add":23,"./plan.panel.edit":24,"./plan.panel.setting":25,"./plan.panel.trash":26,"./plan.panel.view":27,"./plan.static":28,"./plan.toolbar":30,"./time":31,"./utils":32,dragula:8,marked:9}],23:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=e("./utils"),l=e("./dom"),c=e("./time"),a=e("./delegate"),i=s(e("./calendar")),u=e("./plan.config"),d=e("./plan.static"),h=s(e("./plan.emitter"));function s(e){return e&&e.__esModule?e:{default:e}}var r,p=document.querySelector("#add-panel"),f="field-level-checked",m={initialize:function(){return this.addEventListeners(),this},_elements:{wrap:p,title:p.querySelector("#add-title"),create:p.querySelector("#add-create"),deadline:p.querySelector("#add-deadline"),estimate:p.querySelector("#add-estimate"),levels:p.querySelector("#add-levels"),level:p.querySelector("#add-level"),desc:p.querySelector("#add-desc")},_plan:{id:1,title:"",deadline:"",estimate:"",level:3,desc:"",create:"",update:[],status:0,marked:!1,delayed:!1,deleted:!1},getPlan:function(){return this._plan},setPlan:function(e){return this._plan=e,this},getEls:function(){return this._elements},addEventListeners:function(){return(0,a.on)(p,".add-cancel","click",this._onCancelClick,this),(0,a.on)(p,".add-save","click",this._onSaveClick,this),(0,a.on)(p,".add-level","click",this._onLevelClick,this),(0,a.on)(p,".add-deadline-input","click",this._onDeadlineInputFocus,this),(0,a.on)(p,".add-calendar-icon","click",this._onCalendarIconClick,this),h.default.on("panel.add.open",this.open.bind(this)),h.default.on("panel.add.close",this.close.bind(this)),h.default.on("panel.add.toggle",this.toggle.bind(this)),this},removeEventListeners:function(){return(0,a.off)(p,"click",this._onCancelClick),(0,a.off)(p,"click",this._onSaveClick),(0,a.off)(p,"click",this._onLevelClick),(0,a.off)(p,"click",this._onDeadlineInputFocus),(0,a.off)(p,"click",this._onCalendarIconClick),h.default.off("panel.add.open",this.open.bind(this)),h.default.off("panel.add.close",this.close.bind(this)),h.default.off("panel.add.toggle",this.toggle.bind(this)),this},close:function(){return this.isOpened()&&((0,l.removeClass)(p,"panel-opened"),h.default.emit("columns.open"),r&&(r.destroy(),r=null),this.empty()),this},open:function(){var e=p.querySelector("#add-create"),t=p.querySelector("#add-deadline"),n=p.querySelector(".add-calendar-icon"),a=(0,c.getToday)().text;return this.isOpened()||(h.default.emit("panel.view.close"),h.default.emit("panel.edit.close"),h.default.emit("panel.trash.close"),h.default.emit("panel.setting.close"),r=new i.default({parent:"add-calendar",time:this.getPlan().deadline,hasFooter:!1,onDatePick:function(e){t.value=e,r.hide(),(0,l.removeClass)(n,"field-icon-checked")}}),e.innerHTML=a,r.hide(),(0,l.addClass)(p,"panel-opened"),h.default.emit("columns.close")),this},toggle:function(){return this.isOpened()?this.close():this.open(),this},isOpened:function(){return(0,l.hasClass)(p,"panel-opened")},empty:function(){var e=p.querySelector("#add-title"),t=p.querySelector("#add-create"),n=p.querySelector("#add-deadline"),a=p.querySelector("#add-estimate"),i=p.querySelector("#add-level"),s=p.querySelector("#add-desc"),r=p.querySelector("."+f);return e.value="",t.innerHTML="",n.value="",a.value="",i.value=-1,s.value="",r&&(0,l.removeClass)(r,f),this},toggleCalendar:function(e){var t="field-icon-checked";return(0,l.hasClass)(e,t)?(0,l.removeClass)(e,t):(0,l.addClass)(e,t),r.toggle(),this},changeLevel:function(e){var t=e.getAttribute("data-level"),n=p.querySelector("."+f),a=p.querySelector("#add-level");return(0,l.hasClass)(e,f)||(n&&(0,l.removeClass)(n,f),(0,l.addClass)(e,f),a&&(a.value=t)),this},save:function(){var e=this.getEls(),t=e.title,n=e.deadline,a=e.estimate,i=e.level,s=e.desc,r=(0,c.getMoments)(),l={};return l={id:parseInt((0,o.guid)(4,10),10),title:(0,o.toSafeText)(t.value),deadline:n.value,estimate:a.value,level:parseInt(i.value,10),desc:(0,o.toSafeText)(s.value),marked:!1,deleted:!1,status:0,create:r,update:[{time:r,code:u.OPERATIONS.add.code,operate:u.OPERATIONS.add.text}],delayed:(0,d.isDelayed)(l)},h.default.emit("plan.add",(0,o.clone)(l)),this},_onCancelClick:function(){return this.close(),this},_onSaveClick:function(){return this.save(),this},_onLevelClick:function(e){return this.changeLevel(e.delegateTarget),this},_onDeadlineInputFocus:function(){var e=p.querySelector(".add-calendar-icon");return this.toggleCalendar(e),this},_onCalendarIconClick:function(e){return this.toggleCalendar(e.delegateTarget),this}};n.default=m},{"./calendar":15,"./delegate":17,"./dom":18,"./plan.config":20,"./plan.emitter":21,"./plan.static":28,"./time":31,"./utils":32}],24:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var l=e("./utils"),c=e("./dom"),o=e("./time"),a=e("./delegate"),u=i(e("./calendar")),d=e("./plan.config"),h=e("./plan.static"),p=i(e("./plan.emitter"));function i(e){return e&&e.__esModule?e:{default:e}}var f,m=document.querySelector("#edit-panel"),s={initialize:function(){return this.addEventListeners(),this},_elements:{wrap:m,title:m.querySelector("#edit-title"),create:m.querySelector("#edit-create"),deadline:m.querySelector("#edit-deadline"),estimate:m.querySelector("#edit-estimate"),levels:m.querySelector("#edit-levels"),level:m.querySelector("#edit-level"),desc:m.querySelector("#edit-desc")},_plan:{id:1,title:"",deadline:"",estimate:"",level:3,desc:"",create:"",update:[],status:0,marked:!1,delayed:!1,deleted:!1},getPlan:function(){return this._plan},setPlan:function(e){return this._plan=e,this},getEls:function(){return this._elements},addEventListeners:function(){return(0,a.on)(m,".edit-cancel","click",this._onCancelClick,this),(0,a.on)(m,".edit-save","click",this._onSaveClick,this),(0,a.on)(m,".edit-level","click",this._onLevelClick,this),(0,a.on)(m,".edit-deadline-input","click",this._onDeadlineInputFocus,this),(0,a.on)(m,".edit-calendar-icon","click",this._onCalendarIconClick,this),p.default.on("panel.edit.update",this.update.bind(this)),p.default.on("panel.edit.open",this.open.bind(this)),p.default.on("panel.edit.close",this.close.bind(this)),this},removeEventListeners:function(){return(0,a.off)(m,"click",this._onCancelClick),(0,a.off)(m,"click",this._onSaveClick),(0,a.off)(m,"click",this._onLevelClick),(0,a.off)(m,"click",this._onDeadlineInputFocus),(0,a.off)(m,"click",this._onCalendarIconClick),p.default.off("panel.edit.update",this.setPlan.bind(this)),p.default.off("panel.edit.open",this.open.bind(this)),p.default.off("panel.edit.close",this.close.bind(this)),this},close:function(){return this.isOpened()&&((0,c.removeClass)(m,"panel-opened"),p.default.emit("columns.open"),f&&(f.destroy(),f=null),this.empty()),this},open:function(){return this.isOpened()||(p.default.emit("panel.add.close"),p.default.emit("panel.view.close"),p.default.emit("panel.trash.close"),p.default.emit("panel.setting.close"),(0,c.addClass)(m,"panel-opened"),p.default.emit("columns.close")),this},isOpened:function(){return(0,c.hasClass)(m,"panel-opened")},update:function(e){var t=m.querySelector("#edit-title"),n=m.querySelector("#edit-create"),a=m.querySelector("#edit-deadline"),i=m.querySelector(".edit-calendar-icon"),s=m.querySelector("#edit-estimate"),r=m.querySelector("#edit-level"),l=m.querySelector("#edit-desc"),o=m.querySelector('[data-level="'.concat(e.level,'"]'));return this.setPlan(e),t.value=e.title,n.innerHTML=e.create,a.value=e.deadline,s.value=e.estimate,r.value=e.level,l.value=e.desc,o&&(0,c.addClass)(o,"field-level-checked"),(f=new u.default({parent:"edit-calendar",time:this.getPlan().deadline,hasFooter:!1,onDatePick:function(e){a.value=e,f.hide(),(0,c.removeClass)(i,"field-icon-checked")}})).hide(),this.open(),this},empty:function(){var e="field-level-checked",t=m.querySelector("#edit-title"),n=m.querySelector("#edit-create"),a=m.querySelector("#edit-deadline"),i=m.querySelector("#edit-estimate"),s=m.querySelector("#edit-level"),r=m.querySelector("#edit-desc"),l=m.querySelector("."+e);return t.value="",n.innerHTML="",a.value="",i.value="",s.value=-1,r.value="",l&&(0,c.removeClass)(l,e),this},toggleCalendar:function(e){var t="field-icon-checked";return(0,c.hasClass)(e,t)?(0,c.removeClass)(e,t):(0,c.addClass)(e,t),f.toggle(),this},changeLevel:function(e){var t="field-level-checked",n=e.getAttribute("data-level"),a=m.querySelector("."+t),i=m.querySelector("#edit-level");return(0,c.hasClass)(e,t)||(a&&(0,c.removeClass)(a,t),(0,c.addClass)(e,t),i&&(i.value=n)),this},save:function(){var e=m.querySelector("#edit-title"),t=m.querySelector("#edit-deadline"),n=m.querySelector("#edit-estimate"),a=m.querySelector("#edit-level"),i=m.querySelector("#edit-desc"),s=this.getPlan(),r=(0,l.clone)(s);return(0,l.assign)(r,{id:s.id,title:e.value,deadline:t.value,estimate:n.value,level:parseInt(a.value,10),desc:i.value,marked:s.marked,deleted:s.deleted,status:s.status,create:s.create,delayed:(0,h.isDelayed)(r)}),r.update.unshift({time:(0,o.getMoments)(),code:d.OPERATIONS.edit.code,operate:d.OPERATIONS.edit.text}),this.close(),p.default.emit("plan.edit",(0,l.clone)(r)),this},_onCancelClick:function(){return this.close(),this},_onSaveClick:function(){return this.save(),this},_onLevelClick:function(e){return this.changeLevel(e.delegateTarget),this},_onDeadlineInputFocus:function(){var e=m.querySelector(".edit-calendar-icon");return this.toggleCalendar(e),this},_onCalendarIconClick:function(e){return this.toggleCalendar(e.delegateTarget),this}};n.default=s},{"./calendar":15,"./delegate":17,"./dom":18,"./plan.config":20,"./plan.emitter":21,"./plan.static":28,"./time":31,"./utils":32}],25:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,T=e("./dom"),i=e("./delegate"),C=e("./plan.config"),l=(a=e("./plan.emitter"))&&a.__esModule?a:{default:a};var b="field-option-checked",_="field-radio-checked",s=document.querySelector("#setting-panel"),r={initialize:function(e){var t=e.template,n=e.theme,a=e.cache;return this.setTemplate(t).setTheme(n).setCache(a).addEventListeners(),this},_elements:{wrap:s,templates:s.querySelector("#setting-templates"),themes:s.querySelector("#setting-themes"),storage:s.querySelector("#setting-storage")},_template:0,_theme:0,_cache:0,render:function(){var s=" ",r="field-radio",l="field-option",i="field-template",o="field-theme",c="setting-template",u="setting-theme",d="setting-cache",h=this.getTemplate(),p=this.getTheme(),f=this.getCache(),e=this.getEls(),t=e.templates,n=e.themes,a=e.storage,m=(0,T.createElement)("input",{type:"hidden",name:"template",id:"setting-template",value:h}),g=(0,T.createElement)("input",{type:"hidden",name:"theme",id:"setting-theme",value:p}),v=(0,T.createElement)("input",{type:"hidden",name:"cache",id:"setting-cache",value:f}),k=(0,T.createElement)("div",{className:"field-templates"}),y=(0,T.createElement)("div",{className:"field-themes"}),E=(0,T.createElement)("div",{className:"field-radios-group"});return C.TEMPLATES.forEach(function(e){var t=e.value===h?l+s+b+s+i+s+c:l+s+i+s+c,n=(0,T.createElement)("p",{className:"field-template-image","data-template":e.value},[(0,T.createElement)("img",{alt:e.name,src:e.image,width:"130",height:"51"})]),a=(0,T.createElement)("p",{className:"field-template-text","data-template":e.value},[e.name]);k.appendChild((0,T.createElement)("div",{className:t,"data-template":e.value},[n,a]))}),C.THEMES.forEach(function(e){var t=e.value===p?l+s+b+s+o+s+u:l+s+o+s+u,n=(0,T.createElement)("div",{className:"field-theme-color "+e.theme,"data-theme":e.theme,"data-value":e.value}),a=(0,T.createElement)("p",{className:"field-theme-text","data-theme":e.theme,"data-value":e.value},[e.name]);y.appendChild((0,T.createElement)("div",{className:t,"data-theme":e.theme,"data-value":e.value},[n,a]))}),C.STORAGE.forEach(function(e){var t=e.value===f?l+s+b+s+d:l+s+d,n=e.value===f?r+s+_:r,a=(0,T.createElement)("div",{className:n,"data-cache":e.value},[(0,T.createElement)("div",{className:"field-radio-icon"},[(0,T.createElement)("i",{className:"icon-radio-unchecked"}),(0,T.createElement)("i",{className:"icon-radio-checked2"})]),(0,T.createElement)("label",{className:"field-radio-label"},[e.name])]),i=(0,T.createElement)("div",{className:t,"data-cache":e.value},[a]);E.appendChild(i)}),t.appendChild(k),t.appendChild(m),n.appendChild(y),n.appendChild(g),a.appendChild(E),a.appendChild(v),this},getTemplate:function(){return this._template},setTemplate:function(e){return this._template=e,this},getTheme:function(){return this._theme},setTheme:function(e){return this._theme=e,this},getCache:function(){return this._cache},setCache:function(e){return this._cache=e,this},getEls:function(){return this._elements},addEventListeners:function(){return(0,i.on)(s,".setting-cancel","click",this._onCancelClick,this),(0,i.on)(s,".setting-template","click",this._onTemplateClick,this),(0,i.on)(s,".setting-theme","click",this._onThemeClick,this),(0,i.on)(s,".setting-cache","click",this._onCacheClick,this),l.default.on("panel.setting.open",this.open.bind(this)),l.default.on("panel.setting.close",this.close.bind(this)),l.default.on("panel.setting.toggle",this.toggle.bind(this)),this},removeEventListeners:function(){return(0,i.off)(s,"click",this._onCancelClick),(0,i.off)(s,"click",this._onTemplateClick),(0,i.off)(s,"click",this._onThemeClick),(0,i.off)(s,"click",this._onCacheClick),l.default.off("panel.setting.open",this.open.bind(this)),l.default.off("panel.setting.close",this.close.bind(this)),l.default.off("panel.setting.toggle",this.toggle.bind(this)),this},close:function(){return this.isOpened()&&(l.default.emit("toolbar.setting.toggle.highlight"),l.default.emit("columns.open"),(0,T.removeClass)(s,"panel-opened")),this},open:function(){return this.isOpened()||(l.default.emit("toolbar.setting.toggle.highlight"),l.default.emit("panel.view.close"),l.default.emit("panel.add.close"),l.default.emit("panel.edit.close"),l.default.emit("panel.trash.close"),l.default.emit("columns.close"),(0,T.addClass)(s,"panel-opened")),this},toggle:function(){return this.isOpened()?this.close():this.open(),this},isOpened:function(){return(0,T.hasClass)(s,"panel-opened")},changeTemplate:function(e){var t=e.getAttribute("data-template"),n=this.getEls().templates,a=n.querySelector("."+b),i=n.querySelector("#setting-template");return(0,T.hasClass)(e,b)||(i.value=t,a&&(0,T.removeClass)(a,b),(0,T.addClass)(e,b),l.default.emit("plan.update.template",parseInt(t,10))),this},changeTheme:function(e){var t=e.getAttribute("data-value"),n=this.getEls(),a=document.body,i=n.themes,s=i.querySelector("."+b),r=i.querySelector("#setting-theme");return(0,T.hasClass)(e,b)||(r.value=t,s&&(0,T.removeClass)(s,b),(0,T.addClass)(e,b),a.className=C.THEMES[parseInt(t,10)].theme,l.default.emit("plan.update.theme",parseInt(t,10))),this},changeCache:function(e){var t=e.getAttribute("data-cache"),n=this.getEls().storage,a=n.querySelector("."+b),i=e.querySelector(".field-radio"),s=n.querySelector("."+_),r=n.querySelector("#setting-cache");return(0,T.hasClass)(e,b)||(r.value=t,a&&(0,T.removeClass)(a,b),(0,T.addClass)(e,b),s&&(0,T.removeClass)(s,_),(0,T.addClass)(i,_),l.default.emit("plan.update.cache",parseInt(t,10))),this},_onCancelClick:function(){return this.close(),this},_onTemplateClick:function(e){return this.changeTemplate(e.delegateTarget),this},_onThemeClick:function(e){return this.changeTheme(e.delegateTarget),this},_onCacheClick:function(e){return this.changeCache(e.delegateTarget),this}};n.default=r},{"./delegate":17,"./dom":18,"./plan.config":20,"./plan.emitter":21}],26:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e("./dom"),i=e("./delegate"),o=e("./utils"),c=e("./time"),s=l(e("./confirm")),u=e("./plan.config"),d=l(e("./plan.emitter")),r=e("./plan.task"),h=e("./plan.static");function l(e){return e&&e.__esModule?e:{default:e}}var p,f=document.querySelector("#trash-panel"),m={initialize:function(e){return this.setPlans(e).addEventListeners(),this},_elements:{wrap:f,trashCount:f.querySelector("#trash-count"),tasksTrash:f.querySelector("#tasks-trash")},_plans:[],render:function(){var e=this.getPlans(),t=this.getEls(),n=t.tasksTrash,a=(0,r.getTasksFragment)(e);return t.trashCount.innerHTML="".concat(e.length),n.innerHTML="",n.appendChild(a),this},getPlan:function(t){return this.getPlans().filter(function(e){return e.id===t})[0]},getPlans:function(){return this._plans},setPlans:function(e){return this._plans=e,this},getEls:function(){return this._elements},addEventListeners:function(){return(0,i.on)(f,".trash-cancel","click",this._onCancelClick,this),(0,i.on)(f,".task-replace","click",this._onReplaceClick,this),(0,i.on)(f,".task-delete","click",this._onDeleteClick,this),d.default.on("panel.trash.add",this.add.bind(this)),d.default.on("panel.trash.open",this.open.bind(this)),d.default.on("panel.trash.close",this.close.bind(this)),d.default.on("panel.trash.toggle",this.toggle.bind(this)),this},removeEventListeners:function(){return(0,i.off)(f,"click",this._onCancelClick),(0,i.off)(f,"click",this._onReplaceClick),(0,i.off)(f,"click",this._onDeleteClick),d.default.off("panel.trash.add",this.add.bind(this)),d.default.off("panel.trash.open",this.open.bind(this)),d.default.off("panel.trash.close",this.close.bind(this)),d.default.off("panel.trash.toggle",this.toggle.bind(this)),this},indexOf:function(e,n){var a=-1;return e.forEach(function(e,t){n.id===e.id&&(a=t)}),a},add:function(e){var t=this.getEls(),n=t.tasksTrash,a=t.trashCount,i=parseInt(a.innerHTML,10),s=(0,o.clone)(this.getPlans());return e.deleted=!0,e.delayed=(0,h.isDelayed)(e),e.update.unshift({time:(0,c.getMoments)(),code:u.OPERATIONS.remove.code,operate:u.OPERATIONS.remove.text}),s.unshift(e),this.setPlans(s),i+=1,a.innerHTML=i.toString(),n.appendChild((0,r.createTaskElement)(e)),this},delete:function(e){var t,n=(0,o.clone)(this.getPlans()),a=this.getEls(),i=a.tasksTrash,s=a.trashCount,r=this.indexOf(n,e),l=parseInt(s.innerHTML,10);return-1===r||(n.splice(r,1),this.setPlans(n),l-=1,s.innerHTML=l.toString(),t=i.querySelector('.task[data-id="'.concat(e.id,'"]')),i.removeChild(t),d.default.emit("plan.delete",(0,o.clone)(e))),this},replace:function(e){var t,n=this.getEls(),a=n.tasksTrash,i=n.trashCount,s=parseInt(i.innerHTML,10),r=(0,o.clone)(this.getPlans()),l=this.indexOf(r,e);return e.deleted=!1,e.delayed=(0,h.isDelayed)(e),e.update.unshift({time:(0,c.getMoments)(),code:u.OPERATIONS.remove.code,operate:u.OPERATIONS.remove.text}),-1===l||(r.splice(l,1),this.setPlans(r),s-=1,i.innerHTML=s.toString(),t=a.querySelector('div.task[data-id="'.concat(e.id,'"]')),a.removeChild(t),d.default.emit("plan.replace",(0,o.clone)(e))),this},confirm:function(e){var t=this;return(p=new s.default({title:"确定删除任务吗？",message:"任务将被彻底删除，无法恢复",cancelText:"取消",enterText:"删除",afterEnter:function(){t.delete(e),p.destroy()}})).open(),this},close:function(){return this.isOpened()&&(d.default.emit("toolbar.trash.toggle.highlight"),d.default.emit("columns.open"),(0,a.removeClass)(f,"panel-opened")),this},open:function(){return this.isOpened()||(d.default.emit("toolbar.trash.toggle.highlight"),d.default.emit("panel.view.close"),d.default.emit("panel.add.close"),d.default.emit("panel.edit.close"),d.default.emit("panel.setting.close"),d.default.emit("columns.close"),(0,a.addClass)(f,"panel-opened")),this},toggle:function(){return this.isOpened()?this.close():this.open(),this},isOpened:function(){return(0,a.hasClass)(f,"panel-opened")},empty:function(){var e=this.getEls();return e.trashCount.innerHTML="0",e.tasksTrash.innerHTML="",this},_onCancelClick:function(){return this.close(),this},_onReplaceClick:function(e){var t=e.delegateTarget,n=parseInt(t.getAttribute("data-id"),10),a=this.getPlan(n);return this.replace(a),this},_onDeleteClick:function(e){var t=e.delegateTarget,n=parseInt(t.getAttribute("data-id"),10),a=this.getPlan(n);return this.confirm(a),this}};n.default=m},{"./confirm":16,"./delegate":17,"./dom":18,"./plan.config":20,"./plan.emitter":21,"./plan.static":28,"./plan.task":29,"./time":31,"./utils":32}],27:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var h=e("./dom"),a=e("./delegate"),p=e("./time"),f=s(e("marked")),i=s(e("./plan.emitter"));function s(e){return e&&e.__esModule?e:{default:e}}var r=document.querySelector("#view-panel"),l={initialize:function(){this.addEventListeners()},_elements:{wrap:r,title:r.querySelector("#view-title"),create:r.querySelector("#view-create"),deadline:r.querySelector("#view-deadline"),estimate:r.querySelector("#view-estimate"),level:r.querySelector("#view-level"),desc:r.querySelector("#view-desc"),logs:r.querySelector("#view-logs")},_plan:{id:1,title:"",deadline:"",estimate:"",level:3,desc:"",create:"",update:[],status:0,marked:!1,delayed:!1,deleted:!1},getPlan:function(){return this._plan},setPlan:function(e){return this._plan=e,this},getEls:function(){return this._elements},addEventListeners:function(){return(0,a.on)(r,".view-cancel","click",this._onCancelClick,this),(0,a.on)(r,".view-edit","click",this._onEditClick,this),i.default.on("panel.view.update",this.update.bind(this)),i.default.on("panel.view.open",this.open.bind(this)),i.default.on("panel.view.close",this.close.bind(this)),this},removeEventListeners:function(){return(0,a.off)(r,"click",this._onCancelClick),(0,a.off)(r,"click",this._onEditClick),i.default.off("panel.view.update",this.update.bind(this)),i.default.off("panel.view.open",this.open.bind(this)),i.default.off("panel.view.close",this.close.bind(this)),this},close:function(){return(0,h.removeClass)(r,"panel-opened"),i.default.emit("columns.open"),this.empty(),this},open:function(){return i.default.emit("panel.add.close"),i.default.emit("panel.edit.close"),i.default.emit("panel.trash.close"),i.default.emit("panel.setting.close"),(0,h.addClass)(r,"panel-opened"),i.default.emit("columns.close"),this},update:function(e){var t,n="field-view-level field-level-icon field-level-checked",a=this.getEls(),i=a.title,s=a.create,r=a.deadline,l=a.estimate,o=a.level,c=a.desc,u=a.logs,d=(0,h.createElement)("ol",{className:"panel-logs"});switch(this.setPlan(e),i.innerHTML=e.title,s.innerHTML=e.create,r.innerHTML=e.deadline,l.innerHTML=e.estimate,e.level){case 0:t=(0,h.createElement)("div",{className:n},[(0,h.createElement)("i",{className:"icon-spades"})]);break;case 1:t=(0,h.createElement)("div",{className:n},[(0,h.createElement)("i",{className:"icon-heart"})]);break;case 2:t=(0,h.createElement)("div",{className:n},[(0,h.createElement)("i",{className:"icon-clubs"})]);break;case 3:t=(0,h.createElement)("div",{className:n},[(0,h.createElement)("i",{className:"icon-diamonds"})])}return o.innerHTML="",o.appendChild(t),c.innerHTML=(0,f.default)(e.desc),e.update.forEach(function(e){var t=(0,h.createElement)("span",{className:"panel-log-operate"},[e.operate]),n=(0,h.createElement)("span",{className:"panel-log-time"},[(0,p.format)(e.time,"MM-dd hh:mm")]),a=(0,h.createElement)("li",{className:"panel-log"},[t,n]);d.appendChild(a)}),u.innerHTML="",u.appendChild(d),this.open(),this},empty:function(){var e=this.getEls(),t=e.title,n=e.create,a=e.deadline,i=e.estimate,s=e.level,r=e.desc,l=e.logs;return t.innerHTML="",n.innerHTML="",a.innerHTML="",i.innerHTML="",s.innerHTML="",r.innerHTML="",l.innerHTML="",this},_onCancelClick:function(){return this.close(),this},_onEditClick:function(){return i.default.emit("panel.edit.update",this.getPlan()),this}};n.default=l},{"./delegate":17,"./dom":18,"./plan.emitter":21,"./time":31,marked:9}],28:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.updateStatusChangedCount=n.filterToLevel=n.levelToFilter=n.isLevelSaveAsFilter=n.isEstimateTime=n.isDelayed=void 0;var a=e("./time");n.isDelayed=function(e){var t=(0,a.getToday)().text;return 0<(new Date(t).getTime()>new Date(e.deadline).getTime())&&e.status<2};n.isEstimateTime=function(e){return/^(([1-9]\d*)|[0]?)\.([0-9]\d*)([dhm]?)$/i.test(e)};n.isLevelSaveAsFilter=function(e,t){return i(e)===t};var i=function(e){var t="";switch(e){case"0":case 0:t="spades";break;case"1":case 1:t="heart";break;case"2":case 2:t="clubs";break;case"3":case 4:t="diamonds"}return t};n.levelToFilter=i;n.filterToLevel=function(e){var t=-1;switch(e){case"spades":t=0;break;case"heart":t=1;break;case"clubs":t=2;break;case"diamonds":t=3}return t};n.updateStatusChangedCount=function(e,t){var n=parseInt(e.innerHTML,10),a=parseInt(t.innerHTML,10);--n,e.innerHTML=n,a+=1,t.innerHTML=a}},{"./time":31}],29:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.createTaskMainElement=n.createTaskFooterElement=n.createTaskEstimateElement=n.createTaskDeadlineElement=n.createTaskBodyElement=n.createTaskDescElement=n.createTaskHeaderElement=n.createTaskTitleElement=n.createTaskTitleTextElement=n.createTaskLevelElement=n.createTaskSideElement=n.createTaskNextElement=n.createTaskReplaceElement=n.createTasKDeleteElement=n.createTaskMarkElement=n.createTaskEditElement=n.createTaskPrevElement=n.createTaskElement=n.getTasksFragment=void 0;var a,l=e("./dom"),i=e("./utils"),s=(a=e("marked"))&&a.__esModule?a:{default:a};function r(e){var n=document.createDocumentFragment();return e.length<1||e.forEach(function(e){var t=o(e);n.appendChild(t)}),n}n.getTasksFragment=r;var o=function(e){var t=e.id,n=m(e),a=S(e),i="task";return e.marked&&(i+=" task-marked"),e.deleted&&(i+=" task-deleted"),e.delayed&&(i+=" task-delayed"),i+=" task-status-"+e.status,(0,l.createElement)("div",{id:"task-".concat(t),className:i,"data-id":"".concat(t),"data-status":"".concat(e.status),"data-deleted":"".concat(e.deleted?1:0),"data-delayed":"".concat(e.delayed?1:0),"data-marked":"".concat(e.marked?1:0)},[a,n])};n.createTaskElement=o;function c(e){var t=e.id;return(0,l.createElement)("div",{className:"task-button task-prev","data-id":"".concat(t)},[(0,l.createElement)("i",{className:"icon-cheveron-up"})])}n.createTaskPrevElement=c;function u(e){var t=e.id;return(0,l.createElement)("div",{className:"task-button task-edit","data-id":"".concat(t)},[(0,l.createElement)("i",{className:"icon-edit-pencil"})])}n.createTaskEditElement=u;function d(e){var t=e.id;return(0,l.createElement)("div",{className:"task-button task-bookmark","data-id":"".concat(t)},[(0,l.createElement)("i",{className:"icon-bookmark"})])}n.createTaskMarkElement=d;function h(e){var t=e.id;return(0,l.createElement)("div",{className:"task-button task-delete","data-id":"".concat(t)},[(0,l.createElement)("i",{className:"icon-trash"})])}n.createTasKDeleteElement=h;function p(e){var t=e.id;return(0,l.createElement)("div",{className:"task-button task-replace","data-id":"".concat(t)},[(0,l.createElement)("i",{className:"icon-reload"})])}n.createTaskReplaceElement=p;function f(e){var t=e.id;return(0,l.createElement)("div",{className:"task-button task-next","data-id":"".concat(t)},[(0,l.createElement)("i",{className:"icon-cheveron-down"})])}n.createTaskNextElement=f;var m=function(e){var t=c(e),n=f(e),a=u(e),i=d(e),s=h(e),r=p(e);return(0,l.createElement)("div",{className:"task-side"},[t,a,i,r,s,n])};n.createTaskSideElement=m;function g(e){var t=e.level;return(0,l.createElement)("div",{className:"task-level task-level-".concat(t)},[(0,l.createElement)("i",{className:"icon-".concat(["spades","heart","clubs","diamonds"][t])})])}n.createTaskLevelElement=g;function v(e){return(0,l.createElement)("strong",{className:"task-title-text"},[(0,i.toSafeText)(e.title)])}n.createTaskTitleTextElement=v;function k(e){var t=e.id,n=v(e);return(0,l.createElement)("h3",{className:"task-title","data-id":"".concat(t)},["任务：",n])}n.createTaskTitleElement=k;function y(e){var t=g(e),n=k(e);return(0,l.createElement)("div",{className:"task-hd"},[n,t])}n.createTaskHeaderElement=y;function E(e){return(0,l.createElement)("div",{className:"task-desc"},[(0,s.default)((0,i.toSafeText)(e.desc))])}n.createTaskDescElement=E;function T(e){var t=E(e);return(0,l.createElement)("div",{className:"task-bd"},[t])}n.createTaskBodyElement=T;function C(e){return(0,l.createElement)("div",{className:"task-deadline"},[(0,l.createElement)("div",{className:"task-deadline-icon"},[(0,l.createElement)("i",{className:"icon-calendar"})]),(0,l.createElement)("p",{className:"task-deadline-text"},[e.deadline])])}n.createTaskDeadlineElement=C;function b(e){return(0,l.createElement)("div",{className:"task-estimate"},[(0,l.createElement)("div",{className:"task-estimate-icon"},[(0,l.createElement)("i",{className:"icon-clock"})]),(0,l.createElement)("p",{className:"task-estimate-text"},[e.estimate])])}n.createTaskEstimateElement=b;function _(e){var t=C(e),n=b(e);return(0,l.createElement)("div",{className:"task-ft"},[t,n])}n.createTaskFooterElement=_;var S=function(e){var t=y(e),n=T(e),a=_(e);return(0,l.createElement)("div",{className:"task-main"},[t,n,a])};n.createTaskMainElement=S;var x={createTaskPrevElement:c,createTaskEditElement:u,createTaskMarkElement:d,createTasKDeleteElement:h,createTaskReplaceElement:p,createTaskNextElement:f,createTaskSideElement:m,createTaskLevelElement:g,createTaskTitleTextElement:v,createTaskTitleElement:k,createTaskHeaderElement:y,createTaskDescElement:E,createTaskBodyElement:T,createTaskDeadlineElement:C,createTaskEstimateElement:b,createTaskFooterElement:_,createTaskMainElement:S,createTaskElement:o,getTasksFragment:r};n.default=x},{"./dom":18,"./utils":32,marked:9}],30:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,i=e("./delegate"),s=(a=e("./plan.emitter"))&&a.__esModule?a:{default:a},r=e("./dom");var l=document.querySelector("#toolbar"),o={initialize:function(e){return this.setFilter(e).addEventListeners(),this},_filter:"inbox",addEventListeners:function(){return(0,i.on)(l,".toolbar-plus","click",this._onPlusClick,this),(0,i.on)(l,".toolbar-inbox","click",this._onInBoxFilterClick,this),(0,i.on)(l,".toolbar-spades","click",this._onSpadesFilterClick,this),(0,i.on)(l,".toolbar-heart","click",this._onHeartFilterClick,this),(0,i.on)(l,".toolbar-clubs","click",this._onClubsFilterClick,this),(0,i.on)(l,".toolbar-diamonds","click",this._onDiamondsFilterClick,this),(0,i.on)(l,".toolbar-bookmark","click",this._onBookmarkFilterClick,this),(0,i.on)(l,".toolbar-trash","click",this._onTrashClick,this),(0,i.on)(l,".toolbar-setting","click",this._onSettingClick,this),s.default.on("toolbar.trash.toggle.highlight",this.trashToggleHighlight.bind(this)),s.default.on("toolbar.setting.toggle.highlight",this.settingToggleHighlight.bind(this)),this},removeEventListeners:function(){return(0,i.off)(l,"click",this._onPlusClick,this),(0,i.off)(l,"click",this._onInBoxFilterClick),(0,i.off)(l,"click",this._onSpadesFilterClick),(0,i.off)(l,"click",this._onHeartFilterClick),(0,i.off)(l,"click",this._onClubsFilterClick),(0,i.off)(l,"click",this._onDiamondsFilterClick),(0,i.off)(l,"click",this._onBookmarkFilterClick),(0,i.off)(l,"click",this._onTrashClick),(0,i.off)(l,"click",this._onSettingClick),s.default.off("toolbar.trash.toggle.highlight",this.trashToggleHighlight.bind(this)),s.default.off("toolbar.setting.toggle.highlight",this.settingToggleHighlight.bind(this)),this},getFilter:function(){return this._filter},setFilter:function(e){return this._filter=e,this},filter:function(e){var t,n="toolbar-active",a=e.getAttribute("data-filter");return(0,r.hasClass)(e,n)||(t=l.querySelector("."+n),(0,r.removeClass)(t,n),(0,r.addClass)(e,n),this.setFilter(a),s.default.emit("plan.filter",a),s.default.emit("plan.close.panels")),this},trashToggleHighlight:function(){return this.toggleHighlight(l.querySelector(".toolbar-trash")),this},settingToggleHighlight:function(){return this.toggleHighlight(l.querySelector(".toolbar-setting")),this},toggleHighlight:function(e){var t="toolbar-active";return(0,r.hasClass)(e,t)?(0,r.removeClass)(e,t):(0,r.addClass)(e,t),this},_onPlusClick:function(){return s.default.emit("panel.add.toggle"),this},_onInBoxFilterClick:function(e){return this.filter(e.delegateTarget),this},_onSpadesFilterClick:function(e){return this.filter(e.delegateTarget),this},_onHeartFilterClick:function(e){return this.filter(e.delegateTarget),this},_onClubsFilterClick:function(e){return this.filter(e.delegateTarget),this},_onDiamondsFilterClick:function(e){return this.filter(e.delegateTarget),this},_onBookmarkFilterClick:function(e){return this.filter(e.delegateTarget),this},_onTrashClick:function(){return s.default.emit("panel.trash.toggle"),this},_onSettingClick:function(){return s.default.emit("panel.setting.toggle"),this}};n.default=o},{"./delegate":17,"./dom":18,"./plan.emitter":21}],31:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.format=n.toAllSupported=n.isEqual=n.isDatesEqual=n.isToday=n.isLeapYear=n.getMoments=n.getRanges=n.getWeekRanges=n.getYears=n.getToday=n.getDay=n.getDate=n.getMonth=n.getYear=void 0;function o(e){var t=(e?new Date(p(e)):new Date).getFullYear();return{value:t,text:t.toString(),fullText:t+"年"}}var a=e("./utils");n.getYear=o;function c(e){var t=e?new Date(p(e)):new Date,n=o(e),a=t.getMonth();return{value:a+=1,text:n.text+"-"+a,fullText:n.fullText+a+"月"}}n.getMonth=c;function u(e){var t=e?new Date(p(e)):new Date,n=o(e),a=c(e),i=t.getDate(),s=m(e),r=n.value+"-"+a.value+"-"+i,l=a.fullText+i+"日";return{year:n.value,month:a.value,date:i,day:s.value,text:r,fullText:l+" "+s.fullText}}n.getDate=u;var m=function(e){var t=(e?new Date(p(e)):new Date).getDay(),n=["日","一","二","三","四","五","六"][t];return{value:t,text:n,fullText:"星期"+n}};n.getDay=m;function i(){return u()}n.getToday=i;function s(e){var t=o(e).value,n=t.toString().split(""),a=parseInt(n[n.length-1],10),i=0,s=0;return s=0===a?(i=t)+9:9===a?(i=t-9,t):(i=t-a,t+(9-a)),{start:i,end:s}}n.getYears=s;n.getWeekRanges=function(e){var t=[31,28,31,30,31,30,31,31,30,31,30,31],n=m(e).value,a=e.split("-"),i=parseInt(a[0],10),s=parseInt(a[1],10),r=parseInt(a[2],10),l=t[s-1],o=i,c=s,u=r-n,d=i,h=s,p=r+(6-n),f=0;return v(i)&&2===s&&(l+=1),u<1&&(c-=1,u=(f=s-2)<0?(o-=1,c=12,t[11]+u):t[f]+u),l<p&&(h+=1,p-=l,11<f&&(d+=1,h=1)),g(o+"-"+c+"-"+u,d+"-"+h+"-"+p)};var g=function(e,t){var n,a,i,s=[],r=e.split("-"),l=t.split("-"),o=new Date,c=new Date;for(o.setUTCFullYear(parseInt(r[0],10),parseInt(r[1],10)-1,parseInt(r[2],10)),c.setUTCFullYear(parseInt(l[0],10),parseInt(l[1],10)-1,parseInt(l[2],10)),n=o.getTime(),a=c.getTime(),i=n;i<=a;i+=864e5)s.push(u(i).text);return s};n.getRanges=g;function r(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,a=e.getDate(),i=e.getHours(),s=e.getMinutes(),r=e.getSeconds();return n<10&&(n="0"+n),a<10&&(a="0"+a),i<10&&(i="0"+i),s<10&&(s="0"+s),r<10&&(r="0"+r),t+"-"+n+"-"+a+" "+i+":"+s+":"+r}n.getMoments=r;var v=function(e){return(e%4==0||e%400==0)&&e%100!=0};n.isLeapYear=v;function l(e){return d(e)}n.isToday=l;var d=function(e,t){return h(u(e).text,u(t).text)};n.isDatesEqual=d;var h=function(e,t){return new Date(p(e)).getTime()===new Date(p(t)).getTime()};n.isEqual=h;var p=function(e){var t=[];return(0,a.isNumber)(e)?e:(0,a.isString)(e)?(e.indexOf("-")?t=e.split("-"):e.indexOf("/")&&(t=e.split("/")),1===t.length?(t.push("1"),t.push("1")):2===t.length&&(4===t[0].length?t.push("1"):4===t[1].length&&t.unshift("1")),t.join("/")):void 0};n.toAllSupported=p;function f(e,t){var n=new Date(p(e)),a={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math.floor((n.getMonth()+3)/3),S:n.getMilliseconds()};return/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(n.getFullYear()+"").substring(4-RegExp.$1.length))),Object.keys(a).forEach(function(e){new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?a[e]:("00"+a[e]).substring((""+a[e]).length)))}),t}n.format=f;var k={getYear:o,getMonth:c,getDate:u,getDay:m,getToday:i,getYears:s,getRanges:g,getMoments:r,format:f,isLeapYear:v,isToday:l,isDatesEqual:d,isEqual:h};n.default=k},{"./utils":32}],32:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.guid=n.assign=n.clone=n.toSafeText=n.stripScripts=n.stripTags=n.trim=n.isElement=n.isFunction=n.isArray=n.isNumber=n.isString=void 0;function a(e){return"string"==typeof e}n.isString=a;function i(e){return"number"==typeof e}n.isNumber=i;function s(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.apply(e)}n.isArray=s;function r(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.apply(e)}n.isFunction=r;function l(e){return e&&e.nodeName&&e.tagName&&1===e.nodeType}n.isElement=l;function o(e){return e.replace(/^\s+/g,"").replace(/\s+$/g,"")}n.trim=o;function c(e){return e.replace(/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?(\/)?>|<\/\w+>/gi,"")}n.stripTags=c;function u(e){return e.replace(new RegExp("<script[^>]*>([\\S\\s]*?)</script\\s*>","img"),"")}n.stripScripts=u;function d(e){return o(c(u(e)))}n.toSafeText=d;function h(e){return JSON.parse(JSON.stringify(e))}n.clone=h;function p(e){var t;if(null==e)throw new TypeError("Cannot convert undefined or null to object");t=Object(e);for(var n=0;n<(arguments.length<=1?0:arguments.length-1);n++){var a=n+1<1||arguments.length<=n+1?void 0:arguments[n+1];if(null!=a)for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t}n.assign=p;function f(e,t){var n,a,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),s=[];if(t=t||i.length,e)for(n=0;n<e;n++)s[n]=i[0|Math.random()*t];else for(s[8]=s[13]=s[18]=s[23]="-",s[14]="4",n=0;n<36;n++)s[n]||(a=0|16*Math.random(),s[n]=i[19===n?3&a|8:a]);return s.join("")}n.guid=f;var m={isArray:s,isElement:l,isFunction:r,isNumber:i,isString:a,trim:o,stripScripts:u,stripTags:c,toSafeText:d,clone:h,assign:p,guid:f};n.default=m},{}]},{},[14]);
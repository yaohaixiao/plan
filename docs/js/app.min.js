!function s(r,l,o){function c(t,e){if(!l[t]){if(!r[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}var i=l[t]={exports:{}};r[t][0].call(i.exports,function(e){return c(r[t][1][e]||e)},i,i.exports,s,r,l,o)}return l[t].exports}for(var u="function"==typeof require&&require,e=0;e<o.length;e++)c(o[e]);return c}({1:[function(e,t,n){t.exports=function(e,t){return Array.prototype.slice.call(e,t)}},{}],2:[function(e,t,n){"use strict";var a=e("ticky");t.exports=function(e,t,n){e&&a(function(){e.apply(n||null,t||[])})}},{ticky:11}],3:[function(e,t,n){"use strict";var l=e("atoa"),o=e("./debounce");t.exports=function(i,e){var s=e||{},r={};return void 0===i&&(i={}),i.on=function(e,t){return r[e]?r[e].push(t):r[e]=[t],i},i.once=function(e,t){return t._once=!0,i.on(e,t),i},i.off=function(e,t){var n=arguments.length;if(1===n)delete r[e];else if(0===n)r={};else{var a=r[e];if(!a)return i;a.splice(a.indexOf(t),1)}return i},i.emit=function(){var e=l(arguments);return i.emitterSnapshot(e.shift()).apply(this,e)},i.emitterSnapshot=function(a){var e=(r[a]||[]).slice(0);return function(){var t=l(arguments),n=this||i;if("error"===a&&!1!==s.throws&&!e.length)throw 1===t.length?t[0]:t;return e.forEach(function(e){s.async?o(e,t,n):e.apply(n,t),e._once&&i.off(a,e)}),i}},i}},{"./debounce":2,atoa:1}],4:[function(n,a,e){(function(i){"use strict";var s=n("custom-event"),r=n("./eventmap"),l=i.document,e=function(e,t,n,a){return e.addEventListener(t,n,a)},t=function(e,t,n,a){return e.removeEventListener(t,n,a)},o=[];function c(e,t,n){var a=function(e,t,n){var a,i;for(a=0;a<o.length;a++)if((i=o[a]).element===e&&i.type===t&&i.fn===n)return a}(e,t,n);if(a){var i=o[a].wrapper;return o.splice(a,1),i}}i.addEventListener||(e=function(e,t,n){return e.attachEvent("on"+t,function(e,t,n){var a=c(e,t,n)||function(n,e,a){return function(e){var t=e||i.event;t.target=t.target||t.srcElement,t.preventDefault=t.preventDefault||function(){t.returnValue=!1},t.stopPropagation=t.stopPropagation||function(){t.cancelBubble=!0},t.which=t.which||t.keyCode,a.call(n,t)}}(e,0,n);return o.push({wrapper:a,element:e,type:t,fn:n}),a}(e,t,n))},t=function(e,t,n){var a=c(e,t,n);if(a)return e.detachEvent("on"+t,a)}),a.exports={add:e,remove:t,fabricate:function(e,t,n){var a=-1===r.indexOf(t)?new s(t,{detail:n}):function(){var e;l.createEvent?(e=l.createEvent("Event")).initEvent(t,!0,!0):l.createEventObject&&(e=l.createEventObject());return e}();e.dispatchEvent?e.dispatchEvent(a):e.fireEvent("on"+t,a)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./eventmap":5,"custom-event":6}],5:[function(e,i,t){(function(e){"use strict";var t=[],n="",a=/^on/;for(n in e)a.test(n)&&t.push(n.slice(2));i.exports=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,n,t){(function(e){var t=e.CustomEvent;n.exports=function(){try{var e=new t("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}()?t:"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(e,t,n){"use strict";var a={},i="(?:^|\\s)",s="(?:\\s|$)";function r(e){var t=a[e];return t?t.lastIndex=0:a[e]=t=new RegExp(i+e+s,"g"),t}t.exports={add:function(e,t){var n=e.className;n.length?r(t).test(n)||(e.className+=" "+t):e.className=t},rm:function(e,t){e.className=e.className.replace(r(t)," ").trim()}}},{}],8:[function(e,t,n){(function(i){"use strict";var B=e("contra/emitter"),O=e("crossvent"),F=e("./classes"),H=document,$=H.documentElement;function z(e,t,n,a){i.navigator.pointerEnabled?O[t](e,{mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"}[n],a):i.navigator.msPointerEnabled?O[t](e,{mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"}[n],a):(O[t](e,{mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"}[n],a),O[t](e,n,a))}function V(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var t=e.button;return void 0!==t?1&t?1:2&t?3:4&t?2:0:void 0}function j(e,t){return void 0!==i[t]?i[t]:$.clientHeight?$[e]:H.body[e]}function X(e,t,n){var a,i=e||{},s=i.className;return i.className+=" gu-hide",a=H.elementFromPoint(t,n),i.className=s,a}function U(){return!1}function K(){return!0}function W(e){return e.width||e.right-e.left}function Z(e){return e.height||e.bottom-e.top}function G(e){return e.parentNode===H?null:e.parentNode}function J(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||function e(t){if(!t)return!1;if("false"===t.contentEditable)return!1;if("true"===t.contentEditable)return!0;return e(G(t))}(e)}function Q(t){return t.nextElementSibling||function(){var e=t;for(;e=e.nextSibling,e&&1!==e.nodeType;);return e}()}function ee(e,t){var n=function(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}(t),a={pageX:"clientX",pageY:"clientY"};return e in a&&!(e in n)&&a[e]in n&&(e=a[e]),n[e]}t.exports=function(e,t){var p,m,f,g,v,s,r,k,y,E,n;1===arguments.length&&!1===Array.isArray(e)&&(t=e,e=[]);var l,C=null,T=t||{};void 0===T.moves&&(T.moves=K),void 0===T.accepts&&(T.accepts=K),void 0===T.invalid&&(T.invalid=function(){return!1}),void 0===T.containers&&(T.containers=e||[]),void 0===T.isContainer&&(T.isContainer=U),void 0===T.copy&&(T.copy=!1),void 0===T.copySortSource&&(T.copySortSource=!1),void 0===T.revertOnSpill&&(T.revertOnSpill=!1),void 0===T.removeOnSpill&&(T.removeOnSpill=!1),void 0===T.direction&&(T.direction="vertical"),void 0===T.ignoreInputTextSelection&&(T.ignoreInputTextSelection=!0),void 0===T.mirrorContainer&&(T.mirrorContainer=H.body);var b=B({containers:T.containers,start:function(e){var t=S(e);t&&_(t)},end:w,cancel:A,remove:N,destroy:function(){a(!0),x({})},canMove:function(e){return!!S(e)},dragging:!1});return!0===T.removeOnSpill&&b.on("over",function(e){F.rm(e,"gu-hide")}).on("out",function(e){b.dragging&&F.add(e,"gu-hide")}),a(),b;function o(e){return-1!==b.containers.indexOf(e)||T.isContainer(e)}function a(e){var t=e?"remove":"add";z($,t,"mousedown",d),z($,t,"mouseup",x)}function c(e){z($,e?"remove":"add","mousemove",h)}function u(e){var t=e?"remove":"add";O[t]($,"selectstart",i),O[t]($,"click",i)}function i(e){l&&e.preventDefault()}function d(e){if(s=e.clientX,r=e.clientY,!(1!==V(e)||e.metaKey||e.ctrlKey)){var t=e.target,n=S(t);n&&(l=n,c(),"mousedown"===e.type&&(J(t)?t.focus():e.preventDefault()))}}function h(e){if(l)if(0!==V(e)){if(void 0===e.clientX||e.clientX!==s||void 0===e.clientY||e.clientY!==r){if(T.ignoreInputTextSelection){var t=ee("clientX",e),n=ee("clientY",e);if(J(H.elementFromPoint(t,n)))return}var a=l;c(!0),u(),w(),_(a);var i=function(e){var t=e.getBoundingClientRect();return{left:t.left+j("scrollLeft","pageXOffset"),top:t.top+j("scrollTop","pageYOffset")}}(f);g=ee("pageX",e)-i.left,v=ee("pageY",e)-i.top,F.add(E||f,"gu-transit"),function(){if(p)return;var e=f.getBoundingClientRect();(p=f.cloneNode(!0)).style.width=W(e)+"px",p.style.height=Z(e)+"px",F.rm(p,"gu-transit"),F.add(p,"gu-mirror"),T.mirrorContainer.appendChild(p),z($,"add","mousemove",I),F.add(T.mirrorContainer,"gu-unselectable"),b.emit("cloned",p,f,"mirror")}(),I(e)}}else x({})}function S(e){if(!(b.dragging&&p||o(e))){for(var t=e;G(e)&&!1===o(G(e));){if(T.invalid(e,t))return;if(!(e=G(e)))return}var n=G(e);if(n)if(!T.invalid(e,t))if(T.moves(e,n,t,Q(e)))return{item:e,source:n}}}function _(e){!function(e,t){return"boolean"==typeof T.copy?T.copy:T.copy(e,t)}(e.item,e.source)||(E=e.item.cloneNode(!0),b.emit("cloned",E,e.item,"copy")),m=e.source,f=e.item,k=y=Q(e.item),b.dragging=!0,b.emit("drag",f,m)}function w(){if(b.dragging){var e=E||f;D(e,G(e))}}function P(){c(!(l=!1)),u(!0)}function x(e){if(P(),b.dragging){var t=E||f,n=ee("clientX",e),a=ee("clientY",e),i=q(X(p,n,a),n,a);i&&(E&&T.copySortSource||!E||i!==m)?D(t,i):T.removeOnSpill?N():A()}}function D(e,t){var n=G(e);E&&T.copySortSource&&t===m&&n.removeChild(f),L(t)?b.emit("cancel",e,m,m):b.emit("drop",e,t,m,y),M()}function N(){if(b.dragging){var e=E||f,t=G(e);t&&t.removeChild(e),b.emit(E?"cancel":"remove",e,t,m),M()}}function A(e){if(b.dragging){var t=0<arguments.length?e:T.revertOnSpill,n=E||f,a=G(n),i=L(a);!1===i&&t&&(E?a&&a.removeChild(E):m.insertBefore(n,k)),i||t?b.emit("cancel",n,m,m):b.emit("drop",n,a,m,y),M()}}function M(){var e=E||f;P(),p&&(F.rm(T.mirrorContainer,"gu-unselectable"),z($,"remove","mousemove",I),G(p).removeChild(p),p=null),e&&F.rm(e,"gu-transit"),n&&clearTimeout(n),b.dragging=!1,C&&b.emit("out",e,C,m),b.emit("dragend",e),m=f=E=k=y=n=C=null}function L(e,t){var n;return n=void 0!==t?t:p?y:Q(E||f),e===m&&n===k}function q(n,a,i){for(var s=n;s&&!e();)s=G(s);return s;function e(){if(!1===o(s))return!1;var e=Y(s,n),t=R(s,e,a,i);return!!L(s,t)||T.accepts(f,s,m,t)}}function I(e){if(p){e.preventDefault();var t=ee("clientX",e),n=ee("clientY",e),a=t-g,i=n-v;p.style.left=a+"px",p.style.top=i+"px";var s=E||f,r=X(p,t,n),l=q(r,t,n),o=null!==l&&l!==C;!o&&null!==l||(C&&h("out"),C=l,o&&h("over"));var c=G(s);if(l!==m||!E||T.copySortSource){var u,d=Y(l,r);if(null!==d)u=R(l,d,t,n);else{if(!0!==T.revertOnSpill||E)return void(E&&c&&c.removeChild(s));u=k,l=m}(null===u&&o||u!==s&&u!==Q(s))&&(y=u,l.insertBefore(s,u),b.emit("shadow",s,l,m))}else c&&c.removeChild(s)}function h(e){b.emit(e,s,C,m)}}function Y(e,t){for(var n=t;n!==e&&G(n)!==e;)n=G(n);return n===$?null:n}function R(i,t,s,r){var l="horizontal"===T.direction;return t!==i?function(){var e=t.getBoundingClientRect();if(l)return n(s>e.left+W(e)/2);return n(r>e.top+Z(e)/2)}():function(){var e,t,n,a=i.children.length;for(e=0;e<a;e++){if(t=i.children[e],n=t.getBoundingClientRect(),l&&n.left+n.width/2>s)return t;if(!l&&n.top+n.height/2>r)return t}return null}();function n(e){return e?Q(t):t}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./classes":7,"contra/emitter":3,crossvent:4}],9:[function(e,k,b){(function(e){!function(e){"use strict";var y={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}|~{3,})([^`~\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:p,table:p,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/};function o(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||v.defaults,this.rules=y.normal,this.options.pedantic?this.rules=y.pedantic:this.options.gfm&&(this.rules=y.gfm)}y._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,y._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,y.def=s(y.def).replace("label",y._label).replace("title",y._title).getRegex(),y.bullet=/(?:[*+-]|\d{1,9}\.)/,y.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,y.item=s(y.item,"gm").replace(/bull/g,y.bullet).getRegex(),y.list=s(y.list).replace(/bull/g,y.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+y.def.source+")").getRegex(),y._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",y._comment=/<!--(?!-?>)[\s\S]*?-->/,y.html=s(y.html,"i").replace("comment",y._comment).replace("tag",y._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),y.paragraph=s(y._paragraph).replace("hr",y.hr).replace("heading"," {0,3}#{1,6} +").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}|~{3,})[^`\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",y._tag).getRegex(),y.blockquote=s(y.blockquote).replace("paragraph",y.paragraph).getRegex(),y.normal=m({},y),y.gfm=m({},y.normal,{nptable:/^ *([^|\n ].*\|.*)\n *([-:]+ *\|[-| :]*)(?:\n((?:.*[^>\n ].*(?:\n|$))*)\n*|$)/,table:/^ *\|(.+)\n *\|?( *[-:]+[-| :]*)(?:\n((?: *[^>\n ].*(?:\n|$))*)\n*|$)/}),y.pedantic=m({},y.normal,{html:s("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",y._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:p,paragraph:s(y.normal._paragraph).replace("hr",y.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",y.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()}),o.rules=y,o.lex=function(e,t){return new o(t).lex(e)},o.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},o.prototype.token=function(e,t){var n,a,i,s,r,l,o,c,u,d,h,p,m,f,g,v;for(e=e.replace(/^ +$/gm,"");e;)if((i=this.rules.newline.exec(e))&&(e=e.substring(i[0].length),1<i[0].length&&this.tokens.push({type:"space"})),i=this.rules.code.exec(e)){var k=this.tokens[this.tokens.length-1];e=e.substring(i[0].length),k&&"paragraph"===k.type?k.text+="\n"+i[0].trimRight():(i=i[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",codeBlockStyle:"indented",text:this.options.pedantic?i:T(i,"\n")}))}else if(i=this.rules.fences.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"code",lang:i[2]?i[2].trim():i[2],text:i[3]||""});else if(i=this.rules.heading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:i[1].length,text:i[2]});else if((i=this.rules.nptable.exec(e))&&(l={type:"table",header:C(i[1].replace(/^ *| *\| *$/g,"")),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3]?i[3].replace(/\n$/,"").split("\n"):[]}).header.length===l.align.length){for(e=e.substring(i[0].length),h=0;h<l.align.length;h++)/^ *-+: *$/.test(l.align[h])?l.align[h]="right":/^ *:-+: *$/.test(l.align[h])?l.align[h]="center":/^ *:-+ *$/.test(l.align[h])?l.align[h]="left":l.align[h]=null;for(h=0;h<l.cells.length;h++)l.cells[h]=C(l.cells[h],l.header.length);this.tokens.push(l)}else if(i=this.rules.hr.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"hr"});else if(i=this.rules.blockquote.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"blockquote_start"}),i=i[0].replace(/^ *> ?/gm,""),this.token(i,t),this.tokens.push({type:"blockquote_end"});else if(i=this.rules.list.exec(e)){for(e=e.substring(i[0].length),o={type:"list_start",ordered:f=1<(s=i[2]).length,start:f?+s:"",loose:!1},this.tokens.push(o),n=!(c=[]),m=(i=i[0].match(this.rules.item)).length,h=0;h<m;h++)d=(l=i[h]).length,~(l=l.replace(/^ *([*+-]|\d+\.) */,"")).indexOf("\n ")&&(d-=l.length,l=this.options.pedantic?l.replace(/^ {1,4}/gm,""):l.replace(new RegExp("^ {1,"+d+"}","gm"),"")),h!==m-1&&(r=y.bullet.exec(i[h+1])[0],(1<s.length?1===r.length:1<r.length||this.options.smartLists&&r!==s)&&(e=i.slice(h+1).join("\n")+e,h=m-1)),a=n||/\n\n(?!\s*$)/.test(l),h!==m-1&&(n="\n"===l.charAt(l.length-1),a=a||n),a&&(o.loose=!0),v=void 0,(g=/^\[[ xX]\] /.test(l))&&(v=" "!==l[1],l=l.replace(/^\[[ xX]\] +/,"")),u={type:"list_item_start",task:g,checked:v,loose:a},c.push(u),this.tokens.push(u),this.token(l,!1),this.tokens.push({type:"list_item_end"});if(o.loose)for(m=c.length,h=0;h<m;h++)c[h].loose=!0;this.tokens.push({type:"list_end"})}else if(i=this.rules.html.exec(e))e=e.substring(i[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===i[1]||"script"===i[1]||"style"===i[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):E(i[0]):i[0]});else if(t&&(i=this.rules.def.exec(e)))e=e.substring(i[0].length),i[3]&&(i[3]=i[3].substring(1,i[3].length-1)),p=i[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[p]||(this.tokens.links[p]={href:i[2],title:i[3]});else if((i=this.rules.table.exec(e))&&(l={type:"table",header:C(i[1].replace(/^ *| *\| *$/g,"")),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3]?i[3].replace(/\n$/,"").split("\n"):[]}).header.length===l.align.length){for(e=e.substring(i[0].length),h=0;h<l.align.length;h++)/^ *-+: *$/.test(l.align[h])?l.align[h]="right":/^ *:-+: *$/.test(l.align[h])?l.align[h]="center":/^ *:-+ *$/.test(l.align[h])?l.align[h]="left":l.align[h]=null;for(h=0;h<l.cells.length;h++)l.cells[h]=C(l.cells[h].replace(/^ *\| *| *\| *$/g,""),l.header.length);this.tokens.push(l)}else if(i=this.rules.lheading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:"="===i[2].charAt(0)?1:2,text:i[1]});else if(t&&(i=this.rules.paragraph.exec(e)))e=e.substring(i[0].length),this.tokens.push({type:"paragraph",text:"\n"===i[1].charAt(i[1].length-1)?i[1].slice(0,-1):i[1]});else if(i=this.rules.text.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"text",text:i[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var n={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:p,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*<\[])\*(?!\*)|^_([^\s<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s<"][\s\S]*?[^\s\*])\*(?!\*|[^\spunctuation])|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:p,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/};function u(e,t){if(this.options=t||v.defaults,this.links=e,this.rules=n.normal,this.renderer=this.options.renderer||new a,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=n.pedantic:this.options.gfm&&(this.options.breaks?this.rules=n.breaks:this.rules=n.gfm)}function a(e){this.options=e||v.defaults}function i(){}function c(e){this.tokens=[],this.token=null,this.options=e||v.defaults,this.options.renderer=this.options.renderer||new a,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new t}function t(){this.seen={}}function E(e,t){if(t){if(E.escapeTest.test(e))return e.replace(E.escapeReplace,function(e){return E.replacements[e]})}else if(E.escapeTestNoEncode.test(e))return e.replace(E.escapeReplaceNoEncode,function(e){return E.replacements[e]});return e}function h(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}function s(n,e){return n=n.source||n,e=e||"",{replace:function(e,t){return t=(t=t.source||t).replace(/(^|[^\[])\^/g,"$1"),n=n.replace(e,t),this},getRegex:function(){return new RegExp(n,e)}}}function r(e,t,n){if(e){try{var a=decodeURIComponent(h(n)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return null}if(0===a.indexOf("javascript:")||0===a.indexOf("vbscript:")||0===a.indexOf("data:"))return null}t&&!d.test(n)&&(n=function(e,t){l[" "+e]||(/^[^:]+:\/*[^/]*$/.test(e)?l[" "+e]=e+"/":l[" "+e]=T(e,"/",!0));return e=l[" "+e],"//"===t.slice(0,2)?e.replace(/:[\s\S]*/,":")+t:"/"===t.charAt(0)?e.replace(/(:\/*[^/]*)[\s\S]*/,"$1")+t:e+t}(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(e){return null}return n}n._punctuation="!\"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~",n.em=s(n.em).replace(/punctuation/g,n._punctuation).getRegex(),n._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,n._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,n._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,n.autolink=s(n.autolink).replace("scheme",n._scheme).replace("email",n._email).getRegex(),n._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,n.tag=s(n.tag).replace("comment",y._comment).replace("attribute",n._attribute).getRegex(),n._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,n._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,n._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,n.link=s(n.link).replace("label",n._label).replace("href",n._href).replace("title",n._title).getRegex(),n.reflink=s(n.reflink).replace("label",n._label).getRegex(),n.normal=m({},n),n.pedantic=m({},n.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:s(/^!?\[(label)\]\((.*?)\)/).replace("label",n._label).getRegex(),reflink:s(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",n._label).getRegex()}),n.gfm=m({},n.normal,{escape:s(n.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),n.gfm.url=s(n.gfm.url,"i").replace("email",n.gfm._extended_email).getRegex(),n.breaks=m({},n.gfm,{br:s(n.br).replace("{2,}","*").getRegex(),text:s(n.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),u.rules=n,u.output=function(e,t,n){return new u(t,n).output(e)},u.prototype.output=function(e){for(var t,n,a,i,s,r,l="";e;)if(s=this.rules.escape.exec(e))e=e.substring(s[0].length),l+=E(s[1]);else if(s=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(s[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(s[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(s[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(s[0])&&(this.inRawBlock=!1),e=e.substring(s[0].length),l+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):E(s[0]):s[0];else if(s=this.rules.link.exec(e)){var o=f(s[2],"()");if(-1<o){var c=4+s[1].length+o;s[2]=s[2].substring(0,o),s[0]=s[0].substring(0,c).trim(),s[3]=""}e=e.substring(s[0].length),this.inLink=!0,a=s[2],i=this.options.pedantic?(t=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(a))?(a=t[1],t[3]):"":s[3]?s[3].slice(1,-1):"",a=a.trim().replace(/^<([\s\S]*)>$/,"$1"),l+=this.outputLink(s,{href:u.escapes(a),title:u.escapes(i)}),this.inLink=!1}else if((s=this.rules.reflink.exec(e))||(s=this.rules.nolink.exec(e))){if(e=e.substring(s[0].length),t=(s[2]||s[1]).replace(/\s+/g," "),!(t=this.links[t.toLowerCase()])||!t.href){l+=s[0].charAt(0),e=s[0].substring(1)+e;continue}this.inLink=!0,l+=this.outputLink(s,t),this.inLink=!1}else if(s=this.rules.strong.exec(e))e=e.substring(s[0].length),l+=this.renderer.strong(this.output(s[4]||s[3]||s[2]||s[1]));else if(s=this.rules.em.exec(e))e=e.substring(s[0].length),l+=this.renderer.em(this.output(s[6]||s[5]||s[4]||s[3]||s[2]||s[1]));else if(s=this.rules.code.exec(e))e=e.substring(s[0].length),l+=this.renderer.codespan(E(s[2].trim(),!0));else if(s=this.rules.br.exec(e))e=e.substring(s[0].length),l+=this.renderer.br();else if(s=this.rules.del.exec(e))e=e.substring(s[0].length),l+=this.renderer.del(this.output(s[1]));else if(s=this.rules.autolink.exec(e))e=e.substring(s[0].length),a="@"===s[2]?"mailto:"+(n=E(this.mangle(s[1]))):n=E(s[1]),l+=this.renderer.link(a,null,n);else if(this.inLink||!(s=this.rules.url.exec(e))){if(s=this.rules.text.exec(e))e=e.substring(s[0].length),this.inRawBlock?l+=this.renderer.text(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):E(s[0]):s[0]):l+=this.renderer.text(E(this.smartypants(s[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else{if("@"===s[2])a="mailto:"+(n=E(s[0]));else{for(;r=s[0],s[0]=this.rules._backpedal.exec(s[0])[0],r!==s[0];);n=E(s[0]),a="www."===s[1]?"http://"+n:n}e=e.substring(s[0].length),l+=this.renderer.link(a,null,n)}return l},u.escapes=function(e){return e?e.replace(u.rules._escapes,"$1"):e},u.prototype.outputLink=function(e,t){var n=t.href,a=t.title?E(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,a,this.output(e[1])):this.renderer.image(n,a,E(e[1]))},u.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},u.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,n="",a=e.length,i=0;i<a;i++)t=e.charCodeAt(i),.5<Math.random()&&(t="x"+t.toString(16)),n+="&#"+t+";";return n},a.prototype.code=function(e,t,n){var a=(t||"").match(/\S*/)[0];if(this.options.highlight){var i=this.options.highlight(e,a);null!=i&&i!==e&&(n=!0,e=i)}return a?'<pre><code class="'+this.options.langPrefix+E(a,!0)+'">'+(n?e:E(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:E(e,!0))+"</code></pre>"},a.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},a.prototype.html=function(e){return e},a.prototype.heading=function(e,t,n,a){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+a.slug(n)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},a.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},a.prototype.list=function(e,t,n){var a=t?"ol":"ul";return"<"+a+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+a+">\n"},a.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},a.prototype.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},a.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},a.prototype.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n"+(t=t&&"<tbody>"+t+"</tbody>")+"</table>\n"},a.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},a.prototype.tablecell=function(e,t){var n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"},a.prototype.strong=function(e){return"<strong>"+e+"</strong>"},a.prototype.em=function(e){return"<em>"+e+"</em>"},a.prototype.codespan=function(e){return"<code>"+e+"</code>"},a.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},a.prototype.del=function(e){return"<del>"+e+"</del>"},a.prototype.link=function(e,t,n){if(null===(e=r(this.options.sanitize,this.options.baseUrl,e)))return n;var a='<a href="'+E(e)+'"';return t&&(a+=' title="'+t+'"'),a+=">"+n+"</a>"},a.prototype.image=function(e,t,n){if(null===(e=r(this.options.sanitize,this.options.baseUrl,e)))return n;var a='<img src="'+e+'" alt="'+n+'"';return t&&(a+=' title="'+t+'"'),a+=this.options.xhtml?"/>":">"},a.prototype.text=function(e){return e},i.prototype.strong=i.prototype.em=i.prototype.codespan=i.prototype.del=i.prototype.text=function(e){return e},i.prototype.link=i.prototype.image=function(e,t,n){return""+n},i.prototype.br=function(){return""},c.parse=function(e,t){return new c(t).parse(e)},c.prototype.parse=function(e){this.inline=new u(e.links,this.options),this.inlineText=new u(e.links,m({},this.options,{renderer:new i})),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},c.prototype.next=function(){return this.token=this.tokens.pop(),this.token},c.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},c.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},c.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,h(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,n,a,i="",s="";for(n="",e=0;e<this.token.header.length;e++)n+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(i+=this.renderer.tablerow(n),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],n="",a=0;a<t.length;a++)n+=this.renderer.tablecell(this.inline.output(t[a]),{header:!1,align:this.token.align[a]});s+=this.renderer.tablerow(n)}return this.renderer.table(i,s);case"blockquote_start":for(s="";"blockquote_end"!==this.next().type;)s+=this.tok();return this.renderer.blockquote(s);case"list_start":s="";for(var r=this.token.ordered,l=this.token.start;"list_end"!==this.next().type;)s+=this.tok();return this.renderer.list(s,r,l);case"list_item_start":s="";var o=this.token.loose,c=this.token.checked,u=this.token.task;for(this.token.task&&(s+=this.renderer.checkbox(c));"list_item_end"!==this.next().type;)s+=o||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(s,u,c);case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:var d='Token with "'+this.token.type+'" type was not found.';if(!this.options.silent)throw new Error(d);console.log(d)}},t.prototype.slug=function(e){var t=e.toLowerCase().trim().replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(t))for(var n=t;this.seen[n]++,t=n+"-"+this.seen[n],this.seen.hasOwnProperty(t););return this.seen[t]=0,t},E.escapeTest=/[&<>"']/,E.escapeReplace=/[&<>"']/g,E.replacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},E.escapeTestNoEncode=/[<>"']|&(?!#?\w+;)/,E.escapeReplaceNoEncode=/[<>"']|&(?!#?\w+;)/g;var l={},d=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function p(){}function m(e){for(var t,n,a=1;a<arguments.length;a++)for(n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function C(e,t){var n=e.replace(/\|/g,function(e,t,n){for(var a=!1,i=t;0<=--i&&"\\"===n[i];)a=!a;return a?"|":" |"}).split(/ \|/),a=0;if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;a<n.length;a++)n[a]=n[a].trim().replace(/\\\|/g,"|");return n}function T(e,t,n){if(0===e.length)return"";for(var a=0;a<e.length;){var i=e.charAt(e.length-a-1);if(i!==t||n){if(i===t||!n)break;a++}else a++}return e.substr(0,e.length-a)}function f(e,t){if(-1===e.indexOf(t[1]))return-1;for(var n=0,a=0;a<e.length;a++)if("\\"===e[a])a++;else if(e[a]===t[0])n++;else if(e[a]===t[1]&&--n<0)return a;return-1}function g(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function v(e,n,a){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(a||"function"==typeof n){a||(a=n,n=null),g(n=m({},v.defaults,n||{}));var i,s,r=n.highlight,t=0;try{i=o.lex(e,n)}catch(e){return a(e)}s=i.length;var l=function(t){if(t)return n.highlight=r,a(t);var e;try{e=c.parse(i,n)}catch(e){t=e}return n.highlight=r,t?a(t):a(null,e)};if(!r||r.length<3)return l();if(delete n.highlight,!s)return l();for(;t<i.length;t++)!function(n){"code"!==n.type?--s||l():r(n.text,n.lang,function(e,t){return e?l(e):null==t||t===n.text?--s||l():(n.text=t,n.escaped=!0,void(--s||l()))})}(i[t])}else try{return g(n=n&&m({},v.defaults,n)),c.parse(o.lex(e,n),n)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",(n||v.defaults).silent)return"<p>An error occurred:</p><pre>"+E(e.message+"",!0)+"</pre>";throw e}}p.exec=p,v.options=v.setOptions=function(e){return m(v.defaults,e),v},v.getDefaults=function(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:new a,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1}},v.defaults=v.getDefaults(),v.Parser=c,v.parser=c.parse,v.Renderer=a,v.TextRenderer=i,v.Lexer=o,v.lexer=o.lex,v.InlineLexer=u,v.inlineLexer=u.output,v.Slugger=t,v.parse=v,void 0!==k&&"object"==typeof b?k.exports=v:"function"==typeof define&&define.amd?define(function(){return v}):e.marked=v}(this||("undefined"!=typeof window?window:e))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],10:[function(e,t,n){var a,i,s=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}function o(t){if(a===setTimeout)return setTimeout(t,0);if((a===r||!a)&&setTimeout)return a=setTimeout,setTimeout(t,0);try{return a(t,0)}catch(e){try{return a.call(null,t,0)}catch(e){return a.call(this,t,0)}}}!function(){try{a="function"==typeof setTimeout?setTimeout:r}catch(e){a=r}try{i="function"==typeof clearTimeout?clearTimeout:l}catch(e){i=l}}();var c,u=[],d=!1,h=-1;function p(){d&&c&&(d=!1,c.length?u=c.concat(u):h=-1,u.length&&m())}function m(){if(!d){var e=o(p);d=!0;for(var t=u.length;t;){for(c=u,u=[];++h<t;)c&&c[h].run();h=-1,t=u.length}c=null,d=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===l||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function g(){}s.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new f(e,t)),1!==u.length||d||o(m)},f.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=g,s.addListener=g,s.once=g,s.off=g,s.removeListener=g,s.removeAllListeners=g,s.emit=g,s.prependListener=g,s.prependOnceListener=g,s.listeners=function(e){return[]},s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],11:[function(e,n,t){(function(t){var e;e="function"==typeof t?function(e){t(e)}:function(e){setTimeout(e,0)},n.exports=e}).call(this,e("timers").setImmediate)},{timers:12}],12:[function(o,e,c){(function(e,t){var a=o("process/browser.js").nextTick,n=Function.prototype.apply,i=Array.prototype.slice,s={},r=0;function l(e,t){this._id=e,this._clearFn=t}c.setTimeout=function(){return new l(n.call(setTimeout,window,arguments),clearTimeout)},c.setInterval=function(){return new l(n.call(setInterval,window,arguments),clearInterval)},c.clearTimeout=c.clearInterval=function(e){e.close()},l.prototype.unref=l.prototype.ref=function(){},l.prototype.close=function(){this._clearFn.call(window,this._id)},c.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},c.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},c._unrefActive=c.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},c.setImmediate="function"==typeof e?e:function(e){var t=r++,n=!(arguments.length<2)&&i.call(arguments,1);return s[t]=!0,a(function(){s[t]&&(n?e.apply(null,n):e.call(null),c.clearImmediate(t))}),t},c.clearImmediate="function"==typeof t?t:function(e){delete s[e]}}).call(this,o("timers").setImmediate,o("timers").clearImmediate)},{"process/browser.js":10,timers:12}],13:[function(e,t,n){"use strict";var a,i=e("./config"),s=(a=e("./plan"))&&a.__esModule?a:{default:a};var r=localStorage.getItem("plan.template"),l=localStorage.getItem("plan.theme"),o=localStorage.getItem("plan.cache"),c=localStorage.getItem("plan.plans"),u=r?parseInt(r,10):0,d=l?parseInt(l,10):0,h=o?parseInt(o,10):0,p=c?JSON.parse(c):i.TEMPLATES[u].plans;new s.default({template:u,theme:d,cache:h,plans:p})},{"./config":15,"./plan":19}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var N=e("./utils"),P=e("./time"),A=e("./dom"),u=e("./delegate");function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var i=function(){function c(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),this.attributes={parent:"",time:"",viewMode:0,pickMode:"single",hasSwitcher:!0,hasFooter:!0,hasClock:!0,onDatePick:null,onMonthPick:null,onYearPick:null,onTodayPick:null,MONTHS:[],DAYS:[],DATES:[],STYLES:{}},this.elements={parent:null,wrap:null,header:null,title:null,switcher:null,prev:null,next:null,body:null,week:null,dates:null,months:null,years:null,footer:null,today:null,time:null},this.data={minYear:0,maxYear:0,year:0,month:0,date:{year:0,month:0,date:0,day:0,text:"",fullText:""},picked:[]},this.initialize(e).render().addEventListeners(),this}return function(e,t,n){t&&a(e.prototype,t),n&&a(e,n)}(c,[{key:"initialize",value:function(e){var t,n,a,i,s,r,l,o=(0,P.getYear)().value;switch(this.set(c.defaults).set(e),n=this.get("time"),t=this.get("pickMode"),i=(a=(0,P.getMonth)(n)).text,this.setYear(n).setMonth(n).setDate(n)._setYears(n),t){case"multiple":this.data.picked.push(this.getDate().text);break;case"range":r=i+"-1",l=i+"-"+this.get("DATES")[a.value-1],this.data.picked=[r,l];break;case"week":r=(s=(0,P.getWeekRanges)(n))[0],l=s[s.length-1],this.data.picked=[r,l]}return this.data.minYear=o-100,this.data.maxYear=o+100,this._createElements(),this}},{key:"render",value:function(){var e=this.getEls(),t=e.wrap,n=e.header,a=e.switcher,i=e.body,s=e.footer,r=document.createDocumentFragment();return this._renderTitle(),n.appendChild(e.title),this.get("hasSwitcher")&&(a.appendChild(e.prev),a.appendChild(e.next),n.appendChild(a)),this._renderDays(),i.appendChild(e.week),this._renderDates(),i.appendChild(e.dates),this._renderMonths(),i.appendChild(e.months),this._renderYears(),i.appendChild(e.years),this.get("hasFooter")&&(this._renderFooter(),s.appendChild(e.today),this.get("hasClock")&&s.appendChild(e.time)),t.appendChild(n),t.appendChild(i),this.get("hasFooter")&&t.appendChild(s),r.appendChild(t),e.parent.appendChild(r),this}},{key:"addEventListeners",value:function(){var e=this.get("STYLES"),t="click",n="."+e.TITLE,a="."+e.PREV,i="."+e.NEXT,s="."+e.DATE,r="."+e.MONTH,l="."+e.YEAR,o="."+e.TODAY,c=this.getEls().wrap;return(0,u.on)(c,n,t,this._titleClick,this),this.get("hasSwitcher")&&((0,u.on)(c,a,t,this._prevClick,this),(0,u.on)(c,i,t,this._nextClick,this)),(0,u.on)(c,s,t,this._dateClick,this),(0,u.on)(c,r,t,this._monthClick,this),(0,u.on)(c,l,t,this._yearClick,this),this.get("hasClock")&&(0,u.on)(c,o,t,this._todayClick,this),this}},{key:"reload",value:function(e){return this.destroy().initialize(e).render().addEventListeners(),this}},{key:"destroy",value:function(){return this.removeEventListeners().hide().remove().reset(),this}},{key:"removeEventListeners",value:function(){var e="click",t=this.getEls().wrap;return(0,u.off)(t,e,this._titleClick),this.get("hasSwitcher")&&((0,u.off)(t,e,this._prevClick),(0,u.off)(t,e,this._nextClick)),(0,u.off)(t,e,this._dateClick),(0,u.off)(t,e,this._monthClick),(0,u.off)(t,e,this._yearClick),this.get("hasClock")&&(0,u.off)(t,e,this._todayClick),this}},{key:"remove",value:function(){var e=this.getEls();return e.parent.removeChild(e.wrap),this}},{key:"reset",value:function(){return this.attributes={parent:"",time:"",viewMode:0,pickMode:"single",hasSwitcher:!0,hasFooter:!0,hasClock:!0,MONTHS:[],DAYS:[],DATES:[],STYLES:{}},this.elements={parent:null,wrap:null,header:null,title:null,switcher:null,prev:null,next:null,body:null,week:null,dates:null,months:null,years:null,footer:null,today:null,time:null,year:null,month:null,date:null},this.data={minYear:0,maxYear:0,years:{start:0,end:0},year:0,month:0,date:{year:0,month:0,date:0,day:0,text:"",fullText:""},picked:[]},this}},{key:"get",value:function(e){return this.attributes[e]}},{key:"set",value:function(e){var t=0<arguments.length&&void 0!==e?e:{};return(0,N.assign)(this.attributes,t),console.log(this.attributes),this}},{key:"getEls",value:function(){return this.elements}},{key:"getYear",value:function(){return this.data.year}},{key:"setYear",value:function(e){return this.data.year=(0,P.getYear)(e).value,this}},{key:"getMonth",value:function(){return this.data.month}},{key:"setMonth",value:function(e){return this.data.month=(0,P.getMonth)(e).value,this}},{key:"getDate",value:function(){return this.data.date}},{key:"setDate",value:function(e){return this.data.date=(0,P.getDate)(e),this}},{key:"getYears",value:function(){return this.data.years}},{key:"getPicked",value:function(){return this.data.picked}},{key:"update",value:function(e){var t=0<arguments.length&&void 0!==e?e:0;return this.updateViewMode(t).updateView(),this}},{key:"updateViewMode",value:function(e){var t=0<arguments.length&&void 0!==e?e:0;return 2<t?t=2:t<0&&(t=0),this.set({viewMode:t}),this}},{key:"updateView",value:function(){var e=this.get("STYLES").HIDDEN,t=this.getEls(),n=t.week,a=t.dates,i=t.months,s=t.years;switch(this._renderTitle(),this.get("viewMode")){case 0:(0,A.addClass)(i,e),(0,A.addClass)(s,e),(0,A.removeClass)(n,e),(0,A.removeClass)(a,e),this._repaintDates();break;case 1:(0,A.addClass)(n,e),(0,A.addClass)(a,e),(0,A.addClass)(s,e),(0,A.removeClass)(i,e),this._repaintMonths();break;case 2:(0,A.addClass)(n,e),(0,A.addClass)(a,e),(0,A.addClass)(i,e),(0,A.removeClass)(s,e),this._repaintYears()}return this}},{key:"prev",value:function(){var e,t=this.getYears().start,n=this.getYear(),a=this.getMonth(),i=this.data.minYear;switch(this.get("viewMode")){case 0:(a-=1)<1&&(a=12,(n-=1)<i&&(n=i)),e=n+"-"+a+"-1",this.setYear(e).setMonth(e);break;case 1:(n-=1)<i&&(n=i),e=n+"-1-1",this.setYear(e);break;case 2:(t-=10)<i&&(t=i+9),this._setYears(t.toString())}return this.updateView(),this}},{key:"next",value:function(){var e,t=this.getYears().start,n=this.getYear(),a=this.getMonth(),i=this.data.maxYear;switch(this.get("viewMode")){case 0:12<(a+=1)&&i<(n+=a=1)&&(n=i),e=n+"-"+a+"-1",this.setYear(e).setMonth(e);break;case 1:i<(n+=1)&&(n=i),e=n+"-1-1",this.setYear(e);break;case 2:i<(t+=10)&&(t=i-9),this._setYears(t.toString())}return this.updateView(),this}},{key:"pickDate",value:function(e){var t,n=this.get("STYLES").PICKED,a=this.get("pickMode"),i=this.getEls(),s=e.getAttribute("data-date"),r=this.get("onDatePick"),l=null;if((0,A.hasClass)(e,n))switch(a){case"single":case"week":return!1;case"multiple":(0,A.removeClass)(e,n),this._removePicked(s),t=this.getPicked(),this.setDate(t[t.length-1]),(0,N.isFunction)(r)&&r(t,e,this);break;case"range":this.data.picked=[],this.data.picked.push(s),this.setDate(s),i.date=e,this._updateDateRanges(),(0,N.isFunction)(r)&&r(this.getPicked(),e,this)}else switch(this.setYear(s).setMonth(s),a){case"single":(l=i.date)&&(0,A.removeClass)(l,n),(0,A.addClass)(e,n),i.date=e,this.setDate(s),(0,N.isFunction)(r)&&r(s,e,this);break;case"multiple":this.data.picked.push(s),this.data.picked.sort(),t=this.getPicked(),this.setDate(t[t.length-1]),(0,A.addClass)(e,n),(0,N.isFunction)(r)&&r(this.getPicked(),e,this);break;case"range":switch(this.data.picked.length){case 0:case 1:this.data.picked.push(s),2===this.data.picked.length&&this.data.picked.sort(),t=this.getPicked(),this.setDate(t[t.length-1]),i.date=e,this._updateDateRanges(),(0,N.isFunction)(r)&&r(t,e,this);break;case 2:this.data.picked=[],this.data.picked.push(s),i.date=e,this._updateDateRanges()}break;case"week":var o=(0,P.getWeekRanges)(s);this.data.picked=[o[0],o[o.length-1]],this.setDate(o[o.length-1]),i.date=e,this._updateWeekRanges(),(0,N.isFunction)(r)&&r(this.getPicked(),e,this)}return this}},{key:"pickMonth",value:function(e){var t=this.get("STYLES").PICKED,n=this.getEls(),a=n.month,i=e.getAttribute("data-month"),s=this.get("onMonthPick");return(0,A.hasClass)(e,t)?this.update():(a&&(0,A.removeClass)(a,t),(0,A.addClass)(e,t),n.month=e,this.setYear(i).setMonth(i)._setYears(i).update()),(0,N.isFunction)(s)&&s(i,e,this),this}},{key:"pickYear",value:function(e){var t=this.get("STYLES").PICKED,n=this.getEls(),a=n.year,i=e.getAttribute("data-year"),s=this.get("onYearPick");return(0,A.hasClass)(e,t)?this.setYear(i).update(1):(a&&(0,A.removeClass)(a,t),(0,A.addClass)(e,t),n.year=e,this.setYear(i)._setYears(i).update(1)),(0,N.isFunction)(s)&&s(i,e,this),this}},{key:"pickToday",value:function(){var e=(0,P.getToday)().value,t=this.get("onTodayPick");return this.setYear(e).setMonth(e).setDate(e)._setYears(e).update(),(0,N.isFunction)(t)&&t(e,this.getEls().dates.querySelector("[data-date="+e+"]"),this),this}},{key:"hide",value:function(){var e=this.get("STYLES").HIDDEN,t=this.getEls().wrap;return(0,A.addClass)(t,e),this}},{key:"show",value:function(){var e=this.get("STYLES").HIDDEN,t=this.getEls().wrap;return(0,A.removeClass)(t,e),this}},{key:"toggle",value:function(){var e=this.get("STYLES").HIDDEN,t=this.getEls().wrap;return(0,A.hasClass)(t,e)?this.show():this.hide(),this}},{key:"_setYears",value:function(e){return this.data.years=(0,P.getYears)(e),this}},{key:"_removePicked",value:function(e){var t=this.getPicked(),n=t.indexOf(e);return-1<n&&t.splice(n,1),this}},{key:"_createElements",value:function(){var e=this.get("STYLES"),t=e.WRAP,n=e.WRAP_WITHOUT_FOOTER,a=e.HEADER,i=e.TITLE,s=e.SWITCHER,r=e.PREV,l=e.ICON_PREV,o=e.NEXT,c=e.ICON_NEXT,u=e.BODY,d=e.WEEK,h=e.DATES,p=e.MONTHS,m=e.YEARS,f=e.FOOTER,g=e.FOOTER_DATE,v=e.TODAY,k=e.FOOTER_TIME,y=e.TIME,E=e.TEXT,C=e.HIDDEN,T=" ",b=this.get("hasFooter"),S=this.getEls(),_=t,w=d,P=h,x=p,D=m;switch(this.get("viewMode")){case 0:x+=T+C,D+=T+C;break;case 1:w+=T+C,P+=T+C,D+=T+C;break;case 2:w+=T+C,P+=T+C,x+=T+C}return b||(_+=T+n),S.parent=document.getElementById(this.get("parent")),S.wrap=(0,A.createElement)("div",{id:(0,N.guid)(4,10),className:_}),S.header=(0,A.createElement)("div",{className:a}),S.title=(0,A.createElement)("h4",{className:i},[(0,A.createElement)("span",{className:E})]),this.get("hasSwitcher")&&(S.switcher=(0,A.createElement)("div",{className:s}),S.prev=(0,A.createElement)("div",{className:r},[(0,A.createElement)("span",{className:E},[(0,A.createElement)("i",{className:l})])]),S.next=(0,A.createElement)("div",{className:o},[(0,A.createElement)("span",{className:E},[(0,A.createElement)("i",{className:c})])])),S.body=(0,A.createElement)("div",{className:u}),S.week=(0,A.createElement)("div",{className:w}),S.dates=(0,A.createElement)("div",{className:P}),S.months=(0,A.createElement)("div",{className:x}),S.years=(0,A.createElement)("div",{className:D}),b&&(S.footer=(0,A.createElement)("div",{className:f}),S.today=(0,A.createElement)("div",{className:g},[(0,A.createElement)("p",{className:v},[(0,A.createElement)("span",{className:E})])]),this.get("hasClock")&&(S.time=(0,A.createElement)("div",{className:k},[(0,A.createElement)("p",{className:y},[(0,A.createElement)("span",{className:E})])]))),this}},{key:"_renderTitle",value:function(){var e=this.getEls().title.querySelector("."+this.get("STYLES").TEXT),t=this.getYears(),n=this.getYear(),a="";switch(this.get("viewMode")){case 0:a=n+"年"+this.getMonth()+"月";break;case 1:a=(0,P.getYear)(n.toString()).text;break;case 2:a=t.start+" - "+t.end}return e.innerHTML=a,this}},{key:"_renderDays",value:function(){var e=this.get("STYLES"),a=e.DAY,i=e.WEEKEND,s=e.TEXT,r=this.get("DAYS"),l=document.createDocumentFragment();return r.forEach(function(e,t){var n=0===t||t===r.length-1?a+" "+i:a;l.appendChild((0,A.createElement)("div",{className:n},[(0,A.createElement)("span",{className:s},[e])]))}),this.getEls().week.appendChild(l),this}},{key:"_renderDates",value:function(){var e,t=this.get("DATES"),n=document.createDocumentFragment(),a=this.getYear(),i=this.getMonth(),s=t[i-1],r=(0,P.getDay)(a+"-"+i+"-1").value,l=i-2<0?a-1:a,o=i-2<0?12:i-1,c=t[o-1],u=12===i?a+1:a,d=12===i?1:i+1;return(0,P.isLeapYear)(a)&&2==o?c+=1:(0,P.isLeapYear)(a)&&2===i&&(s+=1),e=42-(r+s),0!==r&&n.appendChild(this._getDatesFragment({year:l,month:o,start:c-(r-1),end:c,isPrev:!0,isNext:!1})),n.appendChild(this._getDatesFragment({year:a,month:i,start:1,end:s,isPrev:!1,isNext:!1})),0<e&&n.appendChild(this._getDatesFragment({year:u,month:d,start:1,end:e,isPrev:!1,isNext:!0})),this.getEls().dates.appendChild(n),this}},{key:"_repaintDates",value:function(){var e=this.get("STYLES").HIDDEN,t=this.getEls().dates;return(0,A.addClass)(t,e),t.innerHTML="",(0,A.removeClass)(t,e),this._renderDates(),this}},{key:"_getDatesFragment",value:function(e){for(var o=this,c=e.year,u=e.month,t=e.start,n=e.end,d=e.isPrev,h=e.isNext,p=" ",a=this.get("STYLES"),m=a.DATE,f=a.DATE_PREV,g=a.DATE_NEXT,v=a.CURRENT,k=a.PICKED,y=a.PICKED_RANGE,E=a.WEEKEND,C=a.TEXT,T=document.createDocumentFragment(),b=this.getEls(),S=t,_=this.get("pickMode"),w=this.getPicked(),i=function(){var n=c+"-"+u+"-"+S,e=(0,P.isToday)(n),t=(0,P.getDay)(n),a=[(0,A.createElement)("span",{className:C},[S])],i="",s=void 0;switch(s=(0,A.createElement)("div",{"data-date":n},a),i+=m,d?i+=p+f:h&&(i+=p+g),e&&(i+=p+v),0!==t.value&&6!==t.value||(i+=p+E),_){case"single":var r=o.getDate().text;(0,P.isDatesEqual)(n,r)&&(i+=p+k,b.date=s);break;case"multiple":w.forEach(function(e){(0,P.isDatesEqual)(n,e)&&(i+=p+k)});break;case"range":case"week":var l=[];2===w.length?(l=(0,P.getRanges)(w[0],w[1])).forEach(function(e,t){if(!(0,P.isDatesEqual)(n,e))return!1;0!==t&&t!==l.length-1?(i+=p+k,i+=p+y):0!==t&&t!==l.length-1||(i+=p+k)}):1===w.length&&(i+=p+k)}s.className=i,T.appendChild(s)};S<=n;S+=1)i();return T}},{key:"_updateDateRanges",value:function(){var e=this.get("STYLES"),a=e.PICKED,i=e.PICKED_RANGE,t=this.getEls(),n=this.elements.date,s=t.dates,r=s.querySelectorAll("."+a);switch(this.data.picked.length){case 1:r.forEach(function(e){(0,A.removeClass)(e,a),(0,A.hasClass)(e,i)&&(0,A.removeClass)(e,i)}),(0,A.addClass)(n,a);break;case 2:var l=(0,P.getRanges)(this.data.picked[0],this.data.picked[1]);l.forEach(function(e,t){var n=s.querySelector('[data-date="'+e+'"]');0<t&&t<l.length-1&&((0,A.addClass)(n,a),(0,A.addClass)(n,i))}),(0,A.addClass)(n,a)}return this}},{key:"_updateWeekRanges",value:function(){var e=this.get("STYLES"),a=e.PICKED,i=e.PICKED_RANGE,s=this.getEls().dates,t=s.querySelectorAll("."+a),n=this.getPicked(),r=(0,P.getWeekRanges)(n[0]);return t.forEach(function(e){(0,A.removeClass)(e,i),(0,A.removeClass)(e,a)}),r.forEach(function(e,t){var n=s.querySelector('[data-date="'+e+'"]');0<t&&t<r.length-1?((0,A.addClass)(n,a),(0,A.addClass)(n,i)):0!==t&&t!==r.length-1||(0,A.addClass)(n,a)}),this}},{key:"_renderMonths",value:function(){var s=this,e=this.get("STYLES"),r=e.CURRENT,l=e.PICKED,o=e.MONTH,c=e.MONTH_PREV,u=e.MONTH_NEXT,d=e.TEXT,t=this.get("MONTHS"),h=document.createDocumentFragment(),n=this.getEls(),p=this.getYear(),m=(0,P.getToday)();return t.forEach(function(e,t){var n,a=s.getDate(),i=o;t<2?(i+=" "+c,p-1===a.year&&e===a.month&&(i+=" "+l),n=(0,A.createElement)("div",{className:i,"data-month":p-1+"-"+e+"-1"},[(0,A.createElement)("span",{className:d},[e])])):2<=t&&t<=13?(p===m.year&&e===m.month&&(i+=" "+r),p===a.year&&e===a.month&&(i+=" "+l),n=(0,A.createElement)("div",{className:i,"data-month":p+"-"+e+"-1"},[(0,A.createElement)("span",{className:d},[e])])):13<t&&t<=15&&(i+=" "+u,p+1===a.year&&e===a.month&&(i+=" "+l),n=(0,A.createElement)("div",{className:i,"data-month":p+1+"-"+e+"-1"},[(0,A.createElement)("span",{className:d},[e])])),h.appendChild(n)}),n.months.appendChild(h),this}},{key:"_repaintMonths",value:function(){var e=this.get("STYLES").HIDDEN,t=this.getEls().months;return(0,A.addClass)(t,e),t.innerHTML="",(0,A.removeClass)(t,e),this._renderMonths(),this}},{key:"_renderYears",value:function(){var e=this.getYears(),t=e.start,n=e.end,a=t-3,i=t-1,s=n+1,r=n+3,l=document.createDocumentFragment();return l.appendChild(this._getYearsFragment({start:a,end:i,isPrev:!0,isNext:!1})),l.appendChild(this._getYearsFragment({start:t,end:n,isPrev:!1,isNext:!1})),l.appendChild(this._getYearsFragment({start:s,end:r,isPrev:!1,isNext:!0})),this.getEls().years.appendChild(l),this}},{key:"_repaintYears",value:function(){var e=this.get("STYLES").HIDDEN,t=this.getEls().years;return(0,A.addClass)(t,e),t.innerHTML="",(0,A.removeClass)(t,e),this._renderYears(),this}},{key:"_getYearsFragment",value:function(e){for(var t=e.start,n=e.end,a=e.isPrev,i=e.isNext,s=this.get("STYLES"),r=s.YEAR,l=s.YEAR_PREV,o=s.YEAR_NEXT,c=s.CURRENT,u=s.PICKED,d=s.DISABLED,h=s.TEXT,p=document.createDocumentFragment(),m=this.getEls(),f=this.data.minYear,g=this.data.maxYear,v=t;v<=n;v+=1){var k=this.getDate(),y=v===(0,P.getToday)().year,E=v===k.year,C=r,T=(0,A.createElement)("div",{"data-year":v+"-1-1"},[(0,A.createElement)("span",{className:h},[v])]);a?C+=" "+l:i&&(C+=" "+o),y&&(C+=" "+c),E&&(C+=" "+u,m.year=T),(v<f||g<v)&&(C+=" "+d),T.className=C,p.appendChild(T)}return p}},{key:"_renderFooter",value:function(){var r=this.get("STYLES").TEXT,l=this.getEls(),e=l.today.querySelector("."+r),t=(0,P.getToday)(),o=null;return e.innerHTML="今天："+t.text,e.setAttribute("data-date",t.value),this.get("hasClock")&&function e(){var t=l.time.querySelector("."+r),n=new Date,a=n.getHours(),i=n.getMinutes(),s=n.getSeconds();o&&clearTimeout(o),a<10&&(a="0"+a),i<10&&(i="0"+i),s<10&&(s="0"+s),t.innerHTML=a+":"+i+":"+s,o=setTimeout(e,1e3)}(),this}},{key:"_titleClick",value:function(){var e=this.get("viewMode");return 2<(e+=1)&&(e=2),this.update(e),this}},{key:"_prevClick",value:function(){return this.prev(),this}},{key:"_nextClick",value:function(){return this.next(),this}},{key:"_dateClick",value:function(e){return this.pickDate(e.delegateTarget),this}},{key:"_monthClick",value:function(e){return this.pickMonth(e.delegateTarget),this}},{key:"_yearClick",value:function(e){return this.pickYear(e.delegateTarget),this}},{key:"_todayClick",value:function(){var e=this.getEls(),t=(0,P.getToday)().text;return this.pickToday(),this.pickDate(e.dates.querySelector('[data-date="'+t+'"]')),this}}]),c}();i.defaults={parent:"calendar",time:(0,P.getDate)().text,viewMode:0,pickMode:"single",hasSwitcher:!0,hasFooter:!0,hasClock:!0,onDatePick:null,onMonthPick:null,onYearPick:null,onTodayPick:null,MONTHS:[11,12,1,2,3,4,5,6,7,8,9,10,11,12,1,2],DAYS:["日","一","二","三","四","五","六"],DATES:[31,28,31,30,31,30,31,31,30,31,30,31],STYLES:{WRAP:"cal-md",WRAP_WITHOUT_FOOTER:"cal-md-without-footer",HEADER:"cal-hd",TITLE:"cal-title",SWITCHER:"cal-switcher",PREV:"cal-prev",ICON_PREV:"icon-cheveron-up",NEXT:"cal-next",ICON_NEXT:"icon-cheveron-down",BODY:"cal-bd",WEEK:"cal-week",WEEKEND:"cal-weekend",DAY:"cal-day",DATES:"cal-dates",DATE:"cal-date",DATE_PREV:"cal-date-prev",DATE_NEXT:"cal-date-next",MONTHS:"cal-months",MONTH:"cal-month",MONTH_PREV:"cal-month-prev",MONTH_NEXT:"cal-month-next",YEARS:"cal-years",YEAR:"cal-year",YEAR_PREV:"cal-year-prev",YEAR_NEXT:"cal-year-next",FOOTER:"cal-ft",FOOTER_DATE:"cal-ft-date",TODAY:"cal-today",FOOTER_TIME:"cal-ft-time",TIME:"cal-time",TEXT:"cal-text",CURRENT:"cal-current",PICKED:"cal-picked",PICKED_RANGE:"cal-picked-range",PICKED_POINT:"cal-picked-point",DISABLED:"cal-disabled",HIDDEN:"cal-hidden"}};var s=i;n.default=s},{"./delegate":17,"./dom":18,"./time":21,"./utils":22}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.STORAGE=n.THEMES=n.TEMPLATES=void 0;n.TEMPLATES=[{name:"空模板",image:"images/t-empty.png",value:0,plans:[]},{name:"演示模板",image:"images/t-plan.png",value:1,plans:[{id:1,title:"分析 Plan 项目的用户需求",deadline:"2019-07-14",estimate:"3d",level:0,desc:"- 于客户进行多轮沟通，收集尽可能多用户需求 \n- 并分析整理出项目计划",create:"2019-07-05",update:"2019-07-14",status:3,marked:!0,delayed:!1,deleted:!1},{id:2,title:"根据分析出的项目计划，整理产品设计方案",deadline:"2019-07-16",estimate:"1d",level:1,desc:"根据项目计划，分析整理出的完整产品功能需求，出产品设计方案（功能需求，用户故事）",create:"2019-07-05",update:"2019-07-16",status:2,marked:!1,delayed:!1,deleted:!1},{id:3,title:"出 Plan 的 UI 设计稿",deadline:"2019-07-18",estimate:"3d",level:1,desc:"根据功能需求和用户故事，设计出一套完整的系统 UI 界面",create:"2019-07-05",update:"2019-07-06",status:1,marked:!1,delayed:!1,deleted:!1},{id:4,title:"设计用户体验细节",deadline:"2019-07-18",estimate:"3d",level:1,desc:"根据功能需求和用户故事以及 UI 设计图，设计出完整的用户体验细节",create:"2019-07-05",update:"2019-07-06",status:0,marked:!0,delayed:!1,deleted:!1},{id:5,title:"前端开发开发 HTML 交互原型",deadline:"2019-07-24",estimate:"3d",level:1,desc:"前端工程师根据功能需求和用户故事，结合 UI 设计图和交互设计，开发出产品的交互原型",create:"2019-07-05",update:"2019-07-06",status:0,marked:!0,delayed:!1,deleted:!0},{id:6,title:"进行交互评审",deadline:"2019-07-28",estimate:"3d",level:2,desc:"联系客户，对交互原型进行评审，根据反馈结果进行用户体验优化",create:"2019-07-15",update:"2019-07-06",status:0,marked:!1,delayed:!1,deleted:!1},{id:7,title:"前端开发最终的产品",deadline:"2019-08-01",estimate:"3d",level:3,desc:"前端工程师开发出最终的 Plan 产品",create:"2019-07-15",update:"2019-07-06",status:0,marked:!0,delayed:!1,deleted:!1},{id:8,title:"交付客户，进行项目收尾",deadline:"2019-08-08",estimate:"3d",level:3,desc:"将最终的产品交付给客户，项目结束",create:"2019-07-15",update:"2019-07-06",status:0,marked:!0,delayed:!1,deleted:!1}]}];n.THEMES=[{name:"蓝色",theme:"theme-blue",color:"blue",value:0},{name:"绿色",theme:"theme-green",color:"green",value:1},{name:"紫色",theme:"theme-purple",color:"purple",value:2},{name:"红色",theme:"theme-red",color:"red",value:3},{name:"靛蓝色",theme:"theme-indigo",color:"indigo",value:4},{name:"墨绿色",theme:"theme-teal",color:"teal",value:5},{name:"暗紫色",theme:"theme-dark-purple",color:"dark-purple",value:6},{name:"粉色",theme:"theme-pink",color:"pink",value:7}];n.STORAGE=[{name:"关闭",value:0},{name:"启用",value:1}]},{}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("./utils"),l=e("./dom"),a=e("./delegate");function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var s=function(){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.attributes={title:"",message:"",cancelText:"",enterText:"",afterClose:null,afterCancel:null,afterEnter:null},this.elements={wrap:null,modal:null,header:null,body:null,title:null,message:null,footer:null,cancel:null,enter:null,overlay:null},this.data={title:"",message:""},this.initialize(e).render().addEventListeners(),this}return function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(t,[{key:"initialize",value:function(e){return this.set(e).setTitle(this.get("title")).setMessage(this.get("message"))._createElements(),this}},{key:"render",value:function(){var e=this.getEls().wrap;return document.body.appendChild(e),this}},{key:"addEventListeners",value:function(){var e=this.getEls().wrap;return(0,a.on)(e,".confirm-overlay","click",this._onOverlayClick,this),(0,a.on)(e,".confirm-cancel","click",this._onCancelClick,this),(0,a.on)(e,".confirm-enter","click",this._onEnterClick,this),this}},{key:"removeEventListeners",value:function(){var e=this.getEls().wrap;return(0,a.off)(e,"click",this._onOverlayClick),(0,a.off)(e,"click",this._onCancelClick),(0,a.off)(e,"click",this._onEnterClick),this}},{key:"reload",value:function(e){return this.destroy().initialize(e).render().addEventListeners(),this}},{key:"destroy",value:function(){return this.removeEventListeners().remove().reset(),this}},{key:"remove",value:function(){var e=this.getEls().wrap;return document.body.removeChild(e),this}},{key:"reset",value:function(){return this.attributes={title:"",message:"",cancelText:"取消",enterText:"确认",afterClose:null,afterCancel:null,afterEnter:null},this.elements={wrap:null,modal:null,header:null,body:null,title:null,message:null,footer:null,cancel:null,enter:null,overlay:null},this.data={title:"",message:""},this}},{key:"get",value:function(e){return this.attributes[e]}},{key:"set",value:function(e){return(0,r.assign)(this.attributes,e),this}},{key:"getEls",value:function(){return this.elements}},{key:"getTitle",value:function(){return this.data.title}},{key:"setTitle",value:function(e){return this.data.title=(0,r.toSafeText)(e),this}},{key:"getMessage",value:function(){return this.data.message}},{key:"setMessage",value:function(e){return this.data.message=(0,r.toSafeText)(e),this}},{key:"open",value:function(){var e=this.getEls().wrap;return(0,l.removeClass)(e,"hidden"),this}},{key:"close",value:function(){var e=this.getEls().wrap,t=this.get("afterClose");return(0,l.addClass)(e,"hidden"),(0,r.isFunction)(t)&&t(),this}},{key:"_createElements",value:function(){var e=r.toSafeText,t=this.getEls(),n=this.getTitle(),a=this.getMessage(),i=e(this.get("cancelText")),s=e(this.get("enterText"));return t.header=(0,l.createElement)("div",{className:"confirm-hd"}),t.title=(0,l.createElement)("h2",{className:"confirm-title"},[(0,r.toSafeText)(n)]),t.message=(0,l.createElement)("p",{className:"confirm-message"},[(0,r.toSafeText)(a)]),t.body=(0,l.createElement)("div",{className:"confirm-bd"},[t.title,t.message]),t.cancel=(0,l.createElement)("div",{className:"confirm-button confirm-cancel"},[i]),t.enter=(0,l.createElement)("div",{className:"confirm-button confirm-enter"},[s]),t.footer=(0,l.createElement)("div",{className:"confirm-ft"},[t.cancel,t.enter]),t.modal=(0,l.createElement)("div",{className:"confirm-modal"},[t.header,t.body,t.footer]),t.overlay=(0,l.createElement)("div",{className:"confirm-overlay"}),t.wrap=(0,l.createElement)("div",{className:"confirm hidden"},[t.modal,t.overlay]),this}},{key:"_onOverlayClick",value:function(){return this.close(),this}},{key:"_onCancelClick",value:function(){var e=this.get("afterCancel");return this.close(),(0,r.isFunction)(e)&&e(),this}},{key:"_onEnterClick",value:function(){var e=this.get("afterEnter");return this.close(),(0,r.isFunction)(e)&&e(),this}}]),t}();n.default=s},{"./delegate":17,"./dom":18,"./utils":22}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.getDelegateTarget=n.preventDefault=n.stopPropagation=n.stop=n.off=n.once=n.on=void 0;function r(a,i,s,r,l,e,o){return"mouseenter"!==s&&"mouseleave"!==s||(e=!0),r._delegateWrapper=r,a.addEventListener(s,function e(t){var n=u(a,t.target,i);(t.delegateTarget=n)&&(!0===o&&c(a,s,e),r.call(l||a,t))},e||!1),r}var a=e("./dom");n.on=r;function i(e,t,n,a,i,s){return r(e,t,n,a,i,s,!0)}n.once=i;var c=function(e,t,n,a){n._delegateWrapper&&delete(n=n._delegateWrapper)._delegateWrapper,"mouseenter"!==t&&"mouseleave"!==t||(a=!0),e.removeEventListener(t,n,a||!1)};n.off=c;function s(e){l(e),o(e)}n.stop=s;var l=function(e){var t=window.event;e.stopPropagation?e.stopPropagation():t.cancelBubble=!0};n.stopPropagation=l;var o=function(e){var t=window.event;e.preventDefault?e.preventDefault():t.returnValue=!1};n.preventDefault=o;var u=function(e,t,n){for(;t&&t!==e;){if((0,a.hasClass)(t,n.replace(".","")))return t;t=t.parentElement}return null};n.getDelegateTarget=u;var d={on:r,once:i,off:c,stop:s,stopPropagation:l,preventDefault:o};n.default=d},{"./dom":18}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.replaceClass=n.removeClass=n.addClass=n.hasClass=n.setAttribute=n.createElement=void 0;function a(e,t,n){var a=document.createElement(e);for(var i in t)t.hasOwnProperty(i)&&r(a,i,t[i]);return(0,s.isArray)(n)&&n.forEach(function(e){var t;if((0,s.isElement)(e))t=e;else if((0,s.isString)(e)||(0,s.isNumber)(e)){var n=(0,s.isString)(e)?(0,s.trim)((0,s.stripTags)(e)):e.toString();t=document.createTextNode(n)}a.appendChild(t)}),a}var s=e("./utils");n.createElement=a;var r=function(e,t,n){var a=e.tagName.toLowerCase();switch(t){case"style":e.style.cssText=n;break;case"value":"input"===a||"textarea"===a?e.value=n:e.setAttribute(t,n);break;case"className":e.className=n;break;default:e.setAttribute(t,n)}};n.setAttribute=r;function i(e,t){var n=e.className;return!!n&&n.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}n.hasClass=i;function l(e,t){var n=e.className;if(i(e,t))return!1;n+=0<n.length?" "+t:t,e.className=n}n.addClass=l;function o(e,t){var n=e.className;if(!n||!i(e,t))return!1;n=(0,s.trim)(n.replace(t,"")),e.className=n}n.removeClass=o;function c(e,t,n){var a=e.className;if(!a||!i(e,n))return!1;a=(0,s.trim)(a.replace(n,t)),e.className=a}n.replaceClass=c;var u={createElement:a,setAttribute:r,hasClass:i,addClass:l,removeClass:o,replaceClass:c};n.default=u},{"./utils":22}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=e("./utils"),d=e("./time"),T=e("./dom"),i=e("./delegate"),h=e("./task"),b=e("./config"),c=a(e("./calendar")),s=a(e("./confirm")),l=a(e("dragula")),p=a(e("marked"));function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var u=function(){function u(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),this.attributes={template:0,theme:0,cache:0,plans:[]},this.elements={wrap:null,toolbar:null,viewPanel:null,addPanel:null,editPanel:null,trashPanel:null,settingPanel:null,todoCount:null,tasksTodo:null,doingCount:null,tasksDoing:null,checkingCount:null,tasksChecking:null,doneCount:null,tasksDone:null,trashCount:null,tasksTrash:null,columns:null,columnsOverlay:null},this.$calendar=null,this.$confirm=null,this.$dragula=null,this.data={plans:[],filter:"inbox",editPlan:null},this.initialize(e).render().addEventListeners(),this}return function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(u,[{key:"initialize",value:function(e){var t,n,a,i,s,r=this.getEls();return this.set(e).queryElements().setPlans((0,o.clone)(this.get("plans"))),t=r.tasksTrash,n=r.tasksTodo,a=r.tasksDoing,i=r.tasksChecking,s=r.tasksDone,this.$dragula=(0,l.default)([t,n,a,i,s]),this}},{key:"render",value:function(){var e=this.getTodoPlans(),t=this.getDoingPlans(),n=this.getCheckingPlans(),a=this.getDonePlans();return(0,T.addClass)(document.body,b.THEMES[this.get("theme")].theme),this.updateSettingPanel().updateColumns(e,t,n,a),this}},{key:"addEventListeners",value:function(){var a=this,e=this.getEls().wrap;return(0,i.on)(e,".toolbar-plus","click",this._onPlusButtonClick,this),(0,i.on)(e,".toolbar-inbox","click",this._onInBoxFilterButtonClick,this),(0,i.on)(e,".toolbar-spades","click",this._onSpadesFilterButtonClick,this),(0,i.on)(e,".toolbar-heart","click",this._onHeartFilterButtonClick,this),(0,i.on)(e,".toolbar-clubs","click",this._onClubsFilterButtonClick,this),(0,i.on)(e,".toolbar-diamonds","click",this._onDiamondsFilterButtonClick,this),(0,i.on)(e,".toolbar-bookmark","click",this._onBookmarkFilterButtonClick,this),(0,i.on)(e,".toolbar-trash","click",this._onTrashButtonClick,this),(0,i.on)(e,".toolbar-setting","click",this._onSettingButtonClick,this),(0,i.on)(e,".view-cancel","click",this._onViewCancelButtonClick,this),(0,i.on)(e,".view-edit","click",this._onViewEditButtonClick,this),(0,i.on)(e,".add-cancel","click",this._onAddCancelButtonClick,this),(0,i.on)(e,".add-save","click",this._onAddSaveButtonClick,this),(0,i.on)(e,".add-level","click",this._onAddLevelButtonClick,this),(0,i.on)(e,".add-deadline","click",this._onAddDeadlineIconClick,this),(0,i.on)(e,".edit-cancel","click",this._onEditCancelButtonClick,this),(0,i.on)(e,".edit-save","click",this._onEditSaveButtonClick,this),(0,i.on)(e,".edit-level","click",this._onEditLevelButtonClick,this),(0,i.on)(e,".edit-deadline","click",this._onEditDeadlineIconClick,this),(0,i.on)(e,".trash-cancel","click",this._onTrashCancelButtonClick,this),(0,i.on)(e,".setting-cancel","click",this._onSettingCancelButtonClick,this),(0,i.on)(e,".setting-template","click",this._onSettingTemplateClick,this),(0,i.on)(e,".setting-theme","click",this._onSettingThemeClick,this),(0,i.on)(e,".setting-cache","click",this._onSettingCacheClick,this),(0,i.on)(e,".task-title","click",this._onTaskTitleClick,this),(0,i.on)(e,".task-prev","click",this._onPrevButtonClick,this),(0,i.on)(e,".task-next","click",this._onNextButtonClick,this),(0,i.on)(e,".task-edit","click",this._onEditButtonClick,this),(0,i.on)(e,".task-bookmark","click",this._onMarkedButtonClick,this),(0,i.on)(e,".task-delete","click",this._onDeleteButtonClick,this),(0,i.on)(e,".task-replace","click",this._onReplaceButtonClick,this),(0,i.on)(e,".column-up","click",this._onColumnUpButtonClick,this),(0,i.on)(e,".column-down","click",this._onColumnDownButtonClick,this),(0,i.on)(e,".columns-overlay","click",this._onColumnsOverlayClick,this),this.$dragula.on("drop",function(e,t,n){a.drop(e,t,n)}),this}},{key:"reload",value:function(e){this.destroy().initialize(e).render().addEventListeners()}},{key:"destroy",value:function(){return this.removeEventListeners().reset().empty(),this.$dragula.destroy(),this.$dragula=null,this}},{key:"removeEventListeners",value:function(){var e=this.getEls().wrap;return(0,i.off)(e,"click",this._onPlusButtonClick),(0,i.off)(e,"click",this._onInBoxFilterButtonClick),(0,i.off)(e,"click",this._onSpadesFilterButtonClick),(0,i.off)(e,"click",this._onHeartFilterButtonClick),(0,i.off)(e,"click",this._onClubsFilterButtonClick),(0,i.off)(e,"click",this._onDiamondsFilterButtonClick),(0,i.off)(e,"click",this._onBookmarkFilterButtonClick),(0,i.off)(e,"click",this._onTrashButtonClick),(0,i.off)(e,"click",this._onSettingButtonClick),(0,i.off)(e,"click",this._onViewCancelButtonClick),(0,i.off)(e,"click",this._onViewEditButtonClick),(0,i.off)(e,"click",this._onAddCancelButtonClick),(0,i.off)(e,"click",this._onAddSaveButtonClick),(0,i.off)(e,"click",this._onAddLevelButtonClick),(0,i.off)(e,"click",this._onAddDeadlineIconClick),(0,i.off)(e,"click",this._onEditCancelButtonClick),(0,i.off)(e,"click",this._onEditSaveButtonClick),(0,i.off)(e,"click",this._onEditLevelButtonClick),(0,i.off)(e,"click",this._onEditDeadlineIconClick),(0,i.off)(e,"click",this._onTrashCancelButtonClick),(0,i.off)(e,"click",this._onSettingCancelButtonClick),(0,i.off)(e,"click",this._onSettingTemplateClick),(0,i.off)(e,"click",this._onSettingThemeClick),(0,i.off)(e,"click",this._onSettingCacheClick),(0,i.off)(e,"click",this._onTaskTitleClick),(0,i.off)(e,"click",this._onPrevButtonClick),(0,i.off)(e,"click",this._onEditButtonClick),(0,i.off)(e,"click",this._onMarkedButtonClick),(0,i.off)(e,"click",this._onDeleteButtonClick),(0,i.off)(e,"click",this._onReplaceButtonClick),(0,i.off)(e,"click",this._onNextButtonClick),(0,i.off)(e,"click",this._onColumnUpButtonClick),(0,i.off)(e,"click",this._onColumnDownButtonClick),(0,i.off)(e,"click",this._onColumnsOverlayClick),this}},{key:"add",value:function(e){var t=this.getEls(),n=t.tasksTodo,a=t.todoCount,i=(0,o.clone)(this.getPlans()),s=e.status,r=this.getFilter();return e.delayed=u.isDelayed(e),i.push(e),this.setPlans(i),("marked"!==s&&u.isLevelSaveAsFilter(e.level,r)||"inbox"===r)&&(a.innerHTML=parseInt(a.innerHTML,10)+1,n.appendChild((0,h.createTaskElement)(e))),this}},{key:"remove",value:function(e){var t=e.status,n=this.getEls(),a=n.tasksTrash,i=this.getStatusTasksEl(t),s=this.getStatusCountEl(t);return e.deleted=!0,e.delayed=u.isDelayed(e),e.update=(0,d.getMoments)(),this.setPlan(e),u.updateStatusChangedCount(s,n.trashCount),i.removeChild(i.querySelector('div.task[data-id="'.concat(e.id,'"]'))),a.appendChild((0,h.createTaskElement)(e)),this}},{key:"update",value:function(e){var t,n,a,i,s=this.getFilter();return e.delayed=u.isDelayed(e),e.update=(0,d.getMoments)(),this.setPlan(e),t=this.filterPlans(s,0),n=this.filterPlans(s,1),a=this.filterPlans(s,2),i=this.filterPlans(s,3),this.updateColumns(t,n,a,i),this}},{key:"delete",value:function(n){var e,t,a=(0,o.clone)(this.getPlans()),i=this.getEls(),s=i.tasksTrash,r=i.trashCount,l=-1;return a.forEach(function(e,t){n.id===e.id&&(l=t)}),-1===l||(a.splice(l,1),this.setPlans(a),t=parseInt(r.innerHTML,10),--t,e=s.querySelector('div.task[data-id="'.concat(n.id,'"]')),s.removeChild(e),r.innerHTML=t),this}},{key:"confirm",value:function(e){return this.setEditPlan(e),this.$confirm.open(),this}},{key:"reset",value:function(){return this.attributes={template:0,theme:0,cache:0,plans:[]},this.elements={wrap:null,toolbar:null,viewPanel:null,addPanel:null,editPanel:null,trashPanel:null,settingPanel:null,todoCount:null,tasksTodo:null,doingCount:null,tasksDoing:null,checkingCount:null,tasksChecking:null,doneCount:null,tasksDone:null,trashCount:null,tasksTrash:null,columns:null,columnsOverlay:null},this.data={plans:[],filter:"inbox",editPlan:null},this}},{key:"empty",value:function(){return this.emptyAddPanel().emptyEditPanel().emptyTrashPanel().emptyViewPanel().emptyColumns(),this}},{key:"get",value:function(e){return this.attributes[e]}},{key:"set",value:function(e){return(0,o.assign)(this.attributes,e),this}},{key:"getPlan",value:function(t){return this.getPlans().filter(function(e){return e.id===t})[0]}},{key:"setPlan",value:function(n){var e=(0,o.clone)(this.getPlans()),a=-1;return e.forEach(function(e,t){e.id===n.id&&(a=t)}),-1<a&&(e[a]=n,this.setPlans(e)),this}},{key:"getEditPlan",value:function(){return this.data.editPlan}},{key:"setEditPlan",value:function(e){return this.data.editPlan=e,this}},{key:"getPlans",value:function(){return this.data.plans}},{key:"setPlans",value:function(e){return this.data.plans=e,1===this.get("cache")?localStorage.setItem("plan.plans",JSON.stringify(this.data.plans)):localStorage.removeItem("plan.plans"),this}},{key:"getFilter",value:function(){return this.data.filter}},{key:"setFilter",value:function(e){return this.data.filter=e,this}},{key:"filterPlans",value:function(e,t){var n=this.getPlans(),a=[];switch(e){case"spades":a=n.filter(function(e){return e.status===t&&0===e.level&&!e.deleted});break;case"heart":a=n.filter(function(e){return e.status===t&&1===e.level&&!e.deleted});break;case"clubs":a=n.filter(function(e){return e.status===t&&2===e.level&&!e.deleted});break;case"diamonds":a=n.filter(function(e){return e.status===t&&3===e.level&&!e.deleted});break;case"marked":a=n.filter(function(e){return e.status===t&&e.marked&&!e.deleted});break;case"deleted":a=n.filter(function(e){return e.deleted});break;default:a=n.filter(function(e){return e.status===t&&!e.deleted})}return a}},{key:"getTodoPlans",value:function(){return this.filterPlans("inbox",0)}},{key:"getDoingPlans",value:function(){return this.filterPlans("inbox",1)}},{key:"getCheckingPlans",value:function(){return this.filterPlans("inbox",2)}},{key:"getDonePlans",value:function(){return this.filterPlans("inbox",3)}},{key:"getMarkedPlans",value:function(){return this.filterPlans("marked")}},{key:"getTrashPlans",value:function(){return this.filterPlans("deleted")}},{key:"getEls",value:function(){return this.elements}},{key:"getStatusCountEl",value:function(e){var t,n=this.getEls();switch(e){case"0":case 0:t=n.todoCount;break;case"1":case 1:t=n.doingCount;break;case"2":case 2:t=n.checkingCount;break;case"3":case 3:t=n.doneCount;break;case"deleted":t=n.trashCount}return t}},{key:"getStatusTasksEl",value:function(e){var t,n=this.getEls();switch(e){case"0":case 0:t=n.tasksTodo;break;case"1":case 1:t=n.tasksDoing;break;case"2":case 2:t=n.tasksChecking;break;case"3":case 3:t=n.tasksDone;break;case"deleted":t=n.tasksTrash}return t}},{key:"queryElements",value:function(){var e=this.getEls();return e.wrap=document.querySelector("#plan"),e.toolbar=document.querySelector("#toolbar"),e.viewPanel=document.querySelector("#view-panel"),e.addPanel=document.querySelector("#add-panel"),e.editPanel=document.querySelector("#edit-panel"),e.trashPanel=document.querySelector("#trash-panel"),e.settingPanel=document.querySelector("#setting-panel"),e.todoCount=document.querySelector("#todo-count"),e.tasksTodo=document.querySelector("#tasks-todo"),e.doingCount=document.querySelector("#doing-count"),e.tasksDoing=document.querySelector("#tasks-doing"),e.checkingCount=document.querySelector("#checking-count"),e.tasksChecking=document.querySelector("#tasks-checking"),e.doneCount=document.querySelector("#done-count"),e.tasksDone=document.querySelector("#tasks-done"),e.trashCount=document.querySelector("#trash-count"),e.tasksTrash=document.querySelector("#tasks-trash"),e.columns=document.querySelector("#columns"),e.columnsOverlay=document.querySelector("#columns-overlay"),this}},{key:"checkFilter",value:function(e){var t,n,a,i,s,r="toolbar-active",l=e.getAttribute("data-filter"),o=this.getEls().toolbar;return(0,T.hasClass)(e,r)||(t=o.querySelector("."+r),(0,T.removeClass)(t,r),(0,T.addClass)(e,r),n=this.filterPlans(l,0),a=this.filterPlans(l,1),i=this.filterPlans(l,2),s=this.filterPlans(l,3),this.setFilter(l).updateColumns(n,a,i,s)),this}},{key:"checkLevel",value:function(e){var t,n,a,i="field-level-checked",s=e.getAttribute("data-level"),r=e.getAttribute("data-type"),l=this.getEls();if((0,T.hasClass)(e,i))return this;switch(r){case"add":a=(t=l.addPanel).querySelector("#".concat(r,"-level"));break;case"edit":a=(t=l.editPanel).querySelector("#".concat(r,"-level"))}return(n=t.querySelector("."+i))&&(0,T.removeClass)(n,i),(0,T.addClass)(e,i),a&&(a.value=s),this}},{key:"checkTemplate",value:function(e){var t="field-option-checked",n=e.getAttribute("data-template"),a=this.getEls().settingPanel.querySelector("#setting-templates"),i=a.querySelector("."+t),s=a.querySelector("#setting-template");return(0,T.hasClass)(e,t)||(s.value=n,i&&(0,T.removeClass)(i,t),(0,T.addClass)(e,t),this.set({template:parseInt(n,10)}),localStorage.setItem("plan.template",n)),this}},{key:"checkTheme",value:function(e){var t="field-option-checked",n=e.getAttribute("data-value"),a=this.getEls(),i=document.body,s=a.settingPanel.querySelector("#setting-themes"),r=s.querySelector("."+t),l=s.querySelector("#setting-theme");return(0,T.hasClass)(e,t)||(l.value=n,r&&(0,T.removeClass)(r,t),(0,T.addClass)(e,t),(0,T.removeClass)(i,b.THEMES[this.get("theme")].theme),(0,T.addClass)(i,b.THEMES[parseInt(n,10)].theme),this.set({theme:parseInt(n,10)}),localStorage.setItem("plan.theme",n)),this}},{key:"checkCache",value:function(e){var t="panel-option-checked",n="field-radio-checked",a=e.getAttribute("data-cache"),i=this.getEls().settingPanel.querySelector("#setting-storage"),s=i.querySelector("."+t),r=e.querySelector(".field-radio"),l=i.querySelector("."+n),o=i.querySelector("#setting-cache");return(0,T.hasClass)(e,t)||(o.value=a,s&&(0,T.removeClass)(s,t),(0,T.addClass)(e,t),l&&(0,T.removeClass)(l,n),(0,T.addClass)(r,n),this.set({cache:parseInt(a,10)}),localStorage.setItem("plan.cache",a),0===parseInt(a,10)&&localStorage.removeItem("plan.plans")),this}},{key:"checkTitle",value:function(e){var t=e.getAttribute("data-id"),n=this.getPlan(parseInt(t,10));return n.deleted||this.setEditPlan(n).openViewPanel(),this}},{key:"checkChangeStatus",value:function(e,t){var n,a,i=e.getAttribute("data-id"),s=this.getPlan(parseInt(i,10)),r=s.status,l=this.getStatusCountEl(r),o=this.getStatusTasksEl(r),c=o.querySelector('div.task[data-id="'.concat(i,'"]'));return"prev"===t?(s.status-=1,s.status<0&&(s.status=0)):"next"===t&&(s.status+=1,3<s.status&&(s.status=3)),s.delayed=u.isDelayed(s),s.update=(0,d.getMoments)(),this.setPlan(s),n=this.getStatusCountEl(s.status),a=this.getStatusTasksEl(s.status),u.updateStatusChangedCount(l,n),o.removeChild(c),a.appendChild((0,h.createTaskElement)(s)),this}},{key:"checkEdit",value:function(e){var t=e.getAttribute("data-id"),n=this.getPlan(parseInt(t,10));return this.setEditPlan(n).openEditPanel(),this}},{key:"checkBookmark",value:function(e){var t,n="task-marked",a=parseInt(e.getAttribute("data-id"),10),i=this.getPlan(a),s=this.getFilter(),r=i.status,l=this.getEls(),o='div.task[data-id="'.concat(a,'"]');switch(i.marked=!i.marked,i.update=(0,d.getMoments)(),this.setPlan(i),r){case 0:t=l.tasksTodo.querySelector(o);break;case 1:t=l.tasksDoing.querySelector(o);break;case 2:t=l.tasksChecking.querySelector(o);break;case 3:t=l.tasksDone.querySelector(o)}return"marked"===s?this.updateColumn(r,this.filterPlans(r,"marked")):i.marked?((0,T.addClass)(t,n),t.setAttribute("data-marked","1")):((0,T.removeClass)(t,n),t.setAttribute("data-marked","0")),this}},{key:"checkDelete",value:function(e){var t=this,n=e.getAttribute("data-id"),a=this.getPlan(parseInt(n,10)),i=a.deleted;return this.$confirm=new s.default({title:"确定删除任务吗？",message:i?"任务将被彻底删除，无法恢复":"任务将转移到垃圾箱，可以恢复",cancelText:"取消",enterText:"删除",afterEnter:function(){var e=t.getEditPlan();i?t.delete(e):t.remove(e),t.$confirm.destroy()}}),this.confirm(a),this}},{key:"checkReplace",value:function(e){var t,n=e.getAttribute("data-id"),a=this.getPlan(parseInt(n,10)),i=this.getEls(),s=i.tasksTrash,r=i.trashCount,l=s.querySelector('[data-id="'.concat(n,'"]'));return a.deleted=!1,this.update(a),s.removeChild(l),t=parseInt(r.innerHTML,10),--t,r.innerHTML=t,this}},{key:"checkColumnUp",value:function(e){var t=parseInt(e.getAttribute("data-status"),10),n=e.parentNode.querySelector(".column-down"),a=this.getStatusTasksEl(t);return(0,T.addClass)(e,"hidden"),(0,T.removeClass)(n,"hidden"),(0,T.addClass)(a,"tasks-min"),this}},{key:"checkColumnDown",value:function(e){var t=parseInt(e.getAttribute("data-status"),10),n=e.parentNode.querySelector(".column-up"),a=this.getStatusTasksEl(t);return(0,T.addClass)(e,"hidden"),(0,T.removeClass)(n,"hidden"),(0,T.removeClass)(a,"tasks-min"),this}},{key:"drop",value:function(e,t,n){var a=this.getFilter(),i=e.getAttribute("data-id"),s=this.getPlan(parseInt(i,10)),r=n.getAttribute("data-status"),l=t.getAttribute("data-status"),o=this.getStatusCountEl(r),c=this.getStatusCountEl(l);if(l===r)return this;if("deleted"===l)s.deleted=!0;else if("deleted"===r){switch(a){case"marked":s.marked=!0;break;case"spades":s.level=0;break;case"heart":s.level=1;break;case"clubs":s.level=2;break;case"diamonds":s.level=3}s.deleted=!1,s.status=parseInt(l,10)}else s.status=parseInt(l,10);return s.update=(0,d.getMoments)(),s.delayed=u.isDelayed(s),this.setPlan(s),u.updateStatusChangedCount(o,c),s.deleted?((0,T.addClass)(e,"task-deleted"),e.setAttribute("data-deleted","1")):((0,T.removeClass)(e,"task-deleted"),e.setAttribute("data-deleted","0"),(0,T.replaceClass)(e,"task-status-"+s.status,"task-status-"+r),e.setAttribute("data-status",s.status)),s.marked?((0,T.addClass)(e,"task-marked"),e.setAttribute("data-marked","1")):((0,T.removeClass)(e,"task-marked"),e.setAttribute("data-marked","0")),s.delayed?((0,T.addClass)(e,"task-delayed"),e.setAttribute("data-delay","1")):((0,T.removeClass)(e,"task-delayed"),e.setAttribute("data-delay","0")),this}},{key:"updateTodoColumn",value:function(e){var t=this.getEls(),n=t.tasksTodo,a=t.todoCount,i=this._getTasksFragment(e);return a.innerHTML="".concat(e.length),n.innerHTML="",n.appendChild(i),this}},{key:"updateDoingColumn",value:function(e){var t=this.getEls(),n=t.tasksDoing,a=t.doingCount,i=this._getTasksFragment(e);return a.innerHTML="".concat(e.length),n.innerHTML="",n.appendChild(i),this}},{key:"updateCheckingColumn",value:function(e){var t=this.getEls(),n=t.tasksChecking,a=t.checkingCount,i=this._getTasksFragment(e);return a.innerHTML="".concat(e.length),n.innerHTML="",n.appendChild(i),this}},{key:"updateDoneColumn",value:function(e){var t=this.getEls(),n=t.tasksDone,a=t.doneCount,i=this._getTasksFragment(e);return a.innerHTML="".concat(e.length),n.innerHTML="",n.appendChild(i),this}},{key:"updateColumn",value:function(e,t){switch(e){case 0:this.updateTodoColumn(t);break;case 1:this.updateDoingColumn(t);break;case 2:this.updateCheckingColumn(t);break;case 3:this.updateDoneColumn(t)}return this}},{key:"updateColumns",value:function(e,t,n,a){return this.updateTodoColumn(e).updateDoingColumn(t).updateCheckingColumn(n).updateDoneColumn(a),this}},{key:"emptyTodoColumn",value:function(){var e=this.getEls();return e.todoCount=0,e.tasksTodo.innerHTML="",this}},{key:"emptyDoingColumn",value:function(){var e=this.getEls();return e.doingCount=0,e.tasksDoing.innerHTML="",this}},{key:"emptyCheckingColumn",value:function(){var e=this.getEls();return e.checkCount=0,e.tasksChecking.innerHTML="",this}},{key:"emptyDoneColumn",value:function(){var e=this.getEls();return e.doneCount=0,e.tasksDone.innerHTML="",this}},{key:"emptyColumns",value:function(){return this.emptyTodoColumn().emptyDoingColumn().emptyCheckingColumn().emptyDoneColumn(),this}},{key:"emptyViewPanel",value:function(){var e=this.getEls().viewPanel,t=e.querySelector("#view-title"),n=e.querySelector("#view-create"),a=e.querySelector("#view-deadline"),i=e.querySelector("#view-estimate"),s=e.querySelector("#view-level"),r=e.querySelector("#view-desc");return t.innerHTML="",n.innerHTML="",a.innerHTML="",i.innerHTML="",s.innerHTML="",r.innerHTML="",this}},{key:"emptyAddPanel",value:function(){var e="field-level-checked",t=this.getEls().addPanel,n=t.querySelector("#add-title"),a=t.querySelector("#add-create"),i=t.querySelector("#add-deadline"),s=t.querySelector("#add-estimate"),r=t.querySelector("#add-level"),l=t.querySelector("#add-desc"),o=t.querySelector("."+e);return n.value="",a.innerHTML="",i.value="",s.value="",r.value=-1,l.value="",o&&(0,T.removeClass)(o,e),this}},{key:"emptyEditPanel",value:function(){var e="field-level-checked",t=this.getEls().editPanel,n=t.querySelector("#edit-title"),a=t.querySelector("#edit-create"),i=t.querySelector("#edit-deadline"),s=t.querySelector("#edit-estimate"),r=t.querySelector("#edit-level"),l=t.querySelector("#edit-desc"),o=t.querySelector("."+e);return n.value="",a.innerHTML="",i.value="",s.value="",r.value=-1,l.value="",o&&(0,T.removeClass)(o,e),this}},{key:"emptyTrashPanel",value:function(){var e=this.getEls(),t=e.trashCount,n=e.tasksTrash;return t.innerHTML=0,n.innerHTML="",this}},{key:"emptyPanel",value:function(){var e=this.getEls().columns;return(0,T.hasClass)(e,"panel-view-opened")&&this.emptyViewPanel(),(0,T.hasClass)(e,"panel-add-opened")&&this.emptyAddPanel(),(0,T.hasClass)(e,"panel-edit-opened")&&this.emptyEditPanel(),(0,T.hasClass)(e,"panel-trash-opened")&&this.emptyTrashPanel(),this}},{key:"closeSettingPanel",value:function(){var e="panel-opened",t=this.getEls(),n=t.columns,a=t.toolbar.querySelector(".toolbar-setting");return(0,T.removeClass)(a,"toolbar-active"),(0,T.removeClass)(t.settingPanel,e),(0,T.removeClass)(n,e),this}},{key:"updateSettingPanel",value:function(){var s=" ",r="field-radio",l="field-option",o="field-option-checked",i="field-template",c="field-theme",u="setting-template",d="setting-theme",h="setting-cache",p=this.get("template"),m=this.get("theme"),f=this.get("cache"),e=this.getEls().settingPanel,t=e.querySelector("#setting-templates"),n=e.querySelector("#setting-themes"),a=e.querySelector("#setting-storage"),g=(0,T.createElement)("input",{type:"hidden",name:"template",id:"setting-template",value:this.get("template")}),v=(0,T.createElement)("input",{type:"hidden",name:"theme",id:"setting-theme",value:this.get("theme")}),k=(0,T.createElement)("input",{type:"hidden",name:"cache",id:"setting-cache",value:this.get("cache")}),y=(0,T.createElement)("div",{className:"field-templates"}),E=(0,T.createElement)("div",{className:"field-themes"}),C=(0,T.createElement)("div",{className:"field-radios-group"});return b.TEMPLATES.forEach(function(e){var t=e.value===p?l+s+o+s+i+s+u:l+s+i+s+u,n=(0,T.createElement)("p",{className:"field-template-image","data-template":e.value},[(0,T.createElement)("img",{alt:e.name,src:e.image,width:"130",height:"51"})]),a=(0,T.createElement)("p",{className:"field-template-text","data-template":e.value},[e.name]);y.appendChild((0,T.createElement)("div",{className:t,"data-template":e.value},[n,a]))}),b.THEMES.forEach(function(e){var t=e.value===m?l+s+o+s+c+s+d:l+s+c+s+d,n=(0,T.createElement)("div",{className:"field-theme-color "+e.theme,"data-theme":e.theme,"data-value":e.value}),a=(0,T.createElement)("p",{className:"field-theme-text","data-theme":e.theme,"data-value":e.value},[e.name]);E.appendChild((0,T.createElement)("div",{className:t,"data-theme":e.theme,"data-value":e.value},[n,a]))}),b.STORAGE.forEach(function(e){var t=e.value===f?l+s+o+s+h:l+s+h,n=e.value===f?r+s+"field-radio-checked":r,a=(0,T.createElement)("div",{className:n,"data-cache":e.value},[(0,T.createElement)("div",{className:"field-radio-icon"},[(0,T.createElement)("i",{className:"icon-radio-unchecked"}),(0,T.createElement)("i",{className:"icon-radio-checked2"})]),(0,T.createElement)("label",{className:"field-radio-label"},[e.name])]),i=(0,T.createElement)("div",{className:t,"data-cache":e.value},[a]);C.appendChild(i)}),t.appendChild(y),t.appendChild(g),n.appendChild(E),n.appendChild(v),a.appendChild(C),a.appendChild(k),this}},{key:"openSettingPanel",value:function(){var e="panel-opened",t=this.getEls(),n=t.columns,a=t.toolbar.querySelector(".toolbar-setting");return this.closeViewPanel().closeAddPanel().closeEditPanel().closeTrashPanel(),(0,T.addClass)(a,"toolbar-active"),(0,T.addClass)(t.settingPanel,e),(0,T.addClass)(n,e),this}},{key:"toggleSettingPanel",value:function(){var e=this.getEls().settingPanel;return(0,T.hasClass)(e,"panel-opened")?this.closeSettingPanel():this.openSettingPanel(),this}},{key:"closeViewPanel",value:function(){var e="panel-opened",t=this.getEls(),n=t.columns;return(0,T.removeClass)(t.viewPanel,e),(0,T.removeClass)(n,e),this.emptyViewPanel(),this}},{key:"openViewPanel",value:function(){var e="panel-opened",t=this.getEls(),n=t.viewPanel,a=t.columns;return this.closeSettingPanel().closeAddPanel().closeEditPanel().closeTrashPanel().updateViewPanel(),(0,T.addClass)(n,e),(0,T.addClass)(a,e),this}},{key:"updateViewPanel",value:function(){var e,t="field-view-level field-level-icon field-level-checked",n=this.getEls(),a=this.getEditPlan(),i=n.viewPanel,s=i.querySelector("#view-title"),r=i.querySelector("#view-create"),l=i.querySelector("#view-deadline"),o=i.querySelector("#view-estimate"),c=i.querySelector("#view-level"),u=i.querySelector("#view-desc");switch(s.innerHTML=a.title,r.innerHTML=a.create,l.innerHTML=a.deadline,o.innerHTML=a.estimate,u.innerHTML=(0,p.default)(a.desc),a.level){case 0:e=(0,T.createElement)("div",{className:t},[(0,T.createElement)("i",{className:"icon-spades"})]);break;case 1:e=(0,T.createElement)("div",{className:t},[(0,T.createElement)("i",{className:"icon-heart"})]);break;case 2:e=(0,T.createElement)("div",{className:t},[(0,T.createElement)("i",{className:"icon-clubs"})]);break;case 3:e=(0,T.createElement)("div",{className:t},[(0,T.createElement)("i",{className:"icon-diamonds"})])}return c.innerHTML="",c.appendChild(e),this}},{key:"closeAddPanel",value:function(){var e="panel-opened",t=this.getEls(),n=t.addPanel,a=t.columns;return(0,T.removeClass)(n,e),(0,T.removeClass)(a,e),this.$calendar&&(this.$calendar.destroy(),this.$calendar=null),this.emptyAddPanel(),this}},{key:"openAddPanel",value:function(){var t=this,e="panel-opened",n=this.getEls(),a=n.addPanel,i=n.columns,s=a.querySelector("#add-create"),r=a.querySelector("#add-deadline"),l=a.querySelector(".add-deadline"),o=(0,d.getToday)().text;return this.closeSettingPanel().closeViewPanel().closeEditPanel().closeTrashPanel(),this.$calendar=new c.default({parent:"add-calendar",time:o,hasFooter:!1,onDatePick:function(e){r.value=e,t.$calendar.hide(),(0,T.removeClass)(l,"field-icon-checked")}}),s.innerHTML=o,this.$calendar.hide(),(0,T.addClass)(a,e),(0,T.addClass)(i,e),this}},{key:"toggleAddPanel",value:function(){var e=this.getEls().addPanel;return(0,T.hasClass)(e,"panel-opened")?this.closeAddPanel():this.openAddPanel(),this}},{key:"closeEditPanel",value:function(){var e="panel-opened",t=this.getEls(),n=t.columns;return(0,T.removeClass)(t.editPanel,e),(0,T.removeClass)(n,e),this.$calendar&&(this.$calendar.destroy(),this.$calendar=null),this.emptyEditPanel(),this}},{key:"openEditPanel",value:function(){var t=this,e="panel-opened",n=this.getEls(),a=n.editPanel,i=n.columns,s=a.querySelector("#edit-deadline"),r=a.querySelector(".edit-deadline");return this.closeSettingPanel().closeViewPanel().closeAddPanel().closeTrashPanel().updateEditPanel(),this.$calendar=new c.default({parent:"edit-calendar",time:this.getEditPlan().deadline,hasFooter:!1,onDatePick:function(e){s.value=e,t.$calendar.hide(),(0,T.removeClass)(r,"field-icon-checked")}}),this.$calendar.hide(),(0,T.addClass)(a,e),(0,T.addClass)(i,e),this}},{key:"updateEditPanel",value:function(){var e=this.getEditPlan(),t=this.getEls().editPanel,n=t.querySelector("#edit-title"),a=t.querySelector("#edit-create"),i=t.querySelector("#edit-deadline"),s=t.querySelector("#edit-estimate"),r=t.querySelector("#edit-level"),l=t.querySelector("#edit-desc"),o=t.querySelector('[data-level="'.concat(e.level,'"]'));return n.value=e.title,a.innerHTML=e.create,i.value=e.deadline,s.value=e.estimate,r.value=e.level,l.value=e.desc,o&&(0,T.addClass)(o,"field-level-checked"),this}},{key:"closeTrashPanel",value:function(){var e="panel-opened",t=this.getEls(),n=t.columns,a=t.trashPanel,i=t.toolbar.querySelector(".toolbar-trash");return(0,T.removeClass)(i,"toolbar-active"),(0,T.removeClass)(a,e),(0,T.removeClass)(n,e),this.emptyTrashPanel(),this}},{key:"openTrashPanel",value:function(){var e="panel-opened",t=this.getEls(),n=t.columns,a=t.trashPanel,i=t.toolbar.querySelector(".toolbar-trash");return this.closeSettingPanel().closeViewPanel().closeAddPanel().closeEditPanel().updateTrashPanel(),(0,T.addClass)(i,"toolbar-active"),(0,T.addClass)(a,e),(0,T.addClass)(n,e),this}},{key:"updateTrashPanel",value:function(){var e=this.getTrashPlans(),t=this.getEls(),n=t.tasksTrash,a=t.trashCount,i=this._getTasksFragment(e);return a.innerHTML=e.length,n.innerHTML="",n.appendChild(i),this}},{key:"toggleTrashPanel",value:function(){var e=this.getEls().trashPanel;return(0,T.hasClass)(e,"panel-opened")?this.closeTrashPanel():this.openTrashPanel(),this}},{key:"closePanel",value:function(){var e=this.getEls().columns;return(0,T.hasClass)(e,"panel-opened")&&this.closeViewPanel().closeAddPanel().closeEditPanel().closeTrashPanel().closeSettingPanel(),this}},{key:"_getTasksFragment",value:function(e){var n=document.createDocumentFragment();return e.length<1||e.forEach(function(e){var t=(0,h.createTaskElement)(e);n.appendChild(t)}),n}},{key:"_onPlusButtonClick",value:function(){return this.toggleAddPanel(),this}},{key:"_onInBoxFilterButtonClick",value:function(e){return this.closePanel().checkFilter(e.delegateTarget),this}},{key:"_onSpadesFilterButtonClick",value:function(e){return this.closePanel().checkFilter(e.delegateTarget),this}},{key:"_onHeartFilterButtonClick",value:function(e){return this.closePanel().checkFilter(e.delegateTarget),this}},{key:"_onClubsFilterButtonClick",value:function(e){return this.closePanel().checkFilter(e.delegateTarget),this}},{key:"_onDiamondsFilterButtonClick",value:function(e){return this.closePanel().checkFilter(e.delegateTarget),this}},{key:"_onBookmarkFilterButtonClick",value:function(e){return this.closePanel().checkFilter(e.delegateTarget),this}},{key:"_onTrashButtonClick",value:function(){return this.toggleTrashPanel(),this}},{key:"_onSettingButtonClick",value:function(){this.toggleSettingPanel()}},{key:"_onViewCancelButtonClick",value:function(){return this.closeViewPanel(),this}},{key:"_onViewEditButtonClick",value:function(){return this.openEditPanel(),this}},{key:"_onAddCancelButtonClick",value:function(){return this.closeAddPanel(),this}},{key:"_onAddLevelButtonClick",value:function(e){return this.checkLevel(e.delegateTarget),this}},{key:"_onAddDeadlineIconClick",value:function(e){var t="field-icon-checked",n=e.delegateTarget;return(0,T.hasClass)(n,t)?(0,T.removeClass)(n,t):(0,T.addClass)(n,t),this.$calendar.toggle(),this}},{key:"_onAddSaveButtonClick",value:function(){var e=this.getEls().addPanel,t=e.querySelector("#add-title"),n=e.querySelector("#add-deadline"),a=e.querySelector("#add-estimate"),i=e.querySelector("#add-level"),s=e.querySelector("#add-desc"),r={},l=(0,d.getMoments)();return r.id=parseInt((0,o.guid)(4,10),10),r.title=(0,o.toSafeText)(t.value),r.deadline=n.value,r.estimate=a.value,r.level=parseInt(i.value,10),r.desc=(0,o.toSafeText)(s.value),r.marked=!1,r.deleted=!1,r.status=0,r.create=l,r.update=l,this.closeAddPanel().add(r),this}},{key:"_onEditCancelButtonClick",value:function(){return this.closeEditPanel(),this}},{key:"_onEditLevelButtonClick",value:function(e){return this.checkLevel(e.delegateTarget),this}},{key:"_onEditDeadlineIconClick",value:function(e){var t="field-icon-checked",n=e.delegateTarget;return(0,T.hasClass)(n,t)?(0,T.removeClass)(n,t):(0,T.addClass)(n,t),this.$calendar.toggle(),this}},{key:"_onEditSaveButtonClick",value:function(){var e=this.getEls().editPanel,t=e.querySelector("#edit-title"),n=e.querySelector("#edit-deadline"),a=e.querySelector("#edit-estimate"),i=e.querySelector("#edit-level"),s=e.querySelector("#edit-desc"),r=this.getEditPlan(),l=(0,o.clone)(r);return l.id=r.id,l.title=t.value,l.deadline=n.value,l.estimate=a.value,l.level=parseInt(i.value,10),l.desc=s.value,l.marked=r.marked,l.deleted=r.deleted,l.status=r.status,l.create=r.create,this.closeEditPanel().update(l),this}},{key:"_onTrashCancelButtonClick",value:function(){return this.closeTrashPanel(),this}},{key:"_onSettingCancelButtonClick",value:function(){return this.closeSettingPanel(),this}},{key:"_onSettingTemplateClick",value:function(e){return this.checkTemplate(e.delegateTarget),this}},{key:"_onSettingThemeClick",value:function(e){return this.checkTheme(e.delegateTarget),this}},{key:"_onSettingCacheClick",value:function(e){return this.checkCache(e.delegateTarget),this}},{key:"_onTaskTitleClick",value:function(e){return this.checkTitle(e.delegateTarget),this}},{key:"_onPrevButtonClick",value:function(e){return this.checkChangeStatus(e.delegateTarget,"prev"),this}},{key:"_onNextButtonClick",value:function(e){return this.checkChangeStatus(e.delegateTarget,"next"),this}},{key:"_onEditButtonClick",value:function(e){return this.checkEdit(e.delegateTarget),this}},{key:"_onMarkedButtonClick",value:function(e){return this.checkBookmark(e.delegateTarget),this}},{key:"_onDeleteButtonClick",value:function(e){return this.checkDelete(e.delegateTarget),this}},{key:"_onReplaceButtonClick",value:function(e){return this.checkReplace(e.delegateTarget),this}},{key:"_onColumnsOverlayClick",value:function(){return this.closePanel(),this}},{key:"_onColumnUpButtonClick",value:function(e){return this.checkColumnUp(e.delegateTarget),this}},{key:"_onColumnDownButtonClick",value:function(e){return this.checkColumnDown(e.delegateTarget),this}}],[{key:"isDelayed",value:function(e){return 0<((new Date).getTime()>new Date(e.deadline).getTime())&&e.status<2}},{key:"isEstimateTime",value:function(e){return/^(([1-9]\d*)|[0]?)\.([0-9]\d*)([dhm]?)$/i.test(e)}},{key:"isLevelSaveAsFilter",value:function(e,t){return u.levelToFilter(e)===t}},{key:"levelToFilter",value:function(e){var t="";switch(e){case"0":case 0:t="spades";break;case"1":case 1:t="heart";break;case"2":case 2:t="clubs";break;case"3":case 4:t="diamonds"}return t}},{key:"filterToLevel",value:function(e){var t=-1;switch(e){case"spades":t=0;break;case"heart":t=1;break;case"clubs":t=2;break;case"diamonds":t=3}return t}},{key:"updateStatusChangedCount",value:function(e,t){var n=parseInt(e.innerHTML,10),a=parseInt(t.innerHTML,10);--n,e.innerHTML=n,a+=1,t.innerHTML=a}}]),u}();n.default=u},{"./calendar":14,"./config":15,"./confirm":16,"./delegate":17,"./dom":18,"./task":20,"./time":21,"./utils":22,dragula:8,marked:9}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.createTaskMainElement=n.createTaskFooterElement=n.createTaskEstimateElement=n.createTaskDeadlineElement=n.createTaskBodyElement=n.createTaskDescElement=n.createTaskHeaderElement=n.createTaskTitleElement=n.createTaskTitleTextElement=n.createTaskLevelElement=n.createTaskSideElement=n.createTaskNextElement=n.createTaskReplaceElement=n.createTasKDeleteElement=n.createTaskMarkElement=n.createTaskEditElement=n.createTaskPrevElement=n.createTaskElement=void 0;var a,l=e("./dom"),i=e("./utils"),s=(a=e("marked"))&&a.__esModule?a:{default:a};function r(e){var t=e.id,n=m(e),a=S(e),i="task";return e.marked&&(i+=" task-marked"),e.deleted&&(i+=" task-deleted"),e.delayed&&(i+=" task-delayed"),i+=" task-status-"+e.status,(0,l.createElement)("div",{id:"task-".concat(t),className:i,"data-id":"".concat(t),"data-status":"".concat(e.status),"data-deleted":"".concat(e.deleted?1:0),"data-delayed":"".concat(e.delayed?1:0),"data-marked":"".concat(e.marked?1:0)},[a,n])}n.createTaskElement=r;function o(e){var t=e.id;return(0,l.createElement)("div",{className:"task-button task-prev","data-id":"".concat(t)},[(0,l.createElement)("i",{className:"icon-cheveron-up"})])}n.createTaskPrevElement=o;function c(e){var t=e.id;return(0,l.createElement)("div",{className:"task-button task-edit","data-id":"".concat(t)},[(0,l.createElement)("i",{className:"icon-edit-pencil"})])}n.createTaskEditElement=c;function u(e){var t=e.id;return(0,l.createElement)("div",{className:"task-button task-bookmark","data-id":"".concat(t)},[(0,l.createElement)("i",{className:"icon-bookmark"})])}n.createTaskMarkElement=u;function d(e){var t=e.id;return(0,l.createElement)("div",{className:"task-button task-delete","data-id":"".concat(t)},[(0,l.createElement)("i",{className:"icon-trash"})])}n.createTasKDeleteElement=d;function h(e){var t=e.id;return(0,l.createElement)("div",{className:"task-button task-replace","data-id":"".concat(t)},[(0,l.createElement)("i",{className:"icon-reload"})])}n.createTaskReplaceElement=h;function p(e){var t=e.id;return(0,l.createElement)("div",{className:"task-button task-next","data-id":"".concat(t)},[(0,l.createElement)("i",{className:"icon-cheveron-down"})])}n.createTaskNextElement=p;var m=function(e){var t=o(e),n=p(e),a=c(e),i=u(e),s=d(e),r=h(e);return(0,l.createElement)("div",{className:"task-side"},[t,a,i,r,s,n])};n.createTaskSideElement=m;function f(e){var t=e.level;return(0,l.createElement)("div",{className:"task-level task-level-".concat(t)},[(0,l.createElement)("i",{className:"icon-".concat(["spades","heart","clubs","diamonds"][t])})])}n.createTaskLevelElement=f;function g(e){return(0,l.createElement)("strong",{className:"task-title-text"},[(0,i.toSafeText)(e.title)])}n.createTaskTitleTextElement=g;function v(e){var t=e.id,n=g(e);return(0,l.createElement)("h3",{className:"task-title","data-id":"".concat(t)},["任务：",n])}n.createTaskTitleElement=v;function k(e){var t=f(e),n=v(e);return(0,l.createElement)("div",{className:"task-hd"},[n,t])}n.createTaskHeaderElement=k;function y(e){return(0,l.createElement)("div",{className:"task-desc"},[(0,s.default)((0,i.toSafeText)(e.desc))])}n.createTaskDescElement=y;function E(e){var t=y(e);return(0,l.createElement)("div",{className:"task-bd"},[t])}n.createTaskBodyElement=E;function C(e){return(0,l.createElement)("div",{className:"task-deadline"},[(0,l.createElement)("div",{className:"task-deadline-icon"},[(0,l.createElement)("i",{className:"icon-calendar"})]),(0,l.createElement)("p",{className:"task-deadline-text"},[e.deadline])])}n.createTaskDeadlineElement=C;function T(e){return(0,l.createElement)("div",{className:"task-estimate"},[(0,l.createElement)("div",{className:"task-estimate-icon"},[(0,l.createElement)("i",{className:"icon-clock"})]),(0,l.createElement)("p",{className:"task-estimate-text"},[e.estimate])])}n.createTaskEstimateElement=T;function b(e){var t=C(e),n=T(e);return(0,l.createElement)("div",{className:"task-ft"},[t,n])}n.createTaskFooterElement=b;var S=function(e){var t=k(e),n=E(e),a=b(e);return(0,l.createElement)("div",{className:"task-main"},[t,n,a])};n.createTaskMainElement=S;var _={createTaskPrevElement:o,createTaskEditElement:c,createTaskMarkElement:u,createTasKDeleteElement:d,createTaskReplaceElement:h,createTaskNextElement:p,createTaskSideElement:m,createTaskLevelElement:f,createTaskTitleTextElement:g,createTaskTitleElement:v,createTaskHeaderElement:k,createTaskDescElement:y,createTaskBodyElement:E,createTaskDeadlineElement:C,createTaskEstimateElement:T,createTaskFooterElement:b,createTaskMainElement:S,createTaskElement:r};n.default=_},{"./dom":18,"./utils":22,marked:9}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.toAllSupported=n.isEqual=n.isDatesEqual=n.isToday=n.isLeapYear=n.getMoments=n.getRanges=n.getWeekRanges=n.getYears=n.getToday=n.getDay=n.getDate=n.getMonth=n.getYear=void 0;function o(e){var t=(e?new Date(p(e)):new Date).getFullYear();return{value:t,text:t.toString(),fullText:t+"年"}}var a=e("./utils");n.getYear=o;function c(e){var t=e?new Date(p(e)):new Date,n=o(e),a=t.getMonth();return{value:a+=1,text:n.text+"-"+a,fullText:n.fullText+a+"月"}}n.getMonth=c;function u(e){var t=e?new Date(p(e)):new Date,n=o(e),a=c(e),i=t.getDate(),s=f(e),r=n.value+"-"+a.value+"-"+i,l=a.fullText+i+"日";return{year:n.value,month:a.value,date:i,day:s.value,text:r,fullText:l+" "+s.fullText}}n.getDate=u;var f=function(e){var t=(e?new Date(p(e)):new Date).getDay(),n=["日","一","二","三","四","五","六"][t];return{value:t,text:n,fullText:"星期"+n}};n.getDay=f;function i(){return u()}n.getToday=i;function s(e){var t=o(e).value,n=t.toString().split(""),a=parseInt(n[n.length-1],10),i=0,s=0;return s=0===a?(i=t)+9:9===a?(i=t-9,t):(i=t-a,t+(9-a)),{start:i,end:s}}n.getYears=s;n.getWeekRanges=function(e){var t=[31,28,31,30,31,30,31,31,30,31,30,31],n=f(e).value,a=e.split("-"),i=parseInt(a[0],10),s=parseInt(a[1],10),r=parseInt(a[2],10),l=t[s-1],o=i,c=s,u=r-n,d=i,h=s,p=r+(6-n),m=0;return v(i)&&2===s&&(l+=1),u<1&&(c-=1,u=(m=s-2)<0?(o-=1,c=12,t[11]+u):t[m]+u),l<p&&(h+=1,p-=l,11<m&&(d+=1,h=1)),g(o+"-"+c+"-"+u,d+"-"+h+"-"+p)};var g=function(e,t){var n,a,i,s=[],r=e.split("-"),l=t.split("-"),o=new Date,c=new Date;for(o.setUTCFullYear(parseInt(r[0],10),parseInt(r[1],10)-1,parseInt(r[2],10)),c.setUTCFullYear(parseInt(l[0],10),parseInt(l[1],10)-1,parseInt(l[2],10)),n=o.getTime(),a=c.getTime(),i=n;i<=a;i+=864e5)s.push(u(i).text);return s};n.getRanges=g;function r(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,a=e.getDate(),i=e.getHours(),s=e.getMinutes(),r=e.getSeconds();return n<10&&(n="0"+n),a<10&&(a="0"+a),i<10&&(i="0"+i),s<10&&(s="0"+s),r<10&&(r="0"+r),t+"-"+n+"-"+a+" "+i+":"+s+":"+r}n.getMoments=r;var v=function(e){return(e%4==0||e%400==0)&&e%100!=0};n.isLeapYear=v;function l(e){return d(e)}n.isToday=l;var d=function(e,t){return h(u(e).text,u(t).text)};n.isDatesEqual=d;var h=function(e,t){return new Date(p(e)).getTime()===new Date(p(t)).getTime()};n.isEqual=h;var p=function(e){var t=[];return(0,a.isNumber)(e)?e:(0,a.isString)(e)?(e.indexOf("-")?t=e.split("-"):e.indexOf("/")&&(t=e.split("/")),1===t.length?(t.push("1"),t.push("1")):2===t.length&&(4===t[0].length?t.push("1"):4===data[1].length&&t.unshift("1")),t.join("/")):void 0};n.toAllSupported=p;var m={getYear:o,getMonth:c,getDate:u,getDay:f,getToday:i,getYears:s,getRanges:g,getMoments:r,isLeapYear:v,isToday:l,isDatesEqual:d,isEqual:h};n.default=m},{"./utils":22}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.guid=n.assign=n.clone=n.toSafeText=n.stripScripts=n.stripTags=n.trim=n.isElement=n.isFunction=n.isArray=n.isNumber=n.isString=void 0;function a(e){return"string"==typeof e}n.isString=a;function i(e){return"number"==typeof e}n.isNumber=i;function s(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.apply(e)}n.isArray=s;function r(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.apply(e)}n.isFunction=r;function l(e){return e&&e.nodeName&&e.tagName&&1===e.nodeType}n.isElement=l;function o(e){return e.replace(/^\s+/g,"").replace(/\s+$/g,"")}n.trim=o;function c(e){return e.replace(/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?(\/)?>|<\/\w+>/gi,"")}n.stripTags=c;function u(e){return e.replace(new RegExp("<script[^>]*>([\\S\\s]*?)</script\\s*>","img"),"")}n.stripScripts=u;function d(e){return o(c(u(e)))}n.toSafeText=d;function h(e){return JSON.parse(JSON.stringify(e))}n.clone=h;function p(e){var t;if(null==e)throw new TypeError("Cannot convert undefined or null to object");t=Object(e);for(var n=0;n<(arguments.length<=1?0:arguments.length-1);n++){var a=n+1<1||arguments.length<=n+1?void 0:arguments[n+1];if(null!=a)for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t}n.assign=p;function m(e,t){var n,a,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),s=[];if(t=t||i.length,e)for(n=0;n<e;n++)s[n]=i[0|Math.random()*t];else for(s[8]=s[13]=s[18]=s[23]="-",s[14]="4",n=0;n<36;n++)s[n]||(a=0|16*Math.random(),s[n]=i[19===n?3&a|8:a]);return s.join("")}n.guid=m;var f={isArray:s,isElement:l,isFunction:r,isNumber:i,isString:a,trim:o,stripScripts:u,stripTags:c,toSafeText:d,clone:h,assign:p,guid:m};n.default=f},{}]},{},[13]);